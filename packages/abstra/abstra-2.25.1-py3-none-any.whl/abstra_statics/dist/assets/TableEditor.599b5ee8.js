import{_ as l0,F as U0}from"./AbstraButton.vue_vue_type_script_setup_true_lang.b471ceaa.js";import{B as P0}from"./BaseLayout.76b9d34c.js";import{a as b0}from"./asyncComputed.72143f3b.js";import{d as R,B as k,f as g,o as t,W as c,Z as e0,R as _,e5 as a0,a as r,e7 as g0,e as I,g as m0,ei as s0,c as Z,w as n,b as o,u as e,bL as K,ax as j,cs as P,bD as X,bp as M0,cP as i0,cr as $0,V as j0,as as E0,d9 as n0,$ as T0,ek as _0,D as R0,r as S0,eu as O0,aN as r0,e6 as o0,e4 as F0,aJ as V0,cG as K0,el as G0,cQ as W0,e9 as L0,ed as J0,bG as Q0,y as X0,cE as Y0}from"./vue-router.97d0d8a6.js";import"./gateway.91a35dd3.js";import{O as ee}from"./organization.c9b277ba.js";import{P as Z0}from"./project.52eb4019.js";import{p as z0,T as Y,d as ae}from"./tables.8944c1e2.js";import{C as te}from"./ContentLayout.e60f6cb7.js";import{p as f0}from"./popupNotifcation.80047f06.js";import{H as x0}from"./PhCheckCircle.vue.2e3af5ba.js";import{A as D0}from"./index.fb55a178.js";import{A as k0}from"./index.557e8025.js";import{A as A0}from"./index.4c3aef8d.js";import{a as le}from"./ant-design.c0f2ec4c.js";import{G as ne}from"./PhCaretRight.vue.5a9eb17e.js";import{L as oe}from"./LoadingOutlined.fae5356f.js";import{B as ue,A as re,b as se}from"./index.5452647c.js";import"./record.a84b6d90.js";import"./string.4a3650cc.js";import"./isNumeric.75337b1e.js";import"./index.8472dd28.js";import"./Avatar.ea229645.js";(function(){try{var A=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i=new Error().stack;i&&(A._sentryDebugIds=A._sentryDebugIds||{},A._sentryDebugIds[i]="73deabc8-0ab9-4774-9f06-4ba812cd09b1",A._sentryDebugIdIdentifier="sentry-dbid-73deabc8-0ab9-4774-9f06-4ba812cd09b1")}catch{}})();const ie=["width","height","fill","transform"],de={key:0},ce=r("path",{d:"M80,28H56A20,20,0,0,0,36,48V208a20,20,0,0,0,20,20H80a20,20,0,0,0,20-20V48A20,20,0,0,0,80,28ZM76,204H60V52H76ZM156,28H132a20,20,0,0,0-20,20V208a20,20,0,0,0,20,20h24a20,20,0,0,0,20-20V48A20,20,0,0,0,156,28Zm-4,176H136V52h16Zm100-76a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,252,128Z"},null,-1),ve=[ce],pe={key:1},me=r("path",{d:"M88,48V208a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H80A8,8,0,0,1,88,48Zm64-8H128a8,8,0,0,0-8,8V208a8,8,0,0,0,8,8h24a8,8,0,0,0,8-8V48A8,8,0,0,0,152,40Z",opacity:"0.2"},null,-1),fe=r("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),ge=[me,fe],he={key:2},ye=r("path",{d:"M96,48V208a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V48A16,16,0,0,1,56,32H80A16,16,0,0,1,96,48Zm56-16H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm88,88H224V104a8,8,0,0,0-16,0v16H192a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V136h16a8,8,0,0,0,0-16Z"},null,-1),He=[ye],Ve={key:3},be=r("path",{d:"M80,34H56A14,14,0,0,0,42,48V208a14,14,0,0,0,14,14H80a14,14,0,0,0,14-14V48A14,14,0,0,0,80,34Zm2,174a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H80a2,2,0,0,1,2,2ZM152,34H128a14,14,0,0,0-14,14V208a14,14,0,0,0,14,14h24a14,14,0,0,0,14-14V48A14,14,0,0,0,152,34Zm2,174a2,2,0,0,1-2,2H128a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2h24a2,2,0,0,1,2,2Zm92-80a6,6,0,0,1-6,6H222v18a6,6,0,0,1-12,0V134H192a6,6,0,0,1,0-12h18V104a6,6,0,0,1,12,0v18h18A6,6,0,0,1,246,128Z"},null,-1),$e=[be],Ze={key:4},ke=r("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),Ae=[ke],we={key:5},Ce=r("path",{d:"M80,36H56A12,12,0,0,0,44,48V208a12,12,0,0,0,12,12H80a12,12,0,0,0,12-12V48A12,12,0,0,0,80,36Zm4,172a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H80a4,4,0,0,1,4,4ZM152,36H128a12,12,0,0,0-12,12V208a12,12,0,0,0,12,12h24a12,12,0,0,0,12-12V48A12,12,0,0,0,152,36Zm4,172a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4h24a4,4,0,0,1,4,4Zm88-80a4,4,0,0,1-4,4H220v20a4,4,0,0,1-8,0V132H192a4,4,0,0,1,0-8h20V104a4,4,0,0,1,8,0v20h20A4,4,0,0,1,244,128Z"},null,-1),Me=[Ce],_e={name:"PhColumnsPlusRight"},Se=R({..._e,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(A){const i=A,l=k("weight","regular"),S=k("size","1em"),V=k("color","currentColor"),w=k("mirrored",!1),u=g(()=>{var a;return(a=i.weight)!=null?a:l}),p=g(()=>{var a;return(a=i.size)!=null?a:S}),m=g(()=>{var a;return(a=i.color)!=null?a:V}),C=g(()=>i.mirrored!==void 0?i.mirrored?"scale(-1, 1)":void 0:w?"scale(-1, 1)":void 0);return(a,N)=>(t(),c("svg",a0({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:p.value,height:p.value,fill:m.value,transform:C.value},a.$attrs),[e0(a.$slots,"default"),u.value==="bold"?(t(),c("g",de,ve)):u.value==="duotone"?(t(),c("g",pe,ge)):u.value==="fill"?(t(),c("g",he,He)):u.value==="light"?(t(),c("g",Ve,$e)):u.value==="regular"?(t(),c("g",Ze,Ae)):u.value==="thin"?(t(),c("g",we,Me)):_("",!0)],16,ie))}}),Le=["width","height","fill","transform"],ze={key:0},xe=r("path",{d:"M148,96V48a12,12,0,0,1,24,0V84h36a12,12,0,0,1,0,24H160A12,12,0,0,1,148,96ZM96,148H48a12,12,0,0,0,0,24H84v36a12,12,0,0,0,24,0V160A12,12,0,0,0,96,148Zm112,0H160a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V172h36a12,12,0,0,0,0-24ZM96,36A12,12,0,0,0,84,48V84H48a12,12,0,0,0,0,24H96a12,12,0,0,0,12-12V48A12,12,0,0,0,96,36Z"},null,-1),De=[xe],Be={key:1},Ie=r("path",{d:"M208,64V192a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192A16,16,0,0,1,208,64Z",opacity:"0.2"},null,-1),Ne=r("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),qe=[Ie,Ne],Ue={key:2},Pe=r("path",{d:"M152,96V48a8,8,0,0,1,13.66-5.66l48,48A8,8,0,0,1,208,104H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0-5.66,13.66l48,48A8,8,0,0,0,104,208V160A8,8,0,0,0,96,152ZM99.06,40.61a8,8,0,0,0-8.72,1.73l-48,48A8,8,0,0,0,48,104H96a8,8,0,0,0,8-8V48A8,8,0,0,0,99.06,40.61ZM208,152H160a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66l48-48A8,8,0,0,0,208,152Z"},null,-1),je=[Pe],Ee={key:3},Te=r("path",{d:"M154,96V48a6,6,0,0,1,12,0V90h42a6,6,0,0,1,0,12H160A6,6,0,0,1,154,96ZM96,154H48a6,6,0,0,0,0,12H90v42a6,6,0,0,0,12,0V160A6,6,0,0,0,96,154Zm112,0H160a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V166h42a6,6,0,0,0,0-12ZM96,42a6,6,0,0,0-6,6V90H48a6,6,0,0,0,0,12H96a6,6,0,0,0,6-6V48A6,6,0,0,0,96,42Z"},null,-1),Re=[Te],Oe={key:4},Fe=r("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),Ke=[Fe],Ge={key:5},We=r("path",{d:"M156,96V48a4,4,0,0,1,8,0V92h44a4,4,0,0,1,0,8H160A4,4,0,0,1,156,96ZM96,156H48a4,4,0,0,0,0,8H92v44a4,4,0,0,0,8,0V160A4,4,0,0,0,96,156Zm112,0H160a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V164h44a4,4,0,0,0,0-8ZM96,44a4,4,0,0,0-4,4V92H48a4,4,0,0,0,0,8H96a4,4,0,0,0,4-4V48A4,4,0,0,0,96,44Z"},null,-1),Je=[We],Qe={name:"PhCornersIn"},Xe=R({...Qe,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(A){const i=A,l=k("weight","regular"),S=k("size","1em"),V=k("color","currentColor"),w=k("mirrored",!1),u=g(()=>{var a;return(a=i.weight)!=null?a:l}),p=g(()=>{var a;return(a=i.size)!=null?a:S}),m=g(()=>{var a;return(a=i.color)!=null?a:V}),C=g(()=>i.mirrored!==void 0?i.mirrored?"scale(-1, 1)":void 0:w?"scale(-1, 1)":void 0);return(a,N)=>(t(),c("svg",a0({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:p.value,height:p.value,fill:m.value,transform:C.value},a.$attrs),[e0(a.$slots,"default"),u.value==="bold"?(t(),c("g",ze,De)):u.value==="duotone"?(t(),c("g",Be,qe)):u.value==="fill"?(t(),c("g",Ue,je)):u.value==="light"?(t(),c("g",Ee,Re)):u.value==="regular"?(t(),c("g",Oe,Ke)):u.value==="thin"?(t(),c("g",Ge,Je)):_("",!0)],16,Le))}}),Ye=["width","height","fill","transform"],e1={key:0},a1=r("path",{d:"M220,48V88a12,12,0,0,1-24,0V60H168a12,12,0,0,1,0-24h40A12,12,0,0,1,220,48ZM88,196H60V168a12,12,0,0,0-24,0v40a12,12,0,0,0,12,12H88a12,12,0,0,0,0-24Zm120-40a12,12,0,0,0-12,12v28H168a12,12,0,0,0,0,24h40a12,12,0,0,0,12-12V168A12,12,0,0,0,208,156ZM88,36H48A12,12,0,0,0,36,48V88a12,12,0,0,0,24,0V60H88a12,12,0,0,0,0-24Z"},null,-1),t1=[a1],l1={key:1},n1=r("path",{d:"M208,48V208H48V48Z",opacity:"0.2"},null,-1),o1=r("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),u1=[n1,o1],r1={key:2},s1=r("path",{d:"M93.66,202.34A8,8,0,0,1,88,216H48a8,8,0,0,1-8-8V168a8,8,0,0,1,13.66-5.66ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,13.66,5.66l40-40A8,8,0,0,0,88,40ZM211.06,160.61a8,8,0,0,0-8.72,1.73l-40,40A8,8,0,0,0,168,216h40a8,8,0,0,0,8-8V168A8,8,0,0,0,211.06,160.61ZM208,40H168a8,8,0,0,0-5.66,13.66l40,40A8,8,0,0,0,216,88V48A8,8,0,0,0,208,40Z"},null,-1),i1=[s1],d1={key:3},c1=r("path",{d:"M214,48V88a6,6,0,0,1-12,0V54H168a6,6,0,0,1,0-12h40A6,6,0,0,1,214,48ZM88,202H54V168a6,6,0,0,0-12,0v40a6,6,0,0,0,6,6H88a6,6,0,0,0,0-12Zm120-40a6,6,0,0,0-6,6v34H168a6,6,0,0,0,0,12h40a6,6,0,0,0,6-6V168A6,6,0,0,0,208,162ZM88,42H48a6,6,0,0,0-6,6V88a6,6,0,0,0,12,0V54H88a6,6,0,0,0,0-12Z"},null,-1),v1=[c1],p1={key:4},m1=r("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),f1=[m1],g1={key:5},h1=r("path",{d:"M212,48V88a4,4,0,0,1-8,0V52H168a4,4,0,0,1,0-8h40A4,4,0,0,1,212,48ZM88,204H52V168a4,4,0,0,0-8,0v40a4,4,0,0,0,4,4H88a4,4,0,0,0,0-8Zm120-40a4,4,0,0,0-4,4v36H168a4,4,0,0,0,0,8h40a4,4,0,0,0,4-4V168A4,4,0,0,0,208,164ZM88,44H48a4,4,0,0,0-4,4V88a4,4,0,0,0,8,0V52H88a4,4,0,0,0,0-8Z"},null,-1),y1=[h1],H1={name:"PhCornersOut"},V1=R({...H1,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(A){const i=A,l=k("weight","regular"),S=k("size","1em"),V=k("color","currentColor"),w=k("mirrored",!1),u=g(()=>{var a;return(a=i.weight)!=null?a:l}),p=g(()=>{var a;return(a=i.size)!=null?a:S}),m=g(()=>{var a;return(a=i.color)!=null?a:V}),C=g(()=>i.mirrored!==void 0?i.mirrored?"scale(-1, 1)":void 0:w?"scale(-1, 1)":void 0);return(a,N)=>(t(),c("svg",a0({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:p.value,height:p.value,fill:m.value,transform:C.value},a.$attrs),[e0(a.$slots,"default"),u.value==="bold"?(t(),c("g",e1,t1)):u.value==="duotone"?(t(),c("g",l1,u1)):u.value==="fill"?(t(),c("g",r1,i1)):u.value==="light"?(t(),c("g",d1,v1)):u.value==="regular"?(t(),c("g",p1,f1)):u.value==="thin"?(t(),c("g",g1,y1)):_("",!0)],16,Ye))}}),b1=["width","height","fill","transform"],$1={key:0},Z1=r("path",{d:"M232.49,55.51l-32-32a12,12,0,0,0-17,0l-96,96A12,12,0,0,0,84,128v32a12,12,0,0,0,12,12h32a12,12,0,0,0,8.49-3.51l96-96A12,12,0,0,0,232.49,55.51ZM192,49l15,15L196,75,181,60Zm-69,99H108V133l56-56,15,15Zm105-7.43V208a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V48A20,20,0,0,1,48,28h67.43a12,12,0,0,1,0,24H52V204H204V140.57a12,12,0,0,1,24,0Z"},null,-1),k1=[Z1],A1={key:1},w1=r("path",{d:"M200,88l-72,72H96V128l72-72Z",opacity:"0.2"},null,-1),C1=r("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),M1=[w1,C1],_1={key:2},S1=r("path",{d:"M224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Zm5.66-58.34-96,96A8,8,0,0,1,128,168H96a8,8,0,0,1-8-8V128a8,8,0,0,1,2.34-5.66l96-96a8,8,0,0,1,11.32,0l32,32A8,8,0,0,1,229.66,69.66Zm-17-5.66L192,43.31,179.31,56,200,76.69Z"},null,-1),L1=[S1],z1={key:3},x1=r("path",{d:"M228.24,59.76l-32-32a6,6,0,0,0-8.48,0l-96,96A6,6,0,0,0,90,128v32a6,6,0,0,0,6,6h32a6,6,0,0,0,4.24-1.76l96-96A6,6,0,0,0,228.24,59.76ZM125.51,154H102V130.49l66-66L191.51,88ZM200,79.51,176.49,56,192,40.49,215.51,64ZM222,128v80a14,14,0,0,1-14,14H48a14,14,0,0,1-14-14V48A14,14,0,0,1,48,34h80a6,6,0,0,1,0,12H48a2,2,0,0,0-2,2V208a2,2,0,0,0,2,2H208a2,2,0,0,0,2-2V128a6,6,0,0,1,12,0Z"},null,-1),D1=[x1],B1={key:4},I1=r("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),N1=[I1],q1={key:5},U1=r("path",{d:"M226.83,61.17l-32-32a4,4,0,0,0-5.66,0l-96,96A4,4,0,0,0,92,128v32a4,4,0,0,0,4,4h32a4,4,0,0,0,2.83-1.17l96-96A4,4,0,0,0,226.83,61.17ZM126.34,156H100V129.66l68-68L194.34,88ZM200,82.34,173.66,56,192,37.66,218.34,64ZM220,128v80a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V48A12,12,0,0,1,48,36h80a4,4,0,0,1,0,8H48a4,4,0,0,0-4,4V208a4,4,0,0,0,4,4H208a4,4,0,0,0,4-4V128a4,4,0,0,1,8,0Z"},null,-1),P1=[U1],j1={name:"PhNotePencil"},E1=R({...j1,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(A){const i=A,l=k("weight","regular"),S=k("size","1em"),V=k("color","currentColor"),w=k("mirrored",!1),u=g(()=>{var a;return(a=i.weight)!=null?a:l}),p=g(()=>{var a;return(a=i.size)!=null?a:S}),m=g(()=>{var a;return(a=i.color)!=null?a:V}),C=g(()=>i.mirrored!==void 0?i.mirrored?"scale(-1, 1)":void 0:w?"scale(-1, 1)":void 0);return(a,N)=>(t(),c("svg",a0({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:p.value,height:p.value,fill:m.value,transform:C.value},a.$attrs),[e0(a.$slots,"default"),u.value==="bold"?(t(),c("g",$1,k1)):u.value==="duotone"?(t(),c("g",A1,M1)):u.value==="fill"?(t(),c("g",_1,L1)):u.value==="light"?(t(),c("g",z1,D1)):u.value==="regular"?(t(),c("g",B1,N1)):u.value==="thin"?(t(),c("g",q1,P1)):_("",!0)],16,b1))}}),T1=["width","height","fill","transform"],R1={key:0},O1=r("path",{d:"M230.15,70.54,185.46,25.86a20,20,0,0,0-28.28,0L33.86,149.17A19.86,19.86,0,0,0,28,163.31V208a20,20,0,0,0,20,20H216a12,12,0,0,0,0-24H125L230.15,98.83A20,20,0,0,0,230.15,70.54ZM91,204H52V165l84-84,39,39ZM192,103,153,64l18.34-18.34,39,39Z"},null,-1),F1=[O1],K1={key:1},G1=r("path",{d:"M221.66,90.34,192,120,136,64l29.66-29.66a8,8,0,0,1,11.31,0L221.66,79A8,8,0,0,1,221.66,90.34Z",opacity:"0.2"},null,-1),W1=r("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM48,163.31l88-88L180.69,120l-88,88H48Zm144-54.62L147.32,64l24-24L216,84.69Z"},null,-1),J1=[G1,W1],Q1={key:2},X1=r("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM192,108.69,147.32,64l24-24L216,84.69Z"},null,-1),Y1=[X1],ea={key:3},aa=r("path",{d:"M225.91,74.79,181.22,30.1a14,14,0,0,0-19.8,0L38.1,153.41a13.94,13.94,0,0,0-4.1,9.9V208a14,14,0,0,0,14,14H216a6,6,0,0,0,0-12H110.49L225.91,94.59A14,14,0,0,0,225.91,74.79ZM93.52,210H48a2,2,0,0,1-2-2V163.31a2,2,0,0,1,.59-1.41L136,72.49,183.52,120ZM217.42,86.1,192,111.52,144.49,64,169.9,38.59a2,2,0,0,1,2.83,0l44.69,44.68A2,2,0,0,1,217.42,86.1Z"},null,-1),ta=[aa],la={key:4},na=r("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.69,147.32,64l24-24L216,84.69Z"},null,-1),oa=[na],ua={key:5},ra=r("path",{d:"M224.49,76.2,179.8,31.51a12,12,0,0,0-17,0L39.51,154.83A12,12,0,0,0,36,163.31V208a12,12,0,0,0,12,12H216a4,4,0,0,0,0-8H105.66L224.49,93.17A12,12,0,0,0,224.49,76.2ZM94.34,212H48a4,4,0,0,1-4-4V163.31a4,4,0,0,1,1.17-2.82L136,69.66,186.35,120ZM218.83,87.51,192,114.34,141.66,64l26.83-26.83a4,4,0,0,1,5.66,0l44.68,44.69A4,4,0,0,1,218.83,87.51Z"},null,-1),sa=[ra],ia={name:"PhPencilSimpleLine"},da=R({...ia,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(A){const i=A,l=k("weight","regular"),S=k("size","1em"),V=k("color","currentColor"),w=k("mirrored",!1),u=g(()=>{var a;return(a=i.weight)!=null?a:l}),p=g(()=>{var a;return(a=i.size)!=null?a:S}),m=g(()=>{var a;return(a=i.color)!=null?a:V}),C=g(()=>i.mirrored!==void 0?i.mirrored?"scale(-1, 1)":void 0:w?"scale(-1, 1)":void 0);return(a,N)=>(t(),c("svg",a0({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:p.value,height:p.value,fill:m.value,transform:C.value},a.$attrs),[e0(a.$slots,"default"),u.value==="bold"?(t(),c("g",R1,F1)):u.value==="duotone"?(t(),c("g",K1,J1)):u.value==="fill"?(t(),c("g",Q1,Y1)):u.value==="light"?(t(),c("g",ea,ta)):u.value==="regular"?(t(),c("g",la,oa)):u.value==="thin"?(t(),c("g",ua,sa)):_("",!0)],16,T1))}}),ca=["width","height","fill","transform"],va={key:0},pa=r("path",{d:"M208,112H48a20,20,0,0,0-20,20v24a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V132A20,20,0,0,0,208,112Zm-4,40H52V136H204Zm4-116H48A20,20,0,0,0,28,56V80a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V56A20,20,0,0,0,208,36Zm-4,40H52V60H204ZM160,220a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,160,220Z"},null,-1),ma=[pa],fa={key:1},ga=r("path",{d:"M216,128v24a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V128a8,8,0,0,1,8-8H208A8,8,0,0,1,216,128Zm-8-80H48a8,8,0,0,0-8,8V80a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V56A8,8,0,0,0,208,48Z",opacity:"0.2"},null,-1),ha=r("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),ya=[ga,ha],Ha={key:2},Va=r("path",{d:"M224,128v24a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V128a16,16,0,0,1,16-16H208A16,16,0,0,1,224,128ZM208,40H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40ZM152,208H136V192a8,8,0,0,0-16,0v16H104a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V224h16a8,8,0,0,0,0-16Z"},null,-1),ba=[Va],$a={key:3},Za=r("path",{d:"M208,114H48a14,14,0,0,0-14,14v24a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V128A14,14,0,0,0,208,114Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V128a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM208,42H48A14,14,0,0,0,34,56V80A14,14,0,0,0,48,94H208a14,14,0,0,0,14-14V56A14,14,0,0,0,208,42Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM158,216a6,6,0,0,1-6,6H134v18a6,6,0,0,1-12,0V222H104a6,6,0,0,1,0-12h18V192a6,6,0,0,1,12,0v18h18A6,6,0,0,1,158,216Z"},null,-1),ka=[Za],Aa={key:4},wa=r("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),Ca=[wa],Ma={key:5},_a=r("path",{d:"M208,116H48a12,12,0,0,0-12,12v24a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V128A12,12,0,0,0,208,116Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V128a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM208,44H48A12,12,0,0,0,36,56V80A12,12,0,0,0,48,92H208a12,12,0,0,0,12-12V56A12,12,0,0,0,208,44Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM156,216a4,4,0,0,1-4,4H132v20a4,4,0,0,1-8,0V220H104a4,4,0,0,1,0-8h20V192a4,4,0,0,1,8,0v20h20A4,4,0,0,1,156,216Z"},null,-1),Sa=[_a],La={name:"PhRowsPlusBottom"},C0=R({...La,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(A){const i=A,l=k("weight","regular"),S=k("size","1em"),V=k("color","currentColor"),w=k("mirrored",!1),u=g(()=>{var a;return(a=i.weight)!=null?a:l}),p=g(()=>{var a;return(a=i.size)!=null?a:S}),m=g(()=>{var a;return(a=i.color)!=null?a:V}),C=g(()=>i.mirrored!==void 0?i.mirrored?"scale(-1, 1)":void 0:w?"scale(-1, 1)":void 0);return(a,N)=>(t(),c("svg",a0({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:p.value,height:p.value,fill:m.value,transform:C.value},a.$attrs),[e0(a.$slots,"default"),u.value==="bold"?(t(),c("g",va,ma)):u.value==="duotone"?(t(),c("g",fa,ya)):u.value==="fill"?(t(),c("g",Ha,ba)):u.value==="light"?(t(),c("g",$a,ka)):u.value==="regular"?(t(),c("g",Aa,Ca)):u.value==="thin"?(t(),c("g",Ma,Sa)):_("",!0)],16,ca))}}),za=["width","height","fill","transform"],xa={key:0},Da=r("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm-12-80V80a12,12,0,0,1,24,0v52a12,12,0,0,1-24,0Zm28,40a16,16,0,1,1-16-16A16,16,0,0,1,144,172Z"},null,-1),Ba=[Da],Ia={key:1},Na=r("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),qa=r("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm-8-80V80a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,172Z"},null,-1),Ua=[Na,qa],Pa={key:2},ja=r("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm-8,56a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Zm8,104a12,12,0,1,1,12-12A12,12,0,0,1,128,184Z"},null,-1),Ea=[ja],Ta={key:3},Ra=r("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm-6-82V80a6,6,0,0,1,12,0v56a6,6,0,0,1-12,0Zm16,36a10,10,0,1,1-10-10A10,10,0,0,1,138,172Z"},null,-1),Oa=[Ra],Fa={key:4},Ka=r("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm-8-80V80a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,172Z"},null,-1),Ga=[Ka],Wa={key:5},Ja=r("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm-4-84V80a4,4,0,0,1,8,0v56a4,4,0,0,1-8,0Zm12,36a8,8,0,1,1-8-8A8,8,0,0,1,136,172Z"},null,-1),Qa=[Ja],Xa={name:"PhWarningCircle"},B0=R({...Xa,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(A){const i=A,l=k("weight","regular"),S=k("size","1em"),V=k("color","currentColor"),w=k("mirrored",!1),u=g(()=>{var a;return(a=i.weight)!=null?a:l}),p=g(()=>{var a;return(a=i.size)!=null?a:S}),m=g(()=>{var a;return(a=i.color)!=null?a:V}),C=g(()=>i.mirrored!==void 0?i.mirrored?"scale(-1, 1)":void 0:w?"scale(-1, 1)":void 0);return(a,N)=>(t(),c("svg",a0({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:p.value,height:p.value,fill:m.value,transform:C.value},a.$attrs),[e0(a.$slots,"default"),u.value==="bold"?(t(),c("g",xa,Ba)):u.value==="duotone"?(t(),c("g",Ia,Ua)):u.value==="fill"?(t(),c("g",Pa,Ea)):u.value==="light"?(t(),c("g",Ta,Oa)):u.value==="regular"?(t(),c("g",Fa,Ga)):u.value==="thin"?(t(),c("g",Wa,Qa)):_("",!0)],16,za))}}),I0=(A,i)=>i.includes(A)?{status:"error",help:"There already is a column with this name in the table"}:{status:""},Ya=R({__name:"NewColumn",props:{open:{type:Boolean},table:{}},emits:["created","cancel"],setup(A,{emit:i}){const l=A,V=g0().params.projectId,w=g(()=>{var $;return(($=l.table)==null?void 0:$.getColumns().map(v=>v.name))||[]}),u=g(()=>I0(m.value.name,w.value)),p={name:"",type:"varchar",default:"",nullable:!0,unique:!1},m=I(p),C=()=>{m.value={...p}},a=I([{value:"reference",label:"reference",isLeaf:!1},...z0.map($=>({value:$,label:$,isLeaf:!0}))]),N=$=>{if(!$)return;const v=$[$.length-1];switch($.length){case 0:return;case 1:v.loading=!0,Y.list(V).then(D=>{v.children=D.map(E=>({value:E.id,label:E.name,isLeaf:!1})),v.loading=!1});return;case 2:v.loading=!0,Y.get(V,v.value).then(D=>{v.children=D.getColumns().map(E=>({type:E.type,value:E.id,label:E.name,isLeaf:!0})),v.loading=!1});return}},y=($,v)=>{if(!!$){if($.length===1){m.value.type=$[0],m.value.foreignKey=void 0;return}if($.length===3){const D=v[v.length-1];m.value.type=D.type,m.value.foreignKey={columnId:D.value}}}},z=$=>{const v=$.selectedOptions;return v?v.length===1?v[0].label:v.length===3?`reference to ${v[1].label}(${v[2].label})`:"":"Select type"},H=I({...{status:"success",message:"",fakeLoading:!1}}),O=()=>{H.value.fakeLoading=!0,u0()};m0(()=>m.value.type,()=>{m.value.default=ae[m.value.type]||"",O()});const u0=s0.exports.debounce(async()=>{if(!m.value.default){H.value.status="success",H.value.message="",H.value.fakeLoading=!1;return}const $=`select (${m.value.default})::${m.value.type} `;Z0.executeQuery(V,$,[]).then(v=>{H.value.status=v.errors.length>0?"error":"success",H.value.message=v.errors[0]||"",H.value.fakeLoading=!1})},500);function t0(){i("cancel")}async function F(){if(!!l.table&&!(!m.value.name||!m.value.type))try{await l.table.addColumn(m.value),C(),i("created")}catch($){$ instanceof Error&&f0("Database error",$.message)}}return($,v)=>(t(),Z(e(A0),{title:"New column",width:720,open:l.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:t0},{extra:n(()=>[o(e(k0),null,{default:n(()=>[o(e(K),{onClick:t0},{default:n(()=>[j("Cancel")]),_:1}),o(e(K),{type:"primary",onClick:F},{default:n(()=>[j("Save")]),_:1})]),_:1})]),default:n(()=>[o(e($0),{model:m.value,layout:"vertical"},{default:n(()=>[o(e(P),{key:"name",label:"Name",required:"","validate-status":u.value.status,help:u.value.help},{default:n(()=>[o(e(X),{value:m.value.name,"onUpdate:value":v[0]||(v[0]=D=>m.value.name=D)},null,8,["value"])]),_:1},8,["validate-status","help"]),o(e(P),{key:"type",label:"Type",required:""},{default:n(()=>[o(e(D0),{options:a.value,"load-data":N,"display-render":z,"allow-clear":!1,onChange:y},null,8,["options"])]),_:1}),o(e(P),{key:"default-value",label:"Default value","validate-status":H.value.status,help:H.value.message},{default:n(()=>[o(e(X),{value:m.value.default,"onUpdate:value":v[1]||(v[1]=D=>m.value.default=D),onInput:O},{suffix:n(()=>[H.value.fakeLoading?(t(),Z(e(M0),{key:0})):_("",!0),!H.value.fakeLoading&&H.value.status==="success"?(t(),Z(e(x0),{key:1,size:"18"})):_("",!0),!H.value.fakeLoading&&H.value.status==="error"?(t(),Z(e(B0),{key:2,size:"18"})):_("",!0)]),_:1},8,["value"])]),_:1},8,["validate-status","help"]),o(e(P),{key:"nullable",label:"Nullable"},{default:n(()=>[o(e(i0),{checked:m.value.nullable,"onUpdate:checked":v[2]||(v[2]=D=>m.value.nullable=D)},null,8,["checked"])]),_:1}),o(e(P),{key:"unique",label:"Unique"},{default:n(()=>[o(e(i0),{checked:m.value.unique,"onUpdate:checked":v[3]||(v[3]=D=>m.value.unique=D)},null,8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]))}}),et={class:"twin-container"},at={class:"fullwidth-input"},tt={class:"fullwidth-input"},lt={class:"using-container"},nt={class:"fullwidth-input"},ot=R({__name:"UpdateColumn",props:{open:{type:Boolean},table:{},column:{}},emits:["updated","cancel"],setup(A,{emit:i}){const l=A,V=g0().params.projectId,w=I(l.column.type);j0(async()=>{if(!l.column.foreignKey)return;w.value="loading...";const s=await Y.fromColumnId(V,l.column.foreignKey.columnId),d=s.getColumn(l.column.foreignKey.columnId);w.value=`reference to ${s.name}(${d.name})`});const u=g(()=>{var s;return((s=l.table)==null?void 0:s.getColumns().map(d=>d.record.initialState.name))||[]}),p=g(()=>l.column.name===l.column.record.initialState.name?{status:"",help:""}:I0(l.column.name,u.value)),{result:m,loading:C}=b0(async()=>l.table.select({},10,0).then(({total:s})=>s));function a(){l.column.record.resetChanges(),i("cancel")}const y=I({status:"success",message:"",fakeLoading:!1}),z=()=>{y.value.fakeLoading=!0,W()},W=s0.exports.debounce(async()=>{if(!l.column.default){y.value.status="success",y.value.message="",y.value.fakeLoading=!1;return}const s=`select (${l.column.default})::${l.column.type} `,d=await Z0.executeQuery(V,s,[]);y.value.status=d.errors.length>0?"error":"success",y.value.message=d.errors[0]||"",y.value.fakeLoading=!1},500),H=I([{value:"reference",label:"reference",isLeaf:!1},...z0.filter(s=>s!==l.column.type).map(s=>({value:s,label:s,isLeaf:!0}))]),O=s=>{if(!s)return;const d=s[s.length-1];switch(s.length){case 0:return;case 1:d.loading=!0,Y.list(V).then(M=>{d.children=M.map(Q=>({value:Q.id,label:Q.name,isLeaf:!1})),d.loading=!1});return;case 2:d.loading=!0,Y.get(V,d.value).then(M=>{d.children=M.getColumns().map(Q=>({type:Q.type,value:Q.id,label:Q.name,isLeaf:!0})),d.loading=!1});return}},d0=s=>{const d=s.selectedOptions;return d?d.length===1?d[0].label:d.length===3?`reference to ${d[1].label}(${d[2].label})`:"":"Select type"},u0=(s,d)=>{if(!!s){if(s.length===1){l.column.type=s[0],l.column.foreignKey=null;return}if(s.length===3){if(l.column.foreignKey&&l.column.foreignKey.columnId===s[2])return;const M=d[d.length-1];l.column.type=M.type,l.column.foreignKey={columnId:M.value}}}};async function t0(s){await le("Are you sure you want to delete this column and all its data?")&&await F(s)}async function F(s){var d,M;await((M=(d=l.table)==null?void 0:d.getColumn(s))==null?void 0:M.delete()),i("updated")}const $=()=>m.value===0||C.value?!1:l.column.record.hasChangesDeep("type"),v=I({type:"default"}),D=()=>{l.column.type=l.column.record.initialState.type,v.value={type:"default"}};function E(s,d){return d==="varchar"||s==="int"&&d==="boolean"||s==="boolean"&&d==="int"}m0(()=>l.column.type,()=>{z(),c0.value||(v.value={type:"user-defined",using:J.value,mandatory:!0})});const c0=g(()=>v.value.type==="default"&&E(l.column.record.initialState.type,l.column.type)),G=g(()=>!E(l.column.record.initialState.type,l.column.type));function y0(s){s?v.value={type:"default"}:v.value={type:"user-defined",using:J.value,mandatory:!1}}function H0(s){if(v.value.type==="default")throw new Error("Can't change using when using default casting");v.value.using=s!=null?s:""}const v0=()=>G.value?!0:$()&&v.value.type==="user-defined",J=g(()=>`${l.column.record.initialState.name}::${l.column.type}`);async function L(){if(!l.column)return;let s=v.value.type==="default"?J.value:v.value.using;m.value===0&&(s=`${l.column.name}::text::${l.column.type}`);try{await l.column.update(s),i("updated")}catch(d){d instanceof Error&&f0("Database error",d.message)}}return(s,d)=>(t(),Z(e(A0),{title:"Edit column",width:720,open:s.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:a},{extra:n(()=>[o(e(k0),null,{default:n(()=>[o(e(K),{onClick:a},{default:n(()=>[j("Cancel")]),_:1}),o(e(K),{type:"primary",onClick:L},{default:n(()=>[j("Save")]),_:1})]),_:1})]),footer:n(()=>[o(l0,{danger:"",onClick:d[7]||(d[7]=M=>t0(String(s.column.id)))},{default:n(()=>[j("Delete")]),_:1})]),default:n(()=>[o(e($0),{model:s.column,layout:"vertical"},{default:n(()=>[o(e(P),{key:"name",label:"Name","validate-status":p.value.status,help:p.value.help},{default:n(()=>[o(e(X),{value:s.column.name,"onUpdate:value":d[0]||(d[0]=M=>s.column.name=M)},null,8,["value"])]),_:1},8,["validate-status","help"]),r("div",et,[r("span",at,[o(e(P),{key:"type",label:"Current Type"},{default:n(()=>[o(e(E0),{value:w.value,"onUpdate:value":d[1]||(d[1]=M=>w.value=M),"default-active-first-option":"",disabled:""},null,8,["value"])]),_:1})]),o(e(ne),{class:"right-arrow"}),r("span",tt,[o(e(P),{key:"new-type",label:"New Type"},{default:n(()=>[o(e(D0),{options:H.value,"load-data":O,"display-render":d0,"allow-clear":!0,onClear:D,onChange:u0},null,8,["options"])]),_:1})])]),o(e(P),{key:"default-value",label:"Default value","validate-status":y.value.status,help:y.value.message},{default:n(()=>[o(e(X),{value:s.column.default,"onUpdate:value":d[2]||(d[2]=M=>s.column.default=M),onInput:z},{suffix:n(()=>[y.value.fakeLoading?(t(),Z(e(M0),{key:0,size:"small"})):_("",!0),!y.value.fakeLoading&&y.value.status==="success"?(t(),Z(e(x0),{key:1,size:18})):_("",!0),!y.value.fakeLoading&&y.value.status==="error"?(t(),Z(e(B0),{key:2,size:18})):_("",!0)]),_:1},8,["value"])]),_:1},8,["validate-status","help"]),r("div",lt,[$()?(t(),Z(e(P),{key:"default-casting",label:"Use default casting"},{default:n(()=>[o(e(i0),{checked:c0.value,disabled:G.value,"onUpdate:checked":d[3]||(d[3]=M=>y0(!!M))},null,8,["checked","disabled"])]),_:1})):_("",!0),r("span",nt,[$()?(t(),Z(e(P),{key:"using",label:"Using"},{default:n(()=>[o(e(X),{value:v.value.type==="user-defined"?v.value.using:J.value,disabled:!v0(),onInput:d[4]||(d[4]=M=>H0(M.target.value))},null,8,["value","disabled"])]),_:1})):_("",!0)])]),o(e(n0),null,{default:n(()=>[o(e(P),{key:"nullable",label:"Nullable"},{default:n(()=>[o(e(i0),{checked:s.column.nullable,"onUpdate:checked":d[5]||(d[5]=M=>s.column.nullable=M)},null,8,["checked"])]),_:1}),o(e(P),{key:"unique",label:"Unique"},{default:n(()=>[o(e(i0),{checked:s.column.unique,"onUpdate:checked":d[6]||(d[6]=M=>s.column.unique=M)},null,8,["checked"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]))}});const ut=T0(ot,[["__scopeId","data-v-65e775ee"]]),rt={style:{overflow:"hidden","white-space":"wrap"}},st={key:1},it={class:"button-container"},dt={class:"button-container"},ct={class:"button-container"},vt={class:"button-container"},pt=R({__name:"TableData",props:{table:{},loading:{type:Boolean}},emits:["refresh"],setup(A,{emit:i}){var w0;const l=A,S=I(1),V=I(10),w=g(()=>{var f,b;return{total:(b=(f=F.value)==null?void 0:f.total)!=null?b:0,current:S.value,pageSize:V.value,totalBoundaryShowSizeChanger:10,showSizeChanger:!0,pageSizeOptions:["10","25","50","100"],onChange:async(x,h)=>{S.value=x,V.value=h,await v()}}}),u=I([]),p=g0(),m=_0(),C=I(typeof p.query.q=="string"?p.query.q:""),a=g(()=>{try{return JSON.parse(p.query.where)}catch{return{}}});m0(C,()=>{m.replace({query:{...p.query,where:JSON.stringify(p.query.value),q:C.value}})});const N=I(!1),y=I({type:"idle"}),z=()=>{N.value=!0,W()},W=s0.exports.debounce(()=>{v(),N.value=!1},500);function H(){y.value={type:"idle"}}async function O(){H(),i("refresh")}m0(()=>l.table,()=>{y0(),v()});function d0(){y.value={type:"creating"}}const u0=f=>{if(!l.table)throw new Error("Table not found");y.value={type:"editing",column:l.table.getColumn(f)}},t0=g(()=>{var f;return((f=F.value)==null?void 0:f.rows.length)===1}),{result:F,loading:$,refetch:v}=b0(()=>Promise.all([l.table.select(a.value,(S.value-1)*V.value,V.value,C.value),Promise.all(l.table.getColumns().filter(f=>f.foreignKey).map(f=>Y.fromColumnId(p.params.projectId,f.foreignKey.columnId).then(b=>[f.name,b])))]).then(([{rows:f,total:b},x])=>({rows:f,total:b,columns:x.reduce((h,[q,U])=>({...h,[q]:U}),{})}))),D=(f,b)=>{var U,B;const x=(U=l.table)==null?void 0:U.getColumns().find(T=>T.name===f);if(!x)return"";const h=(B=F.value)==null?void 0:B.columns[x.name],q=h==null?void 0:h.getColumns().find(T=>{var p0;return T.id===((p0=x.foreignKey)==null?void 0:p0.columnId)});return!h||!q?"":{name:"tableEditor",params:{projectId:p.params.projectId,tableId:h.id},query:{where:JSON.stringify({[q.name]:b})}}},E=(f,b)=>x=>{if(f==="json"&&x==""){L.value[b]="null";return}L.value[b]=x},h0=()=>[...l.table.getColumns().map(f=>{var b;return{key:(b=f.id)!=null?b:"",title:f.name,dataIndex:f.name,width:220,resizable:!0,ellipsis:!1}}),{key:"action",title:"",fixed:"right",width:100,align:"center",resizable:!1,ellipsis:!1}],c0=h0(),G=I(c0),y0=()=>G.value=h0();function H0(f,b){G.value=G.value.map(x=>x.key===b.key?{...x,width:f}:x)}const v0=g(()=>{var f;return((f=F.value)==null?void 0:f.rows.map(b=>({key:b.id,...b})))||[]}),J=I(!1),L=I({}),s=()=>{J.value=!0},d=()=>{L.value={},J.value=!1};let M=R0((w0=l.table)==null?void 0:w0.getUnprotectedColumns().reduce((f,b)=>({...f,[b.name]:""}),{}));async function Q(){if(!(!l.table||!M))try{L.value.id?await l.table.updateRow(L.value.id,L.value):await l.table.insertRow(L.value),L.value={},v(),d()}catch(f){f instanceof Error&&f0("Database error",f.message)}}const N0=async f=>{if(!(!F.value||!F.value.rows.find(b=>b.id===f)))try{await l.table.deleteRow(f),t0.value&&(S.value=Math.max(1,S.value-1)),v()}catch(b){b instanceof Error&&f0("Database error",b.message)}},q0=f=>{var U;const b=(U=v0.value)==null?void 0:U.filter(B=>f===B.key)[0],x=l.table.getColumns(),h=x.map(B=>B.name),q=x.filter(B=>B.type==="json").map(B=>B.name);L.value=s0.exports.pick(s0.exports.cloneDeep(b),h),q.forEach(B=>{L.value[B]&&(L.value[B]=JSON.stringify(L.value[B]))}),s()};return(f,b)=>{const x=S0("RouterLink");return t(),Z(te,{"full-width":""},{default:n(()=>[o(e(n0),{justify:"space-between",style:{"margin-bottom":"16px"},gap:"middle"},{default:n(()=>[o(e(X),{value:C.value,"onUpdate:value":[b[0]||(b[0]=h=>C.value=h),z],placeholder:"Search",style:{width:"400px"},"allow-clear":""},{prefix:n(()=>[o(e(O0))]),suffix:n(()=>[N.value?(t(),Z(e(oe),{key:0})):_("",!0)]),_:1},8,["value"]),o(e(n0),{justify:"flex-end",gap:"middle"},{default:n(()=>[o(l0,{type:"primary",onClick:d0},{default:n(()=>[o(e(Se)),j("Create column ")]),_:1}),G.value.length===3?(t(),Z(e(r0),{key:0,title:"Create your first column before adding data"},{default:n(()=>[o(l0,{disabled:!0,onClick:s},{default:n(()=>[o(e(C0)),j("Add data ")]),_:1})]),_:1})):(t(),Z(l0,{key:1,onClick:s},{default:n(()=>[o(e(C0)),j("Add data ")]),_:1}))]),_:1})]),_:1}),o(e(W0),{columns:G.value,"data-source":v0.value,pagination:w.value,bordered:"",loading:e($)||f.loading,scroll:{x:1e3,y:720},size:"small",onResizeColumn:H0},{headerCell:n(({column:h})=>[h.title!=="id"&&h.title!=="created_at"&&h.key!=="action"?(t(),Z(e(n0),{key:0,align:"center",justify:"space-between",gap:"small"},{default:n(()=>[r("span",rt,o0(h.title),1),o(l0,{type:"text",onClick:q=>u0(String(h.key))},{default:n(()=>[o(e(U0),{size:"18"})]),_:2},1032,["onClick"])]),_:2},1024)):(t(),c("span",st,o0(h.title),1))]),bodyCell:n(({column:h,text:q,record:U})=>{var B;return[G.value.map(T=>T.title).includes(h.dataIndex)?(t(),c(V0,{key:0},[(B=f.table.getColumns().find(T=>T.name===h.dataIndex))!=null&&B.foreignKey?(t(),Z(x,{key:0,to:D(h.dataIndex,q),target:"_blank"},{default:n(()=>[j(o0(q),1)]),_:2},1032,["to"])):(t(),c("div",{key:1,class:F0(["table-row",{expanded:u.value.includes(U.id)}])},o0(q),3))],64)):_("",!0),h.key==="action"?(t(),Z(e(n0),{key:1,gap:"small",justify:"center"},{default:n(()=>[u.value.includes(U.id)?(t(),Z(e(K),{key:0,class:"icons",onClick:T=>u.value=u.value.filter(p0=>p0!==U.id)},{icon:n(()=>[o(e(r0),{title:"Collapse"},{default:n(()=>[r("div",it,[o(e(Xe),{size:15})])]),_:1})]),_:2},1032,["onClick"])):(t(),Z(e(K),{key:1,onClick:T=>u.value.push(U.id)},{icon:n(()=>[o(e(r0),{title:"Expand"},{default:n(()=>[r("div",dt,[o(e(V1),{size:15})])]),_:1})]),_:2},1032,["onClick"])),o(e(K),{onClick:T=>q0(U.id)},{icon:n(()=>[o(e(r0),{title:"Edit"},{default:n(()=>[r("div",ct,[o(e(da),{size:15})])]),_:1})]),_:2},1032,["onClick"]),o(e(K0),{title:"Sure to delete?",onConfirm:T=>N0(U.id)},{default:n(()=>[o(e(K),null,{icon:n(()=>[o(e(r0),{title:"Delete"},{default:n(()=>[r("div",vt,[o(e(G0),{size:15})])]),_:1})]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)):_("",!0)]}),_:1},8,["columns","data-source","pagination","loading"]),o(e(A0),{title:"Data",width:720,open:J.value,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:d},{extra:n(()=>[o(e(k0),null,{default:n(()=>[o(e(K),{onClick:d},{default:n(()=>[j("Cancel")]),_:1}),o(e(K),{type:"primary",onClick:Q},{default:n(()=>[j("Save")]),_:1})]),_:1})]),default:n(()=>[o(e($0),{model:L.value,layout:"vertical"},{default:n(()=>[(t(!0),c(V0,null,L0(f.table.getUnprotectedColumns(),h=>(t(),Z(e(P),{key:h.id,label:h.name,required:!h.nullable},{default:n(()=>[L.value?(t(),Z(e(X),{key:0,placeholder:h.type,value:L.value[h.name],disabled:L.value[h.name]===null,"onUpdate:value":q=>E(h.type,h.name)(q)},J0({_:2},[h.nullable?{name:"addonAfter",fn:n(()=>[o(e(Q0),{checked:L.value[h.name]===null,"onUpdate:checked":q=>L.value[h.name]=q?null:""},{default:n(()=>[j(" NULL ")]),_:2},1032,["checked","onUpdate:checked"])]),key:"0"}:void 0]),1032,["placeholder","value","disabled","onUpdate:value"])):_("",!0)]),_:2},1032,["label","required"]))),128))]),_:1},8,["model"])]),_:1},8,["open"]),f.table&&y.value.type==="creating"?(t(),Z(Ya,{key:0,open:"",table:l.table,onClose:H,onCancel:H,onCreated:O},null,8,["table"])):_("",!0),f.table&&y.value.type==="editing"?(t(),Z(ut,{key:1,column:y.value.column,open:"",table:f.table,onUpdated:O,onClose:H,onCancel:H},null,8,["column","table"])):_("",!0)]),_:1})}}});const mt={style:{"font-size":"16px"}},qt=R({__name:"TableEditor",setup(A){const i=_0(),l=g0(),S=l.params.tableId,V=l.params.projectId,w=I(!1),u=()=>{var y;w.value=!1,(y=p.value)==null||y.table.save(),C()},{result:p,loading:m,refetch:C}=b0(()=>Promise.all([Z0.get(V).then(async y=>{const z=await ee.get(y.organizationId);return{project:y,organization:z}}),Y.get(V,S)]).then(([{project:y,organization:z},W])=>X0({project:y,organization:z,table:W}))),a=g(()=>!m.value&&p.value?[{label:"My organizations",path:"/organizations"},{label:p.value.organization.name,path:`/organizations/${p.value.organization.id}`},{label:p.value.project.name,path:`/projects/${p.value.project.id}/tables`}]:void 0);function N(){i.push({name:"tables",params:{projectId:V}})}return(y,z)=>{const W=S0("RouterLink");return t(),Z(P0,null,{navbar:n(()=>[o(e(se),{style:{padding:"5px 25px"},onBack:N},{title:n(()=>[o(e(n0),{align:"center",gap:"small"},{default:n(()=>{var H;return[r("span",mt,o0((H=e(p))==null?void 0:H.table.name),1),o(l0,{type:"text",onClick:z[0]||(z[0]=O=>w.value=!0)},{default:n(()=>[o(e(E1),{size:"16"})]),_:1})]}),_:1}),o(e(Y0),{title:"Change table name",open:w.value,onCancel:z[2]||(z[2]=H=>w.value=!1),onOk:u},{default:n(()=>[e(p)?(t(),Z(e(X),{key:0,value:e(p).table.name,"onUpdate:value":z[1]||(z[1]=H=>e(p).table.name=H)},null,8,["value"])):_("",!0)]),_:1},8,["open"])]),subTitle:n(()=>[a.value?(t(),Z(e(ue),{key:0,style:{margin:"0px 20px"}},{default:n(()=>[(t(!0),c(V0,null,L0(a.value,(H,O)=>(t(),Z(e(re),{key:O},{default:n(()=>[o(W,{to:H.path},{default:n(()=>[j(o0(H.label),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})):_("",!0)]),_:1})]),content:n(()=>[e(p)?(t(),Z(pt,{key:0,loading:e(m),table:e(p).table,onRefresh:z[3]||(z[3]=H=>e(C)())},null,8,["loading","table"])):_("",!0)]),_:1})}}});export{qt as default};
//# sourceMappingURL=TableEditor.599b5ee8.js.map
