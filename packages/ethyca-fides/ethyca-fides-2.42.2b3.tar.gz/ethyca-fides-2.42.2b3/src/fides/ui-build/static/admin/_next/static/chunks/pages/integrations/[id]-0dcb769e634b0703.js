(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1500],{50697:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/integrations/[id]",function(){return n(34634)}])},37344:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(24246),a=n(17749),o=n(19785),s=n.n(o),l=n(27378),r=n(79894),c=n.n(r),d=e=>{let{breadcrumbs:t}=e;return(0,i.jsx)(a.aGc,{separator:"->",fontSize:"2xl",fontWeight:"semibold","data-testid":"breadcrumbs",children:t.map((e,n)=>{let o=n+1===t.length,s=!!e.link||!!e.onClick;return(0,i.jsx)(a.gN6,{color:o||e.isOpaque?"black":"gray.500",children:s?(0,i.jsx)(a.Atw,{as:c(),href:e.link,isCurrentPage:o,children:e.title}):(0,i.jsx)(a.Atw,{_hover:{textDecoration:"none",cursor:"default"},isCurrentPage:o,children:e.title})},e.title)})})},u=e=>{let{breadcrumbs:t,isSticky:n=!0,children:o,...r}=e;return(0,i.jsxs)(a.xuv,{bgColor:"white",paddingY:5,...n?{position:"sticky",top:0,left:0,zIndex:10}:{},...r,children:[s()(t)&&(0,i.jsx)(a.xuv,{marginBottom:o?4:0,children:(0,i.jsx)(d,{breadcrumbs:t})}),(0,l.isValidElement)(t)&&t,o]})}},70218:function(e,t,n){"use strict";n.d(t,{Od:function(){return o},QZ:function(){return a}});var i=n(27378);let a=e=>{let{items:t,selected:n,onChange:i}=e,a=t.every(e=>n.includes(e.id))&&!!t.length;return{allSelected:a,someSelected:t.some(e=>n.includes(e.id))&&!!t.length,handleToggleAll:()=>{a?i([]):i(t.map(e=>e.id))},handleToggleSelection:e=>{n.includes(e)?i(n.filter(t=>t!==e)):i([...n,e])}}},o=e=>{let{initialSelected:t,initialExcluded:n,initialAllSelected:a,itemCount:o}=e,[s,l]=(0,i.useState)(t),[r,c]=(0,i.useState)(n),[d,u]=(0,i.useState)(a||s.length===o),x=!!s.length||!!r.length;return{selected:s,excluded:r,allSelected:d,someSelected:x,handleToggleAll:()=>{d?(c([]),r.length||u(!1)):(l([]),u(!0))},handleToggleItemSelected:e=>{if(d)c(r.includes(e)?r.filter(t=>t!==e):[...r,e]);else{let t=s.includes(e)?s.filter(t=>t!==e):[...s,e];l(t),t.length===o&&u(!0)}}}}},35682:function(e,t,n){"use strict";var i=n(24246),a=n(17749);t.Z=e=>{let{title:t,icon:n,onClick:o,disabled:s,variant:l="outline",colorScheme:r}=e;return(0,i.jsxs)(a.zxk,{size:"xs",onClick:o,isDisabled:s,variant:l,colorScheme:r,"data-testid":"action-".concat(t),children:[n,(0,i.jsx)(a.xvT,{marginLeft:n&&1,fontWeight:"semibold",fontSize:12,children:t})]})}},34634:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var i=n(24246),a=n(17749),o=n(86677),s=n(36848),l=n(43124),r=n(11032),c=n(37344),d=n(84421),u=n(38683),x=n(3699),g=n(92222),m=n(59003),h=n(27378),j=n(58665);let f=(0,a.IUT)({displayName:"MonitorIcon",viewBox:"0 0 12 12",path:(0,i.jsx)("path",{d:"M1.33333 2.21875C1.15 2.21875 1 2.37344 1 2.5625V5.65625H3.66667C3.84167 5.65625 4.00417 5.75078 4.09583 5.90762L4.62708 6.8207L5.88542 4.22324C5.96667 4.05566 6.13125 3.94609 6.3125 3.93965C6.49375 3.9332 6.66667 4.02773 6.76042 4.18887L7.61458 5.65625H8.83333C9.11042 5.65625 9.33333 5.88613 9.33333 6.17188C9.33333 6.45762 9.11042 6.6875 8.83333 6.6875H7.33333C7.15833 6.6875 6.99583 6.59297 6.90417 6.43613L6.37292 5.52305L5.11458 8.12051C5.03333 8.28809 4.86875 8.39766 4.6875 8.4041C4.50625 8.41055 4.33333 8.31602 4.23958 8.15488L3.38542 6.6875H1V9.4375C1 9.62656 1.15 9.78125 1.33333 9.78125H10.6667C10.85 9.78125 11 9.62656 11 9.4375V2.5625C11 2.37344 10.85 2.21875 10.6667 2.21875H1.33333ZM0 2.5625C0 1.8041 0.597917 1.1875 1.33333 1.1875H10.6667C11.4021 1.1875 12 1.8041 12 2.5625V9.4375C12 10.1959 11.4021 10.8125 10.6667 10.8125H1.33333C0.597917 10.8125 0 10.1959 0 9.4375V2.5625Z",fill:"currentColor"})});var b=n(52850),p=n(98320),v=n(6111),C=n(60136),y=e=>{let{defaultSuccessMsg:t,defaultErrorMsg:n}=e,i=(0,a.pmc)();return{toastResult:e=>{(0,C.D4)(e)?i({status:"error",description:(0,C.e$)(e.error,n)}):i({status:"success",description:t})}}},_=n(91382),k=n(70218),S=n(39514);let w=(0,g.Cl)();var z=e=>{let{items:t,totalItemCount:n,selected:o,excluded:s,allSelected:l,someSelected:r,moreLoading:c,handleToggleSelection:d,handleToggleAll:u,onMoreClick:x}=e,f=t.map(e=>({id:e,isSelected:o.includes(e),isExcluded:s.includes(e)})),p=(0,h.useMemo)(()=>[w.display({id:"select",cell:e=>{let{row:t}=e;return(0,i.jsx)(b.k,{isChecked:t.original.isSelected||l&&!t.original.isExcluded,onChange:()=>d(t.original.id),dataTestId:"".concat(t.original.id,"-checkbox")})},header:()=>(0,i.jsx)(b.k,{isChecked:l,isIndeterminate:r,onChange:u,dataTestId:"select-all-checkbox"}),size:1}),w.accessor(e=>e.id,{id:"id",cell:e=>(0,i.jsx)(b.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(b.Rr,{value:"Scope",...e})})],[d,u,l,r]),v=(0,m.b7)({getCoreRowModel:(0,g.sC)(),getRowId:e=>e.id,manualPagination:!0,data:f,columns:p});return(0,i.jsx)(a.kCb,{w:"full",direction:"column",maxH:"lg",children:(0,i.jsx)(b.ZK,{tableInstance:v,onRowClick:e=>d(e.id),footer:!!x&&(0,i.jsx)(b.vr,{totalColumns:2,children:(0,i.jsx)(a.kCb,{justify:"center",children:c?(0,i.jsx)(j.Z,{size:"xs"}):(0,i.jsxs)(a.kCb,{align:"center",children:[(0,i.jsxs)(a.xvT,{fontSize:"xs",mr:4,children:["Showing ",t.length," of ",n]}),(0,i.jsx)(a.zxk,{onClick:x,variant:"outline",size:"xs","data-testid":"load-more-btn",children:"Load more..."})]})})})})})};let E={items:[],total:1,page:1,size:50,pages:0};var A=e=>{let[t,n]=(0,h.useState)(2),{data:i,isLoading:a}=(0,v.QW)({page:1,size:25,connection_config_key:e}),{items:o,total:s}=null!=i?i:E,l=!!(null==i?void 0:i.pages)&&t>i.pages,[r,c]=(0,h.useState)(o),[d,{isLoading:u,isFetching:x}]=(0,v.Ym)(),g=async()=>{var i,a;if(l)return;let o=await d({connection_config_key:e,size:25,page:t+1});o.isError||(n(t+1),c([...r,...null!==(a=null===(i=o.data)||void 0===i?void 0:i.items)&&void 0!==a?a:[]]))};return{databases:r,totalDatabases:s,fetchMore:g,isLoading:u||x||a,reachedEnd:l}},R=e=>{var t;let{monitor:n,isEditing:o,isSubmitting:s,integrationKey:l,onSubmit:r,onClose:c}=e,{databases:d,totalDatabases:u,fetchMore:x,reachedEnd:g,isLoading:m}=A(l),h=null!==(t=null==n?void 0:n.databases)&&void 0!==t?t:[],{selected:j,excluded:f,allSelected:b,someSelected:p,handleToggleItemSelected:v,handleToggleAll:C}=(0,k.Od)({initialSelected:h,initialExcluded:[],initialAllSelected:o&&!h.length,itemCount:u}),y=!b&&0===j.length;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.kCb,{p:4,direction:"column",children:[(0,i.jsxs)(a.kCb,{direction:"row",mb:4,gap:1,align:"center",children:[(0,i.jsx)(a.xvT,{fontSize:"sm",children:"Select projects to monitor"}),(0,i.jsx)(S.Z,{label:"Selecting a project will monitor all current and future datasets within that project."})]}),(0,i.jsx)(z,{items:d,totalItemCount:u,selected:j,excluded:f,allSelected:b,someSelected:p,moreLoading:m,handleToggleSelection:v,handleToggleAll:C,onMoreClick:g?void 0:x})]}),(0,i.jsxs)(a.hE2,{size:"sm",w:"full",justifyContent:"space-between",mt:4,children:[(0,i.jsx)(a.zxk,{onClick:c,variant:"outline",children:"Cancel"}),(0,i.jsx)(a.ua7,{label:"Select one or more projects to save",isDisabled:!y,children:(0,i.jsx)(a.zxk,{onClick:()=>{r({...n,excluded_databases:f,databases:b?[]:j})},isLoading:s,variant:"primary","data-testid":"save-btn",isDisabled:y,children:"Save"})})]})]})},Z=n(73809),D=n(87941),M=n(34090),L=n(16310),T=n(34803),O=n(51394),q=e=>{var t,n;let{monitor:s,integrationOption:l,isSubmitting:r,databasesAvailable:c,onClose:d,onAdvance:u,onSubmit:x}=e,g=!!s,{query:m}=(0,o.useRouter)(),h=Array.isArray(m.id)?m.id[0]:m.id,j=L.Ry().shape({name:L.Z_().required().label("Name"),execution_frequency:L.Z_().nullable().label("Execution frequency"),execution_start_date:L.hT().nullable().label("Execution start date")}),f=(null==s?void 0:s.execution_start_date)?(0,Z.Z)(s.execution_start_date):Date.now(),b={name:null!==(t=null==s?void 0:s.name)&&void 0!==t?t:"",execution_start_date:(0,D.Z)(f,"yyyy-MM-dd'T'HH:mm"),execution_frequency:null!==(n=null==s?void 0:s.execution_frequency)&&void 0!==n?n:O.hV.MONTHLY},p=(0,C.MM)(O.hV);return(0,i.jsx)(M.J9,{initialValues:b,enableReinitialize:!0,onSubmit:e=>{let t=e.execution_frequency!==O.hV.NOT_SCHEDULED?{execution_frequency:e.execution_frequency,execution_start_date:new Date(e.execution_start_date).toISOString()}:{execution_frequency:O.hV.NOT_SCHEDULED,execution_start_date:void 0},n=g?{...s,...t,name:e.name}:{...t,name:e.name,connection_config_key:h,classify_params:{num_samples:25,num_threads:1}};l.identifier===O.Rj.DYNAMODB&&(n.datasource_params={single_dataset:!1}),c?u(n):x(n)},validationSchema:j,children:e=>{let{values:t,isValid:n,resetForm:o}=e;return(0,i.jsx)(M.l0,{children:(0,i.jsxs)(a.gCW,{alignItems:"start",spacing:6,mt:4,children:[(0,i.jsx)(T.j0,{name:"name",id:"name",label:"Name",isRequired:!0,variant:"stacked"}),(0,i.jsx)(T.AP,{name:"execution_frequency",id:"execution_frequency",tooltip:"Interval to run the monitor automatically after the start date",options:p,label:"Automatic execution frequency",variant:"stacked"}),(0,i.jsx)(T.YL,{name:"execution_start_date",label:"Automatic execution start time",disabled:t.execution_frequency===O.hV.NOT_SCHEDULED,id:"execution_start_date"}),(0,i.jsxs)(a.hE2,{size:"sm",w:"full",justifyContent:"space-between",children:[(0,i.jsx)(a.zxk,{variant:"outline",onClick:()=>{o(),d()},children:"Cancel"}),(0,i.jsx)(a.zxk,{type:"submit",variant:"primary",isDisabled:!n,isLoading:r,"data-testid":"next-btn",children:c?"Next":"Save"})]})]})})}})},N=n(43073),I=e=>{let{isOpen:t,onClose:n,formStep:a,onAdvance:o,monitor:s,isEditing:l,integration:r,integrationOption:c}=e,[d,{isLoading:u}]=(0,v.Fy)(),{data:x}=(0,v.QW)({page:1,size:25,connection_config_key:r.key}),g=!!x&&!!x.total,{toastResult:m}=y({defaultSuccessMsg:"Monitor ".concat(l?"updated":"created"," successfully"),defaultErrorMsg:"A problem occurred while ".concat(l?"updating":"creating"," this monitor")}),h=async e=>{let t=await d(e);m(t),(0,N.D4)(t)||n()};return(0,i.jsxs)(_.Z,{title:(null==s?void 0:s.name)?"Configure ".concat(s.name):"Configure discovery monitor",isOpen:t,onClose:n,children:[0===a&&(0,i.jsx)(q,{monitor:s,onClose:n,onAdvance:o,onSubmit:h,isSubmitting:u,databasesAvailable:g,integrationOption:c}),1===a&&(s?(0,i.jsx)(R,{monitor:s,isEditing:l,isSubmitting:u,onSubmit:h,onClose:n,integrationKey:r.key}):(0,i.jsx)(j.Z,{}))]})},V=n(77650),P=n(35682),H=e=>{let{monitorId:t,onEditClick:n}=e,[o]=(0,v.Sb)(),{toastResult:s}=y({defaultErrorMsg:"A problem occurred deleting this monitor",defaultSuccessMsg:"Monitor deleted successfully"}),[l]=(0,v.V9)(),{toastResult:r}=y({defaultErrorMsg:"A problem occurred initiating monitor execution",defaultSuccessMsg:"Monitor execution successfully started"}),c=async()=>{s(await o({monitor_config_id:t}))},{isOpen:d,onOpen:u,onClose:x}=(0,a.qY0)(),g=async()=>{r(await l({monitor_config_id:t}))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V.Z,{isOpen:d,onClose:x,onConfirm:c,title:"Delete monitor",message:"Are you sure you want to delete this discovery monitor?",continueButtonText:"Delete",isCentered:!0}),(0,i.jsxs)(a.hE2,{variant:"outline",size:"xs",children:[(0,i.jsx)(a.ua7,{label:"Edit",children:(0,i.jsx)(a.hU,{onClick:n,icon:(0,i.jsx)(a.dY8,{}),"data-testid":"edit-monitor-btn","aria-label":"Edit monitor"})}),(0,i.jsx)(a.ua7,{label:"Delete",children:(0,i.jsx)(a.hU,{onClick:u,icon:(0,i.jsx)(a.pJl,{}),"aria-label":"Delete monitor","data-testid":"delete-monitor-btn"})}),(0,i.jsx)(P.Z,{onClick:g,title:"Scan"})]})]})};let W=e=>{let{row:t,getValue:n}=e,[a]=(0,v.Fy)(),o=async e=>a({...t.original,enabled:e}),s=n();return(0,i.jsx)(p.S1,{enabled:s,onToggle:o,title:"Disabling monitor",message:"You are about to disable this monitor. If you continue, it will no longer scan automatically."})},Y={items:[],total:0,page:1,size:50,pages:0},F=(0,g.Cl)(),G=e=>{let{onAddClick:t}=e;return(0,i.jsx)(a.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",children:(0,i.jsxs)(a.gCW,{children:[(0,i.jsx)(a.xvT,{fontSize:"md",fontWeight:"600",children:"No monitors"}),(0,i.jsx)(a.xvT,{fontSize:"sm",children:'You have not configured any data discovery monitors. Click "Add monitor" to configure data discovery now.'}),(0,i.jsx)(a.zxk,{onClick:t,colorScheme:"primary",children:"Add monitor"})]})})};var U=e=>{let{integration:t,integrationOption:n}=e,{PAGE_SIZES:o,pageSize:s,setPageSize:l,onPreviousPageClick:r,isPreviousPageDisabled:c,onNextPageClick:d,isNextPageDisabled:u,startRange:x,endRange:C,pageIndex:y,setTotalPages:_}=(0,b.oi)(),{isLoading:k,isFetching:S,data:w}=(0,v.Fu)({page:y,size:s,connection_config_key:t.key}),z=(0,a.qY0)(),[E,A]=(0,h.useState)(void 0),[R,Z]=(0,h.useState)(!1),[D,M]=(0,h.useState)(0),L=e=>{A(e),Z(!0),z.onOpen()},T=null!=w?w:Y,{items:O,total:q,pages:N}=(0,h.useMemo)(()=>T,[T]);(0,h.useEffect)(()=>{_(N)},[N,_]);let V=(0,h.useMemo)(()=>[F.accessor(e=>e.name,{id:"name",cell:e=>(0,i.jsx)(b.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(b.Rr,{value:"Name",...e})}),F.accessor(e=>e.databases,{id:"projects",cell:e=>0===e.getValue().length?(0,i.jsx)(b.G3,{value:"All projects"}):(0,i.jsx)(b.WP,{suffix:"Projects",value:e.getValue(),...e,isDisplayAll:!0}),header:e=>(0,i.jsx)(b.Rr,{value:"Scope",...e})}),F.accessor(e=>e.execution_frequency,{id:"frequency",cell:e=>{var t;return(0,i.jsx)(b.G3,{value:null!==(t=e.getValue())&&void 0!==t?t:"Not scheduled"})},header:e=>(0,i.jsx)(b.Rr,{value:"Scan frequency",...e})}),F.accessor(e=>e.last_monitored,{id:"last_monitored",cell:e=>(0,i.jsx)(p.Cy,{time:e.getValue()}),header:e=>(0,i.jsx)(b.Rr,{value:"Last scan",...e})}),F.accessor(e=>e.enabled,{id:"status",cell:W,header:e=>(0,i.jsx)(b.Rr,{value:"Status",...e}),size:0,meta:{disableRowClick:!0}}),F.display({id:"action",cell:e=>(0,i.jsx)(H,{onEditClick:()=>L(e.row.original),monitorId:e.row.original.key}),header:"Actions",meta:{disableRowClick:!0}})],[]),P=(0,m.b7)({getCoreRowModel:(0,g.sC)(),getGroupedRowModel:(0,g.qe)(),getExpandedRowModel:(0,g.rV)(),getRowId:e=>e.name,manualPagination:!0,data:O,columns:V});return k?(0,i.jsx)(j.Z,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.xvT,{maxW:"720px",mb:6,fontSize:"sm",children:"A data discovery monitor observes configured systems for data model changes to proactively discover and classify data risks. Monitors can observe part or all of a project, dataset, table, or API for changes and each can be assigned to a different data steward."}),(0,i.jsxs)(b.Q$,{children:[(0,i.jsx)(a.LZC,{}),(0,i.jsx)(a.zxk,{onClick:z.onOpen,size:"xs",variant:"outline",rightIcon:(0,i.jsx)(f,{}),"data-testid":"add-monitor-btn",children:"Add monitor"}),(0,i.jsx)(I,{isOpen:z.isOpen,onClose:()=>{A(void 0),Z(!1),M(0),z.onClose()},formStep:D,onAdvance:e=>{A(e),M(1)},monitor:E,isEditing:R,integration:t,integrationOption:n})]}),(0,i.jsx)(b.ZK,{tableInstance:P,onRowClick:L,emptyTableNotice:(0,i.jsx)(G,{onAddClick:z.onOpen})}),(0,i.jsx)(b.s8,{totalRows:q,pageSizes:o,setPageSize:l,onPreviousPageClick:r,isPreviousPageDisabled:c||S,onNextPageClick:d,isNextPageDisabled:u||S,startRange:x,endRange:C})]})},B=n(26953),K=n(44877),Q=e=>{let{isOpen:t,onClose:n,connection:a}=e,o=(0,K.Z)(a.connection_type);return(0,i.jsx)(_.Z,{title:"Manage integration secret",isOpen:t,onClose:n,children:(0,i.jsx)(B.Z,{connection:a,connectionOption:o,onCancel:n})})},$=n(28638),J=n(42846),X=()=>{var e,t;let{query:n}=(0,o.useRouter)(),g=Array.isArray(n.id)?n.id[0]:n.id,{data:m,isLoading:h}=(0,d.jA)(null!=g?g:""),j=(0,K.Z)(null==m?void 0:m.connection_type),{testConnection:f,isLoading:b,testData:p}=(0,u.Z)(m),{onOpen:v,isOpen:C,onClose:y}=(0,a.qY0)(),{overview:_,instructions:k}=(0,x.ZP)(null==m?void 0:m.connection_type),S=(0,o.useRouter)();m&&!x.jq.includes(m.connection_type)&&S.push(r.KH);let w=[{label:"Connection",content:(0,i.jsxs)(a.xuv,{maxW:"720px",children:[(0,i.jsxs)(a.kCb,{borderRadius:"md",outline:"1px solid",outlineColor:"gray.100",align:"center",p:3,children:[(0,i.jsx)(a.kCb,{flexDirection:"column",children:(0,i.jsx)($.Z,{testData:p})}),(0,i.jsx)(a.LZC,{}),(0,i.jsxs)(a.hE2,{size:"sm",variant:"outline",children:[(0,i.jsx)(a.zxk,{onClick:f,isLoading:b,"data-testid":"test-connection-btn",children:"Test connection"}),(0,i.jsx)(a.zxk,{onClick:v,"data-testid":"manage-btn",children:"Manage"})]})]}),(0,i.jsx)(Q,{isOpen:C,onClose:y,connection:m}),_,k]})},{label:"Data discovery",content:(0,i.jsx)(U,{integration:m,integrationOption:j})}];return(0,i.jsx)(l.Z,{title:"Integrations",children:(0,i.jsxs)(c.Z,{breadcrumbs:[{title:"Integrations",link:r.KH},{title:null!==(t=null!==(e=null==m?void 0:m.name)&&void 0!==e?e:null==m?void 0:m.key)&&void 0!==t?t:""}],children:[(0,i.jsx)(J.Z,{integration:m,showDeleteButton:!0}),h?(0,i.jsx)(a.$jN,{}):!!m&&(0,i.jsx)(s.Z,{data:w,isLazy:!0})]})})}}},function(e){e.O(0,[6451,4671,2866,9278,1749,2850,9308,2888,9774,179],function(){return e(e.s=50697)}),_N_E=e.O()}]);