(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4623],{87736:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[id]",function(){return n(47062)}])},72809:function(e,t,n){"use strict";var i=n(24246),a=n(17749),s=n(27378);let r=e=>{let t=e.split("."),n=[];return t.forEach(e=>{let t=n.length>0?n[n.length-1]:null;t?n.push("".concat(t,".").concat(e)):n.push(e)}),n},l=(e,t)=>{let n=r(t).filter(e=>e!==t);return e.filter(e=>n.includes(e)).length>0},o=(e,t)=>!!(e===t||e.startsWith("".concat(t,"."))),c=(e,t,n)=>{let i=null!=n?n:[];return e.forEach(e=>{e.children&&c(e.children,t,i),o(e.value,t)&&i.push(e)}),i},d=e=>{let{node:t,isChecked:n,onChecked:s,isExpanded:r,onExpanded:l,isIndeterminate:o,isDisabled:c,children:d}=e,{value:u,label:h}=t,f=!!t.children&&t.children.length>0;return(0,i.jsxs)(a.xuv,{children:[(0,i.jsxs)(a.xuv,{display:"flex",justifyContent:"space-between",_hover:{backgroundColor:"gray.100",cursor:"pointer"},onClick:()=>l(t),minHeight:8,children:[(0,i.jsx)(a.XZJ,{colorScheme:"complimentary",value:u,isChecked:!o&&n,isIndeterminate:o,isDisabled:c,onChange:()=>s(t),mx:2,"data-testid":"checkbox-".concat(h),children:h}),f?(0,i.jsx)(a.hU,{"data-testid":"expand-".concat(h),"aria-label":r?"collapse":"expand",icon:(0,i.jsx)(a.v4q,{boxSize:5}),variant:"ghost",onClick:()=>l(t),size:"sm",style:{transform:r?"rotate(180deg)":""}}):null]}),d&&(0,i.jsx)(a.xuv,{ml:5,children:d})]})};t.ZP=e=>{let{nodes:t,selected:n,onSelected:u,...h}=e,[f,x]=(0,s.useState)([]),[m,p]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=Array.from(new Set([...n.map(e=>r(e)).reduce((e,t)=>e.concat(t),[]),...n.map(e=>c(t,e)).reduce((e,t)=>e.concat(t),[]).map(e=>e.value)]));p(e),x(e)},[n,t]);let v=e=>{let i=[],a=[];f.indexOf(e.value)>=0?(i=f.filter(t=>!o(t,e.value)),a=n.filter(t=>!o(t,e.value))):(i=[...f,...c(t,e.value).map(e=>e.value)],a=[...n,e.value]),x(i),u(a)},g=e=>{m.indexOf(e.value)>=0?p(m.filter(t=>!o(t,e.value))):p([...m,e.value])},j=e=>{if(e.children){let a=f.indexOf(e.value)>=0,r=m.indexOf(e.value)>=0,o=c(t,e.value),u=a&&e.children.length>0&&f.filter(t=>t.startsWith("".concat(e.value,"."))).length+1!==o.length,h=l(n,e.value);return(0,i.jsx)(d,{node:e,isChecked:a,onChecked:v,isExpanded:r,onExpanded:g,isDisabled:h,isIndeterminate:u,children:r?e.children.map(e=>(0,i.jsx)(s.Fragment,{children:j(e)},e.value)):void 0})}return null};return(0,i.jsx)(a.xuv,{...h,children:t.map(e=>(0,i.jsx)(a.xuv,{children:j(e)},e.value))})}},73903:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var i=n(24246),a=n(17749),s=n(27378);let r=e=>{let{allColumns:t,selectedColumns:n,onChange:r}=e,l=(0,s.useMemo)(()=>{let e=new Map;return t.forEach(t=>e.set(t.name,!!n.find(e=>e.name===t.name))),e},[t,n]),o=()=>{l.forEach((e,t)=>l.set(t,!1)),r([])},c=e=>{var n;let i=null!==(n=l.get(e.name))&&void 0!==n&&n;l.set(e.name,!i),r(t.filter(e=>l.get(e.name)))};return(0,i.jsx)(a.v2r,{children:e=>{let{onClose:s}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.j2t,{as:a.zxk,rightIcon:(0,i.jsx)(a.mCO,{}),variant:"outline",fontWeight:"normal","data-testid":"column-dropdown",children:"Columns"}),(0,i.jsx)(a.qyq,{children:(0,i.jsxs)(a.xuv,{px:2,children:[(0,i.jsxs)(a.xuv,{display:"flex",justifyContent:"space-between",mb:2,children:[(0,i.jsx)(a.zxk,{variant:"outline",size:"xs",onClick:o,"data-testid":"column-clear-btn",children:"Clear"}),(0,i.jsx)(a.zxk,{size:"xs",colorScheme:"primary",onClick:s,"data-testid":"column-done-btn",children:"Done"})]}),(0,i.jsx)(a.cOn,{colorScheme:"complimentary",children:(0,i.jsx)(a.Kqy,{children:t.map(e=>{let t=n.filter(t=>t.name===e.name).length>0;return(0,i.jsx)(a.XZJ,{id:e.name,_hover:{bg:"gray.100"},isChecked:t,onChange:()=>c(e),"data-testid":"checkbox-".concat(e.name),children:e.name},e.name)})})})]})})]})}})}},43124:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var i=n(24246),a=n(17749),s=n(88038),r=n.n(s),l=n(86677);n(27378);var o=n(11596),c=n(72247),d=n(11032),u=()=>{let e=(0,l.useRouter)();return(0,i.jsx)(a.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(a.xuv,{children:[(0,i.jsxs)(a.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(a.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(a.zxk,{size:"sm",variant:"outline",onClick:()=>{e.push(d.fz)},children:"Configure"})]}),(0,i.jsxs)(a.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},h=e=>{let{children:t,title:n,padded:s=!0,mainProps:d}=e,h=(0,o.hz)(),f=(0,l.useRouter)(),x="/privacy-requests"===f.pathname||"/datastore-connection"===f.pathname,m=!(h.flags.privacyRequestsConfiguration&&x),{data:p}=(0,c.JE)(void 0,{skip:m}),{data:v}=(0,c.PW)(void 0,{skip:m}),g=h.flags.privacyRequestsConfiguration&&(!p||!v)&&x;return(0,i.jsxs)(a.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(r(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(a.kCb,{as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[g?(0,i.jsx)(u,{}):null,t]})]})}},60136:function(e,t,n){"use strict";n.d(t,{D4:function(){return s.D4},MM:function(){return h},Ot:function(){return c},c6:function(){return a},cj:function(){return x},e$:function(){return l},fn:function(){return o},iC:function(){return f},nU:function(){return u},tB:function(){return d}});var i,a,s=n(41164);let r="An unexpected error occurred. Please try again.",l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;if((0,s.Bw)(e)){if((0,s.hE)(e.data))return e.data.detail;if((0,s.cz)(e.data)){var n;let t=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null==t?void 0:t.msg,": ").concat(null==t?void 0:t.loc)}if(409===e.status&&(0,s.Dy)(e.data)||404===e.status&&(0,s.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function o(e){return"object"==typeof e&&null!=e&&"status"in e}function c(e){return"object"==typeof e&&null!=e&&"data"in e&&"string"==typeof e.data.detail}function d(e){return"object"==typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:r};if((0,s.oK)(e))return{status:e.originalStatus,message:e.data};if((0,s.Bw)(e)){let{status:n}=e;return{status:n,message:l(e,t.message)}}return t},h=e=>Object.entries(e).map(e=>({value:e[1],label:e[1]}));(i=a||(a={})).GVL="gvl",i.AC="gacp",i.COMPASS="compass";let f={gvl:{label:"GVL",fullName:"Global Vendor List"},gacp:{label:"AC",fullName:"Google Additional Consent List"},compass:{label:"",fullName:""}},x=e=>{let t=e.split(".")[0];return"gacp"===t?"gacp":"gvl"===t?"gvl":"compass"}},73485:function(e,t,n){"use strict";n.d(t,{R:function(){return l}});var i=n(24246),a=n(17749),s=n(79894),r=n.n(s);let l=e=>{let{onClick:t,...n}=e;return(0,i.jsxs)(a.kCb,{alignItems:"center",mt:-4,mb:3,onClick:t,cursor:"pointer",...n,children:[(0,i.jsx)(a.hU,{"aria-label":"Back",icon:(0,i.jsx)(a.Rpv,{}),mr:2,size:"xs",variant:"outline"}),(0,i.jsx)(a.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})]})};t.Z=e=>{let{backPath:t,...n}=e;return(0,i.jsxs)(a.kCb,{alignItems:"center",mb:6,...n,children:[(0,i.jsx)(a.hU,{as:r(),href:t,"aria-label":"Back",icon:(0,i.jsx)(a.Rpv,{}),mr:2,size:"xs",variant:"outline"}),(0,i.jsx)(a.xvT,{as:r(),href:t,fontSize:"sm",fontWeight:"500",children:"Back"})]})}},16781:function(e,t,n){"use strict";n.d(t,{MA:function(){return l},Vo:function(){return c},t5:function(){return o}});var i=n(24246),a=n(17749);let s=e=>{let{children:t}=e;return(0,i.jsxs)(a.xvT,{"data-testid":"toast-success-msg",children:[(0,i.jsx)("strong",{children:"Success:"})," ",t]})},r=e=>{let{children:t}=e;return(0,i.jsxs)(a.xvT,{"data-testid":"toast-error-msg",children:[(0,i.jsx)("strong",{children:"Error:"})," ",t]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},o=e=>{let t=(0,i.jsx)(s,{children:e});return{...l,description:t}},c=e=>{let t=(0,i.jsx)(r,{children:e});return{...l,description:t,status:"error"}}},92953:function(e,t,n){"use strict";var i=n(24246),a=n(17749);t.Z=e=>{let{name:t,onClose:n,...s}=e,r={backgroundColor:"primary.400",color:"white","data-testid":"taxonomy-entity-".concat(t),width:"fit-content",size:"sm",...s};return n?(0,i.jsxs)(a.Vp9,{display:"flex",justifyContent:"space-between",...r,children:[(0,i.jsx)(a.Sn0,{children:t}),(0,i.jsx)(a.SD9,{onClick:n,color:"white"})]}):(0,i.jsx)(a.Vp9,{...r,children:t})}},62091:function(e,t,n){"use strict";n.d(t,{C:function(){return i},P:function(){return a}});let i=(e,t)=>{let n;if(null==t&&e.every(e=>void 0===e.parent_key))n=e;else{let i=null!=t?t:null;n=e.filter(e=>e.parent_key===i)}return n.map(t=>{var n,a;let s=t.fides_key;return{value:t.fides_key,label:""===t.name||null==t.name?t.fides_key:t.name,description:t.description,children:i(e,s),is_default:null!==(n=t.is_default)&&void 0!==n&&n,active:null!==(a=t.active)&&void 0!==a&&a}})},a=e=>{let t=e.split(".");return 1===t.length?"":t.slice(0,t.length-1).join(".")}},47062:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return el}});var i,a,s=n(24246),r=n(86677),l=n(43124),o=n(73485),c=n(11032),d=n(17749),u=n(27378),h=n(45007),f=n(73903),x=n(11596),m=n(96878),p=n(35249),v=n(60136),g=n(16781),j=n(51394),y=n(435),b=n(65201);let C=(e,t,n)=>{let i=e.collections.map((e,i)=>i===n?t:e);return{...e,collections:i}},k=(e,t,n)=>{let i=e.fields.map((e,i)=>i===n?t:e);return{...e,fields:i}},_=(e,t,n,i)=>{let a=k(e.collections[n],t,i);return C(e,a,n)},w=e=>e.classifications.reduce((e,t)=>{var n,i;return(null!==(n=e.aggregated_score)&&void 0!==n?n:0)<(null!==(i=t.aggregated_score)&&void 0!==i?i:0)?t:e}),D=(e,t,n)=>(0,b.ZP)(e,e=>{let i=new Map(t.collections.map(e=>[e.name,e]));e.collections.forEach(e=>{var t;let a=i.get(e.name);if(n&&(null==a?void 0:a.name)!==n)return;let s=new Map(null==a?void 0:null===(t=a.fields)||void 0===t?void 0:t.map(e=>[e.name,e]));e.fields.forEach(e=>{if(e.data_categories&&e.data_categories.length>0)return;let t=s.get(e.name);if(!(t&&t.classifications.length>0))return;let n=w(t);e.data_categories=[n.label]})})}),S=(e,t,n)=>{let i=e.collections[t],a=i.fields.filter((e,t)=>t!==n);return C(e,{...i,fields:a},t)},z=(e,t)=>{let n=e.collections.filter((e,n)=>n!==t);return{...e,collections:n}};var E=()=>{let e=(0,x.hz)(),t=(0,h.v9)(y.n0),n=(0,h.v9)(m.Bt),i=(0,h.v9)(m.lG),[a,{isLoading:r}]=(0,y.TG)(),[l,{isLoading:o}]=(0,m.MD)(),c=r||o,f=(0,d.pmc)(),p=(0,u.useMemo)(()=>{var e,t;return null!==(t=null==i?void 0:null===(e=i.fields)||void 0===e?void 0:e.reduce((e,t)=>t.classifications.length>0?e+1:e,0))&&void 0!==t?t:0},[i]),b=async()=>{if(c||!(t&&n))return;let s=D(t,n,e.flags.datasetClassificationUpdates?null==i?void 0:i.name:void 0);try{let n=await a(s);if((0,v.D4)(n)){f((0,g.Vo)((0,v.e$)(n.error)));return}if(e.flags.datasetClassificationUpdates){f((0,g.t5)("Collection classified and approved"));let e=0;if(s.collections.forEach(t=>{t.fields.forEach(t=>{t.data_categories&&0!==t.data_categories.length||(e+=1)})}),0===e){let e=await l({dataset_fides_key:t.fides_key,status:j.Wg.REVIEWED});if((0,v.D4)(e)){f((0,g.Vo)((0,v.e$)(e.error)));return}f((0,g.t5)("Dataset classified and approved"))}}else{let e=await l({dataset_fides_key:t.fides_key,status:j.Wg.REVIEWED});if((0,v.D4)(e)){f((0,g.Vo)((0,v.e$)(e.error)));return}f((0,g.t5)("Dataset classified and approved"))}}catch(e){f((0,g.Vo)("".concat(e)))}};return n&&i&&n.status===j.Wg.COMPLETE?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.m$N.p,{flexGrow:1,textAlign:"center",fontSize:"sm",color:"gray.600",children:[(0,s.jsx)(d.m$N.span,{fontWeight:"bold",children:p})," ",1===p?"field has":"fields have"," been identified within this"," ",(0,s.jsx)(d.m$N.span,{fontWeight:"bold",children:i.name})," ","table that are likely to contain personal data."]}),e.flags.datasetClassificationUpdates?(0,s.jsx)(d.zxk,{size:"sm",variant:"primary",flexShrink:0,onClick:b,isLoading:c,isDisabled:c,"data-testid":"approve-classification-btn",children:"Approve classifications"}):(0,s.jsx)(d.zxk,{size:"sm",variant:"primary",flexShrink:0,onClick:b,isLoading:c,isDisabled:c,"data-testid":"approve-classification-btn",children:"Approve dataset"})]}):(0,s.jsx)(d.LZC,{})},O=n(92953),T=e=>{let{attribute:t,field:n,classifyField:i}=e;if("data_categories"===t){var a;let e=void 0!==i?w(i):void 0,t=void 0!==e?[e.label]:[],r=null!==(a=n.data_categories)&&void 0!==a?a:[],l=r.length>0?r:t;return(0,s.jsx)(d.ua7,{placement:"right",label:l===t?"Fides has generated these data categories for you. You can override them by modifying the field.":"",children:(0,s.jsx)(d.xuv,{display:"inline-block",children:l.map(e=>(0,s.jsx)(d.xuv,{mr:2,mb:2,children:(0,s.jsx)(O.Z,{name:e})},"".concat(n.name,"-").concat(e)))})})}return(0,s.jsx)(s.Fragment,{children:n[t]})};let A=e=>{let{title:t,onDelete:n}=e;return(0,s.jsxs)(d.OXI,{py:2,display:"flex",alignItems:"center",children:[(0,s.jsx)(d.xvT,{mr:"2",children:t}),n?(0,s.jsx)(d.hU,{"aria-label":"delete",icon:(0,s.jsx)(d.lr0,{}),size:"xs",onClick:n,"data-testid":"delete-btn"}):null]})},F=e=>{let{onClose:t,formId:n,isSaving:i}=e;return(0,s.jsxs)(d.zeN,{justifyContent:"flex-start",children:[(0,s.jsx)(d.zxk,{onClick:t,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,s.jsx)(d.zxk,{type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",form:n,isLoading:i,children:"Save"})]})};var L=e=>{let{header:t,description:n,isOpen:i,onClose:a,children:r,footer:l}=e;return(0,s.jsxs)(d.dys,{placement:"right",isOpen:i,onClose:a,size:"lg",children:[(0,s.jsx)(d.P1B,{}),(0,s.jsxs)(d.scA,{"data-testid":"edit-drawer-content",py:2,children:[(0,s.jsx)(d.xuv,{display:"flex",justifyContent:"flex-end",mr:2,children:(0,s.jsx)(d.zxk,{variant:"ghost",onClick:a,"data-testid":"close-drawer-btn",children:(0,s.jsx)(d.LGN,{width:"17px"})})}),t,(0,s.jsxs)(d.Ng0,{children:[n?(0,s.jsx)(d.xvT,{fontSize:"sm",mb:4,children:n}):null,r]}),l]})]})},N=n(34090),I=n(34803);let W=e=>{let{dataCategories:t,mostLikelyCategories:n}=e;return(null==t?void 0:t.length)?t:(null==n?void 0:n.length)?[n.reduce((e,t)=>{var n,i;return(null!==(n=t.confidence)&&void 0!==n?n:0)>(null!==(i=e.confidence)&&void 0!==i?i:0)?t:e}).fides_key]:[]},q={description:{tooltip:"A human-readable description of the collection."},data_categories:{tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all fields in the collection."}},M={description:{tooltip:"A human-readable description of the field."},data_categories:{tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to this field."}};var P=n(39514),R=n(72809),V=n(62091),Z=e=>{let{dataCategories:t,checked:n,onChecked:i,buttonProps:a,buttonLabel:r}=e,l=(0,u.useMemo)(()=>(0,V.C)(t),[t]),o={variant:"outline",fontWeight:"normal",size:"sm",borderRadius:"sm",textAlign:"left",_hover:{backgroundColor:"transparent"},_active:{backgroundColor:"transparent"},rightIcon:(0,s.jsx)(d.mCO,{}),width:"100%"};return(0,s.jsxs)(d.v2r,{closeOnSelect:!0,children:[(0,s.jsx)(d.j2t,{as:d.zxk,...null!=a?a:o,"data-testid":"data-category-dropdown",children:null!=r?r:"Select data categories"}),(0,s.jsx)(d.qyq,{children:(0,s.jsxs)(d.xuv,{maxHeight:"50vh",minWidth:"300px",overflowY:"scroll",children:[(0,s.jsxs)(d.xuv,{position:"sticky",top:0,zIndex:1,backgroundColor:"white",pt:1,children:[(0,s.jsx)(d.__7,{children:(0,s.jsxs)(d.xuv,{display:"flex",justifyContent:"space-between",px:2,mb:2,children:[(0,s.jsx)(d.sNh,{as:d.zxk,variant:"outline",size:"xs",onClick:()=>i([]),mr:2,width:"auto",closeOnSelect:!1,"data-testid":"data-category-clear-btn",children:"Clear"}),(0,s.jsx)(d.xvT,{mr:2,children:"Data Categories"}),(0,s.jsx)(d.sNh,{as:d.zxk,size:"xs",colorScheme:"primary",color:"white",_hover:{backgroundColor:"primary.600"},width:"auto","data-testid":"data-category-done-btn",children:"Done"})]})}),(0,s.jsx)(d.RaW,{})]}),(0,s.jsx)(d.xuv,{px:2,"data-testid":"data-category-checkbox-tree",children:(0,s.jsx)(R.ZP,{nodes:l,selected:n,onSelected:i})})]})})]})},Y=e=>{let{dataCategories:t,mostLikelyCategories:n,checked:i,onChecked:a,tooltip:r}=e,l=e=>{a(i.filter(t=>t!==e))},o=i.slice().sort((e,t)=>e.localeCompare(t));return(0,s.jsxs)(d.rjZ,{templateColumns:"1fr 3fr",children:[(0,s.jsx)(d.lXp,{children:"Data Categories"}),n?(0,s.jsxs)(d.xuv,{display:"flex",alignItems:"center",children:[(0,s.jsx)(d.xuv,{mr:"2",width:"100%",children:(0,s.jsx)(d.P$4,{dataCategories:t,mostLikelyCategories:n,checked:i,onChecked:a})}),(0,s.jsx)(P.Z,{label:r})]}):(0,s.jsxs)(d.Kqy,{children:[(0,s.jsxs)(d.xuv,{display:"flex",alignItems:"center",children:[(0,s.jsx)(d.xuv,{mr:"2",width:"100%",children:(0,s.jsx)(Z,{dataCategories:t,checked:i,onChecked:a})}),(0,s.jsx)(P.Z,{label:r})]}),(0,s.jsx)(d.Kqy,{"data-testid":"selected-categories",children:o.map(e=>(0,s.jsx)(O.Z,{name:e,onClose:()=>{l(e)}},e))})]})]})};let U="edit-collection-or-field-form";var B=e=>{var t;let{values:n,onSubmit:i,dataType:a}=e,r={description:null!==(t=n.description)&&void 0!==t?t:"",data_categories:n.data_categories},l=(0,h.v9)(p.qb).filter(e=>e.active),o=(0,h.v9)(m.t6),c=(0,u.useMemo)(()=>{if(!(l&&o))return;let e=new Map(l.map(e=>[e.fides_key,e]));return o.classifications.map(t=>{let{label:n,aggregated_score:i}=t,a=e.get(n);return{fides_key:n,confidence:i,...a}})},[l,o]),[f,x]=(0,u.useState)(()=>W({dataCategories:r.data_categories,mostLikelyCategories:c})),v="collection"===a?q.description.tooltip:M.description.tooltip,g="collection"===a?q.data_categories.tooltip:M.data_categories.tooltip;return(0,s.jsx)(N.J9,{initialValues:r,onSubmit:e=>{i({...e,data_categories:f})},children:(0,s.jsx)(N.l0,{id:U,children:(0,s.jsxs)(d.Kqy,{children:[(0,s.jsx)(I.j0,{name:"description",label:"Description",tooltip:v,"data-testid":"description-input"}),(0,s.jsx)(Y,{dataCategories:l,mostLikelyCategories:c,checked:f,onChecked:x,tooltip:g})]})})})},J=e=>{let{field:t,isOpen:n,onClose:i}=e,a=(0,h.v9)(y.n0),r=(0,h.v9)(y.gR),l=(0,h.v9)(y.mZ),[o]=(0,y.TG)(),{isOpen:c,onOpen:u,onClose:f}=(0,d.qY0)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L,{isOpen:n,onClose:i,description:"Fields are an array of objects that describe the collection's fields. Provide additional context to this field by filling out the fields below.",header:(0,s.jsx)(A,{title:"Field Name: ".concat(t.name),onDelete:u}),footer:(0,s.jsx)(F,{onClose:i,formId:U}),children:(0,s.jsx)(B,{values:t,onSubmit:e=>{a&&void 0!==r&&void 0!==l&&(o(_(a,{...t,...e},r,l)),i())},dataType:"field"})}),(0,s.jsx)(d.cVQ,{isOpen:c,onClose:f,onConfirm:()=>{a&&void 0!==r&&void 0!==l&&(o(S(a,r,l)),i())},title:"Delete Field",message:(0,s.jsxs)(d.xvT,{children:["You are about to permanently delete the field named"," ",(0,s.jsx)(d.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:t.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})};(i=a||(a={})).DATASET="dataset",i.COLLECTION="collection",i.FIELD="field";var $=e=>{let{columns:t}=e,n=(0,h.I0)(),i=(0,h.v9)(y.pD),r=(0,h.v9)(y.FJ),l=(0,h.v9)(y.U3),o=(0,h.v9)(m.a$),c=e=>{n((0,y.EQ)(e)),n((0,y.JY)(a.FIELD))};return(0,s.jsxs)(d.xuv,{children:[(0,s.jsxs)(d.iA_,{size:"sm","data-testid":"dataset-fields-table",children:[(0,s.jsx)(d.hrZ,{children:(0,s.jsx)(d.Tr,{children:t.map(e=>(0,s.jsx)(d.Th,{pl:0,"data-testid":"column-".concat(e.name),children:e.name},e.name))})}),(0,s.jsx)(d.p3B,{children:(null!=i?i:[]).map((e,n)=>(0,s.jsx)(d.Tr,{_hover:{bg:"gray.50"},cursor:"pointer",onClick:()=>c(n),tabIndex:0,onKeyPress:e=>{"Enter"===e.key&&c(n)},"data-testid":"field-row-".concat(e.name),children:t.map(t=>(0,s.jsx)(d.Td,{pl:0,children:(0,s.jsx)(T,{field:e,classifyField:o.get(e.name),attribute:t.attribute})},"".concat(t.name,"-").concat(e.name)))},e.name))})]}),r?(0,s.jsx)(J,{isOpen:l===a.FIELD,onClose:()=>{n((0,y.EQ)(void 0)),n((0,y.JY)(void 0))},field:r}):null]})},G=()=>{var e;let t=(0,h.v9)(m.Bt),n=null!==(e=null==t?void 0:t.status)&&void 0!==e?e:j.Wg.REVIEWED,i=(0,u.useMemo)(()=>{var e,n;return null!==(n=null==t?void 0:null===(e=t.collections)||void 0===e?void 0:e.reduce((e,t)=>e+t.fields.reduce((e,t)=>t.classifications.length>0?e+1:e,0),0))&&void 0!==n?n:0},[t]);return(0,s.jsx)(d.gCW,{align:"left",mb:6,children:n===j.Wg.COMPLETE?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.Ugi,{children:[(0,s.jsx)(d.X6q,{fontSize:"2xl",children:"Dataset classification ready for review"}),(0,s.jsx)(d.scM,{fontSize:"2xl"})]}),(0,s.jsxs)(d.xvT,{fontSize:"sm",color:"gray.600",maxW:"720px",children:[0===i?"Fides did not identify any fields that are likely to contain personal data, but there may be some.":1===i?"Fides identified a field that is likely to contain personal data.":"Fides identified ".concat(i," fields that are likely to contain personal data.")," For each table, please review the recommended data categories. You can accept the recommendation or update any field before approving."]})]}):(0,s.jsx)(d.X6q,{fontSize:"2xl",children:"Dataset"})})},X=e=>{let{collection:t,isOpen:n,onClose:i}=e,a=(0,h.v9)(y.n0),r=(0,h.v9)(y.gR),[l]=(0,y.TG)(),o=(0,d.pmc)(),{isOpen:c,onOpen:u,onClose:f}=(0,d.qY0)(),x=async e=>{if(a&&void 0!==r){let n=C(a,{...t,...e},r);try{await l(n),o((0,g.t5)("Successfully modified collection"))}catch(e){o((0,g.Vo)(e))}i()}},m=async()=>{if(a&&void 0!==r){let e=z(a,r);try{await l(e),o((0,g.t5)("Successfully deleted collection"));let t=a.collections.length>0?0:void 0;(0,y.Fy)(t)}catch(e){o((0,g.Vo)(e))}i()}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L,{isOpen:n,onClose:i,description:"Collections are an array of objects that describe the Dataset's collections. Provide additional context to this collection by filling out the fields below.",header:(0,s.jsx)(A,{title:"Collection Name: ".concat(t.name),onDelete:u}),footer:(0,s.jsx)(F,{onClose:i,formId:U}),children:(0,s.jsx)(B,{values:t,onSubmit:x,dataType:"collection"})}),(0,s.jsx)(d.cVQ,{isOpen:c,onClose:f,onConfirm:m,title:"Delete Collection",message:(0,s.jsxs)(d.xvT,{children:["You are about to permanently delete the collection named"," ",(0,s.jsx)(d.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:t.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})};let K="edit-field-drawer";var Q=e=>{var t,n,i;let{values:a,onSubmit:r}=e,l={name:null!==(t=a.name)&&void 0!==t?t:"",description:null!==(n=a.description)&&void 0!==n?n:"",data_categories:a.data_categories},o=(0,h.v9)(p.qb),[c,f]=(0,u.useState)(null!==(i=l.data_categories)&&void 0!==i?i:[]);return(0,s.jsx)(N.J9,{initialValues:l,onSubmit:e=>{r({...e,data_categories:c})},children:(0,s.jsx)(N.l0,{id:K,children:(0,s.jsxs)(d.Kqy,{spacing:"3",children:[(0,s.jsx)(I.j0,{name:"name",label:"Name",tooltip:"A UI-friendly label for the Dataset.","data-testid":"name-input"}),(0,s.jsx)(I.j0,{name:"description",label:"Description",tooltip:"A human-readable description of the Dataset.","data-testid":"description-input"}),(0,s.jsx)(Y,{dataCategories:o,checked:c,onChecked:f,tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all collections in the Dataset."})]})})})},H=e=>{let{dataset:t,isOpen:n,onClose:i}=e,[a]=(0,y.TG)(),[l]=(0,y.QY)(),o=(0,r.useRouter)(),c=(0,d.pmc)(),{isOpen:u,onOpen:h,onClose:f}=(0,d.qY0)(),x=async e=>{let n={...t,...e};try{let e=await a(n);(0,v.D4)(e)?c((0,g.Vo)((0,v.e$)(e.error))):c((0,g.t5)("Successfully modified dataset"))}catch(e){c((0,g.Vo)(e))}i()},m=async()=>{let{fides_key:e}=t,n=await l(e);(0,v.D4)(n)?c((0,g.Vo)((0,v.e$)(n.error))):c((0,g.t5)("Successfully deleted dataset")),(0,y.Zl)(void 0),o.push("/dataset"),i()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L,{isOpen:n,onClose:i,description:"A Dataset takes a database schema (tables and columns) and adds Fides privacy categorizations. Provide additional context to this dataset by filling out the fields below.",header:(0,s.jsx)(A,{title:"Dataset Name: ".concat(t.name),onDelete:h}),footer:(0,s.jsx)(F,{onClose:i,formId:K}),children:(0,s.jsx)(Q,{values:t,onSubmit:x})}),(0,s.jsx)(d.cVQ,{isOpen:u,onClose:f,onConfirm:m,title:"Delete Dataset",message:(0,s.jsxs)(d.xvT,{children:["You are about to permanently delete the dataset named"," ",(0,s.jsx)(d.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:t.name}),". Are you sure you would like to continue?"]})})]})},ee=n(79894),et=n.n(ee);let en=e=>{let{children:t,isDisabled:n,onClick:i,...a}=e;return(0,s.jsx)(d.sNh,{isDisabled:n,_hover:{backgroundColor:"gray.100"},fontSize:"sm",onClick:i,...a,children:t})};var ei=e=>{let{onModifyCollection:t,onModifyDataset:n}=e;return(0,s.jsxs)(d.v2r,{size:"sm",children:[(0,s.jsx)(d.j2t,{as:d.zxk,variant:"outline","data-testid":"more-actions-btn",children:(0,s.jsx)(d.nXP,{})}),(0,s.jsxs)(d.qyq,{children:[(0,s.jsxs)(d.kSQ,{title:"Collections",color:"gray.500",textTransform:"uppercase",mx:3,children:[(0,s.jsx)(d.RaW,{}),(0,s.jsx)(en,{isDisabled:!0,children:"Add a collection"}),(0,s.jsx)(en,{onClick:t,"data-testid":"modify-collection",children:"Modify collection"})]}),(0,s.jsxs)(d.kSQ,{title:"Datasets",color:"gray.500",textTransform:"uppercase",mx:3,children:[(0,s.jsx)(d.RaW,{}),(0,s.jsx)(d.sNh,{as:et(),href:"/dataset",_hover:{backgroundColor:"gray.100"},fontSize:"sm",children:"Select new dataset"}),(0,s.jsx)(en,{isDisabled:!0,children:"Classify this dataset"}),(0,s.jsx)(en,{onClick:n,"data-testid":"modify-dataset",children:"Modify dataset"})]})]})]})};let ea=[{name:"Field Name",attribute:"name"},{name:"Description",attribute:"description"},{name:"Personal Data Categories",attribute:"data_categories"}],es=e=>{let{data:t,isLoading:n}=(0,y.oM)(e),i=(0,x.hz)(),{isLoading:a}=(0,m.Tc)(e,{skip:!i.plus});return(0,p.MO)(),{isLoading:n||a,dataset:t}};var er=e=>{let{fidesKey:t}=e,n=(0,h.I0)(),{dataset:i,isLoading:r}=es(t),l=(0,h.v9)(y.fQ),o=(0,h.v9)(y.Jb),c=(0,h.v9)(y.U3),[x,m]=(0,u.useState)(ea);return((0,p.MO)(),(0,u.useEffect)(()=>{i&&n((0,y.Zl)(i.fides_key))},[n,i]),(0,u.useEffect)(()=>()=>{n((0,y.Zl)(void 0))},[]),r)?(0,s.jsx)(d.$jN,{}):i?(0,s.jsxs)(d.xuv,{children:[(0,s.jsx)(G,{}),(0,s.jsxs)(d.Ugi,{mb:4,children:[(0,s.jsx)(d.PhF,{onChange:e=>{n((0,y.Fy)(e.target.selectedIndex))},width:"fit-content",flexShrink:0,"data-testid":"collection-select",children:(null!=l?l:[]).map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.name))}),(0,s.jsx)(E,{}),(0,s.jsx)(d.xuv,{children:(0,s.jsx)(f.s,{allColumns:ea,selectedColumns:x,onChange:m})}),(0,s.jsx)(ei,{onModifyCollection:()=>n((0,y.JY)(a.COLLECTION)),onModifyDataset:()=>n((0,y.JY)(a.DATASET))})]}),(0,s.jsx)($,{columns:x}),o?(0,s.jsx)(X,{collection:o,isOpen:c===a.COLLECTION,onClose:()=>n((0,y.JY)(void 0))}):null,i?(0,s.jsx)(H,{dataset:i,isOpen:c===a.DATASET,onClose:()=>n((0,y.JY)(void 0))}):null]}):(0,s.jsx)("div",{children:"Dataset not found"})},el=()=>{let{id:e}=(0,r.useRouter)().query;if(!e)return(0,s.jsx)(l.Z,{title:"Dataset",children:"Dataset not found"});let t=Array.isArray(e)?e[0]:e;return(0,s.jsxs)(l.Z,{title:"Dataset - ".concat(e),children:[(0,s.jsx)(o.Z,{backPath:c.$m}),(0,s.jsx)(er,{fidesKey:t})]})}},41164:function(e,t,n){"use strict";n.d(t,{Bw:function(){return r},D4:function(){return a},Dy:function(){return o},XD:function(){return c},cz:function(){return d},hE:function(){return l},oK:function(){return s}});var i=n(76649);let a=e=>"error"in e,s=e=>(0,i.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status,r=e=>(0,i.Ln)({status:"number",data:{}},e),l=e=>(0,i.Ln)({detail:"string"},e),o=e=>(0,i.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),c=e=>(0,i.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),d=e=>(0,i.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return i},uX:function(){return r}});let i=(e,t)=>s(e,t),a=Symbol("SOME"),s=(e,t)=>"string"==typeof e?e===typeof t:Array.isArray(e)?a in e?e.some(e=>s(e,t)):!!Array.isArray(t)&&(0===e.length||t.every(t=>e.some(e=>s(e,t)))):"object"==typeof t&&null!==t&&Object.entries(e).every(([e,n])=>s(n,t[e])),r=e=>t=>i(e,t);class l{static narrow(e){return new l(t=>i(e,t))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){let t=this.NF,n=e instanceof l?e.NF:e instanceof Function?e:t=>i(e,t);return new l(e=>t(e)&&n(e))}}new l(e=>!0)}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=87736)}),_N_E=e.O()}]);