{"version":3,"file":"lib_index_js.dc9a113678683e3d84c1.js","mappings":"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","sources":["webpack://jupS3/./src/handler.ts","webpack://jupS3/./src/index.ts"],"sourcesContent":["import { URLExt } from '@jupyterlab/coreutils';\n\nimport { ServerConnection } from '@jupyterlab/services';\n\n/**\n * Call the API extension\n *\n * @param endPoint API REST end point for the extension\n * @param init Initial values for the request\n * @returns The response body interpreted as JSON\n */\nexport async function requestAPI<T>(\n  endPoint = '',\n  init: RequestInit = {}\n): Promise<T> {\n  // Make request to Jupyter API\n  const settings = ServerConnection.makeSettings();\n  const requestUrl = URLExt.join(\n    settings.baseUrl,\n    'jupS3', // API Namespace\n    endPoint\n  );\n\n  let response: Response;\n  try {\n    response = await ServerConnection.makeRequest(requestUrl, init, settings);\n  } catch (error) {\n    throw new ServerConnection.NetworkError(error as any);\n  }\n\n  let data: any = await response.text();\n\n  if (data.length > 0) {\n    try {\n      data = JSON.parse(data);\n    } catch (error) {\n      console.log('Not a JSON response body.', response);\n    }\n  }\n\n  if (!response.ok) {\n    throw new ServerConnection.ResponseError(response, data.message || data);\n  }\n\n  return data;\n}\n\n\n\nexport async function requestAPIWithParams<T>(\n  endPoint = '',\n  init: RequestInit = {},\n  params: Record<string, string> = {}\n): Promise<T> {\n  const settings = ServerConnection.makeSettings();\n  let requestUrl = URLExt.join(\n    settings.baseUrl,\n    'jupS3', // API Namespace\n    endPoint\n  );\n\n  // Add query parameters to the URL\n  const urlParams = new URLSearchParams(params).toString();\n  if (urlParams) {\n    requestUrl += `?${urlParams}`;\n  }\n\n  let response: Response;\n  try {\n    response = await ServerConnection.makeRequest(requestUrl, init, settings);\n  } catch (error) {\n    throw new ServerConnection.NetworkError(error as any);\n  }\n\n  let data: any = await response.text();\n\n  if (data.length > 0) {\n    try {\n      data = JSON.parse(data);\n    } catch (error) {\n      console.log('Not a JSON response body.', response);\n    }\n  }\n\n  if (!response.ok) {\n    throw new ServerConnection.ResponseError(response, data.message || data);\n  }\n\n  return data;\n}\n","import {\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\n\nimport {\n  MainAreaWidget\n} from '@jupyterlab/apputils';\n\n// import {\n//   IFileBrowserFactory\n// } from '@jupyterlab/filebrowser';\n\nimport {\n  Widget\n} from '@lumino/widgets';\n\n\n\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\n\nimport {requestAPI, requestAPIWithParams} from './handler';\n\n/**\n * Initialization data for the jupS3 extension.\n */\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: 'jupS3:plugin',\n  description: 'A JupyterLab extension.',\n  autoStart: true,\n  optional: [ISettingRegistry],\n  activate: (app: JupyterFrontEnd, settingRegistry: ISettingRegistry | null) => {\n    console.log('JupyterLab extension jupS3 is activated!');\n\n    if (settingRegistry) {\n      settingRegistry\n        .load(plugin.id)\n        .then(settings => {\n          console.log('jupS3 settings loaded:', settings.composite);\n        })\n        .catch(reason => {\n          console.error('Failed to load settings for jupS3.', reason);\n        });\n    }\n\n    requestAPI<any>('get-example')\n      .then(data => {\n        console.log(data);\n      })\n      .catch(reason => {\n        console.error(\n          `The jupS3 server extension appears to be missing.\\n${reason}`\n        );\n      });\n\n\n\n    const content = new S3BrowserWidget();\n        // @ts-ignore\n    const widget = new MainAreaWidget({ content });\n    widget.title.label = 'AURIN Data Browser';\n    app.shell.add(widget, 'left');\n\n  }\n};\n\n\nclass S3BrowserWidget extends Widget {\n  constructor() {\n    super();\n    this.addClass('jp-S3BrowserWidget');\n    this.id = 's3-browser-widget';\n    this.title.label = 'S3 Browser';\n    this.title.closable = true;\n\n    this.node.innerHTML = `\n      <div>\n        <img src=\"https://aurin.org.au/wp-content/uploads/2016/12/AURIN-ORG-AU-1.jpg\" \n            width=\"214.4\" \n            height=\"100\" \n        />\n        <h2 style=\"text-align:center;\">AURIN Data</h2>\n        <hr>\n        <p style=\"font-style:italic;text-decoration:underline;\">Right click any data file to save it to your home directory on the server:</p>\n        <hr>\n        <ul id=\"s3-contents\"></ul>\n        <ul id=\"s3-contents\" class=\"jp-DirListing-content\"></ul>\n        <hr>\n      </div>\n    `;\n\n     requestAPI<any>('get-bucket-contents')\n      .then(data => {\n        const ul = this.node.querySelector('#s3-contents') as HTMLUListElement;\n      data.data.forEach((item: string) => {\n        const li = document.createElement('li');\n        li.classList.add('jp-DirListing-item');\n        li.addEventListener('contextmenu', this.handleRightClick.bind(this));\n        li.textContent = item;\n        ul.appendChild(li);\n      });\n      })\n      .catch(reason => {\n        console.error(\n          `Error getting S3 bucket contents.\\n${reason}`\n        );\n      });\n\n  }\n\n\n\n  handleRightClick(event: MouseEvent) {\n    event.preventDefault();\n    const target = event.target as HTMLElement;\n    if (target && target.tagName === 'LI') {\n      console.log('Right-clicked item text:', target.textContent);\n    }\n    const contextMenu = this.createContextMenu(target.textContent);\n\n    document.body.appendChild(contextMenu);\n    contextMenu.style.top = `${event.clientY}px`;\n    contextMenu.style.left = `${event.clientX}px`;\n\n    const removeContextMenu = () => {\n      document.body.removeChild(contextMenu);\n      document.removeEventListener('click', removeContextMenu);\n    };\n\n    document.addEventListener('click', removeContextMenu);\n  }\n\n  createContextMenu(textContent: string | null): HTMLUListElement {\n\n    const menu = document.createElement('ul');\n    menu.classList.add('context-menu');\n    const menuItem = document.createElement('li');\n    menuItem.textContent = 'Checkout to your home directory';\n    menuItem.addEventListener('click', (e) => {\n      console.log('clicked:', textContent);\n      const params = { file: textContent || '' }; // Example parameter\n\n      requestAPIWithParams<any>('create-or-append-to-file', {}, params)\n        .then(data => {\n          console.log(data);\n        })\n        .catch(reason => {\n          console.error(\n            `The jupS3 server extension appears to be missing.\\n${reason}`\n          );\n      });\n\n    });\n\n    menu.appendChild(menuItem);\n    return menu;\n  }\n\n}\nexport default plugin;\n"],"names":[],"sourceRoot":""}