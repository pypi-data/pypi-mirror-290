{"version":3,"file":"091e2e3fc588bcb326bc.chunk.js","mappings":"yOA4Bc,SAAUA,IACtB,MAAM,SAAEC,IAAkBC,EAAAA,EAAAA,KACpBC,GAAWC,EAAAA,EAAAA,QACV,UAAEC,EAAS,KAAEC,EAAI,MAAEC,GAASC,IAAYC,EAAAA,EAAAA,UAI5C,CAAEJ,WAAW,EAAMC,KAAM,KAAMC,MAAO,OAmCzC,OAlCAG,EAAAA,EAAAA,YAAU,KACHP,GAAaF,IAGlBE,GACEQ,EAAAA,EAAAA,KAAaC,EAAAA,EAAAA,GAAE,sCAAuC,CAAEC,SAAU,KAEpEC,EAAAA,EAAeC,IAAI,CACjBC,SAAU,yBAAyBf,qBAElCgB,MAAKC,GAAOV,EAAS,CAAEF,KAAMY,EAAIC,KAAMd,WAAW,EAAOE,MAAO,SAChEa,OAAMC,GAAKb,EAAS,CAAEF,KAAM,KAAMD,WAAW,EAAOE,MAAOc,MAAK,GAClE,CAAClB,EAAUF,KACdS,EAAAA,EAAAA,YAAU,KACHP,GAGDI,GACF,OAACe,IACC,MAAMC,GACgB,OAApBD,QAAY,MAALf,OAAK,EAALA,EAAOY,cAAM,EAApBG,EAAuBC,gBACX,MAALhB,OAAK,EAALA,EAAOiB,UACT,MAALjB,OAAK,EAALA,EAAOgB,WACPX,EAAAA,EAAAA,GAAE,kBACJT,GAASsB,EAAAA,EAAAA,IAAeF,EAAS,CAAEV,SAAU,IAC9C,EAPD,E,GASD,CAACV,EAAUI,KACdG,EAAAA,EAAAA,YAAU,KACA,MAAJJ,GAAAA,EAAMoB,WACRC,OAAOC,SAASC,KAAO,0CAA0CvB,EAAKoB,Y,GAEvE,CAACpB,IAEAD,GACKyB,EAAAA,EAAAA,GAACC,EAAAA,EAAO,IAGV,IACT,C","sources":["webpack://superset/./src/pages/ExportGoogleSheets/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SupersetClient, t } from '@superset-ui/core';\nimport { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport Loading from 'src/components/Loading';\nimport {\n  addDangerToast,\n  addInfoToast,\n} from 'src/components/MessageToasts/actions';\n\nexport default function ExportGoogleSheets() {\n  const { clientId }: any = useParams();\n  const dispatch = useDispatch();\n  const [{ isLoading, data, error }, setState] = useState<{\n    isLoading: boolean;\n    data: any;\n    error: any;\n  }>({ isLoading: true, data: null, error: null });\n  useEffect(() => {\n    if (!dispatch || !clientId) {\n      return;\n    }\n    dispatch(\n      addInfoToast(t('Exporting results to Google Sheets'), { duration: 0 }),\n    );\n    SupersetClient.get({\n      endpoint: `/api/v1/sqllab/export/${clientId}/google-sheets/`,\n    })\n      .then(res => setState({ data: res.json, isLoading: false, error: null }))\n      .catch(e => setState({ data: null, isLoading: false, error: e }));\n  }, [dispatch, clientId]);\n  useEffect(() => {\n    if (!dispatch) {\n      return;\n    }\n    if (error) {\n      (async () => {\n        const message =\n          (await error?.json())?.message ||\n          (await error?.text()) ||\n          error?.message ||\n          t('Unknown error.');\n        dispatch(addDangerToast(message, { duration: 0 }));\n      })();\n    }\n  }, [dispatch, error]);\n  useEffect(() => {\n    if (data?.sheet_id) {\n      window.location.href = `https://docs.google.com/spreadsheets/d/${data.sheet_id}/`;\n    }\n  }, [data]);\n\n  if (isLoading) {\n    return <Loading />;\n  }\n\n  return null;\n}\n"],"names":["ExportGoogleSheets","clientId","useParams","dispatch","useDispatch","isLoading","data","error","setState","useState","useEffect","addInfoToast","t","duration","SupersetClient","get","endpoint","then","res","json","catch","e","_await$error$json","message","text","addDangerToast","sheet_id","window","location","href","_jsx","Loading"],"sourceRoot":""}