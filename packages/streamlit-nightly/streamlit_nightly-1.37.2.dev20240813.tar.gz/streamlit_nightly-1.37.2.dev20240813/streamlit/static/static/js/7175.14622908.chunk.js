"use strict";(self.webpackChunk_streamlit_app=self.webpackChunk_streamlit_app||[]).push([[7175],{79986:(e,t,r)=>{r.d(t,{Z:()=>u});r(66845);var o,n=r(50641),a=r(86659),l=r(50669),i=r(1515);const s=(0,r(7865).F4)(o||(o=(0,l.Z)(["\n  50% {\n    color: rgba(0, 0, 0, 0);\n  }\n"]))),d=(0,i.Z)("span",{target:"edlqvik0"})((e=>{let{includeDot:t,shouldBlink:r,theme:o}=e;return{...t?{"&::before":{opacity:1,content:'"\u2022"',animation:"none",color:o.colors.gray,margin:"0 5px"}}:{},...r?{color:o.colors.red,animationName:"".concat(s),animationDuration:"0.5s",animationIterationCount:5}:{}}}),"");var c=r(40864);const u=e=>{let{dirty:t,value:r,maxLength:o,className:l,type:i="single",inForm:s}=e;const u=[],p=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u.push((0,c.jsx)(d,{includeDot:u.length>0,shouldBlink:t,children:e},u.length))};if(t){const e=s?"submit form":"apply";if("multiline"===i){const t=(0,n.Ge)()?"\u2318":"Ctrl";p("Press ".concat(t,"+Enter to ").concat(e))}else"single"===i&&p("Press Enter to ".concat(e))}return o&&("chat"!==i||t)&&p("".concat(r.length,"/").concat(o),t&&r.length>=o),(0,c.jsx)(a.X7,{"data-testid":"InputInstructions",className:l,children:u})}},87814:(e,t,r)=>{r.d(t,{K:()=>n});var o=r(50641);class n{constructor(){this.formClearListener=void 0,this.lastWidgetMgr=void 0,this.lastFormId=void 0}manageFormClearListener(e,t,r){(0,o.bb)(this.formClearListener)&&this.lastWidgetMgr===e&&this.lastFormId===t||(this.disconnect(),(0,o.bM)(t)&&(this.formClearListener=e.addFormClearedListener(t,r),this.lastWidgetMgr=e,this.lastFormId=t))}disconnect(){var e;null===(e=this.formClearListener)||void 0===e||e.disconnect(),this.formClearListener=void 0,this.lastWidgetMgr=void 0,this.lastFormId=void 0}}},67175:(e,t,r)=>{r.r(t),r.d(t,{default:()=>j});var o=r(66845),n=r(20607),a=r(89997),l=r(25621),i=r(52347),s=r(82534),d=r(70479),c=r.n(d),u=r(50641),p=r(87814),m=r(23849),b=r(16295),g=r(48266),h=r(8879),f=r(68411),v=r(46927),y=r(79986),I=r(98478),x=r(86659),w=r(1515);const C=(0,w.Z)("div",{target:"e116k4er3"})((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",height:t.sizes.minElementHeight,borderWidth:t.sizes.borderWidth,borderStyle:"solid",borderColor:t.colors.widgetBorderColor||t.colors.widgetBackgroundColor||t.colors.bgColor,transitionDuration:"200ms",transitionProperty:"border",transitionTimingFunction:"cubic-bezier(0.2, 0.8, 0.4, 1)",borderRadius:t.radii.default,overflow:"hidden","&.focused":{borderColor:t.colors.primary},input:{MozAppearance:"textfield","&::-webkit-inner-spin-button, &::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:t.spacing.none}}}}),""),T=(0,w.Z)("div",{target:"e116k4er2"})({name:"76z9jo",styles:"display:flex;flex-direction:row;align-self:stretch"}),k=(0,w.Z)("button",{target:"e116k4er1"})((e=>{let{theme:t}=e;return{margin:t.spacing.none,border:"none",height:t.sizes.full,display:"flex",alignItems:"center",width:"".concat(32,"px"),justifyContent:"center",color:t.colors.bodyText,transition:"color 300ms, backgroundColor 300ms",backgroundColor:t.colors.widgetBackgroundColor||t.colors.secondaryBg,"&:hover:enabled, &:focus:enabled":{color:t.colors.white,backgroundColor:t.colors.primary,transition:"none",outline:"none"},"&:active":{outline:"none",border:"none"},"&:last-of-type":{borderTopRightRadius:t.radii.default,borderBottomRightRadius:t.radii.default},"&:disabled":{cursor:"not-allowed",color:t.colors.fadedText40}}}),""),R=(0,w.Z)("div",{target:"e116k4er0"})((e=>{let{theme:t,clearable:r}=e;return{position:"absolute",marginRight:t.spacing.twoXS,left:0,right:"".concat(64+(r?12:0),"px")}}),"");var D=r(40864);const F=e=>{let{step:t,dataType:r}=e;return t||(r===b.Y2.DataType.INT?1:.01)},N=e=>{let{value:t,format:r,step:o,dataType:n}=e;if((0,u.le)(t))return null;let a=function(e){return(0,u.le)(e)||""===e?void 0:e}(r);if((0,u.le)(a)&&(0,u.bb)(o)){const e=o.toString();if(n===b.Y2.DataType.FLOAT&&0!==o&&e.includes(".")){const t=e.split(".")[1].length;a="%0.".concat(t,"f")}}if((0,u.le)(a))return t.toString();try{return(0,i.sprintf)(a,t)}catch(l){return(0,m.KE)("Error in sprintf(".concat(a,", ").concat(t,"): ").concat(l)),String(t)}},j=(0,l.b)((e=>{var t;let{disabled:r,element:l,widgetMgr:i,width:d,theme:m,fragmentId:w}=e;const{dataType:j,id:W,formId:L,default:S,format:B}=l,M=l.hasMin?l.min:-1/0,Z=l.hasMax?l.max:1/0,[E,V]=o.useState(F(l)),U=(e=>{var t;const r=e.element.dataType===b.Y2.DataType.INT?e.widgetMgr.getIntValue(e.element):e.widgetMgr.getDoubleValue(e.element);return null!==(t=null!==r&&void 0!==r?r:e.element.default)&&void 0!==t?t:null})({element:l,widgetMgr:i}),[z,A]=o.useState(!1),[_,Y]=o.useState(U),[K,O]=o.useState(N({value:U,...l,step:E})),[P,H]=o.useState(!1),G=o.useRef(null),X=o.useRef(new p.K),$=o.useRef(c()("number_input_")),q=((e,t,r)=>!(0,u.le)(e)&&e-t>=r)(_,E,M),J=((e,t,r)=>!(0,u.le)(e)&&e+t<=r)(_,E,Z);o.useEffect((()=>{V(F({step:l.step,dataType:l.dataType}))}),[l.dataType,l.step]);const Q=o.useCallback((e=>{let{value:t,source:r}=e;if((0,u.bb)(t)&&(M>t||t>Z)){var o;null===(o=G.current)||void 0===o||o.reportValidity()}else{var n;const e=null!==(n=null!==t&&void 0!==t?t:S)&&void 0!==n?n:null;switch(j){case b.Y2.DataType.INT:i.setIntValue({id:W,formId:L},e,r,w);break;case b.Y2.DataType.FLOAT:i.setDoubleValue({id:W,formId:L},e,r,w);break;default:throw new Error("Invalid data type")}A(!1),Y(e),O(N({value:e,dataType:j,format:B,step:E}))}}),[M,Z,G,i,w,E,j,W,L,S,B]),ee=()=>{const{value:e}=l;l.setValue=!1,Y(null!==e&&void 0!==e?e:null),O(N({value:null!==e&&void 0!==e?e:null,...l,step:E})),Q({value:null!==e&&void 0!==e?e:null,source:{fromUi:!1}})};o.useEffect((()=>{const e=X.current;return l.setValue?ee():Q({value:_,source:{fromUi:!1}}),()=>{e.disconnect()}}),[]),l.setValue&&ee();const te=(0,u.le)(l.default)&&!r;X.current.manageFormClearListener(i,l.formId,(()=>{var e;Y(null!==(e=l.default)&&void 0!==e?e:null),Q({value:_,source:{fromUi:!0}})}));const re=o.useCallback((()=>{J&&(A(!0),Q({value:(null!==_&&void 0!==_?_:M)+E,source:{fromUi:!0}}))}),[_,M,E,J]),oe=o.useCallback((()=>{q&&(A(!0),Q({value:(null!==_&&void 0!==_?_:Z)-E,source:{fromUi:!0}}))}),[_,Z,E,q]),ne=o.useCallback((e=>{const{key:t}=e;switch(t){case"ArrowUp":e.preventDefault(),re();break;case"ArrowDown":e.preventDefault(),oe()}}),[re,oe]),ae=o.useCallback((e=>{"Enter"===e.key&&(z&&Q({value:_,source:{fromUi:!0}}),(0,u.$b)({formId:L})&&i.submitForm(L,w))}),[z,_,Q,i,L,w]);return(0,D.jsxs)("div",{className:"stNumberInput","data-testid":"stNumberInput",style:{width:d},children:[(0,D.jsx)(I.O,{label:l.label,disabled:r,labelVisibility:(0,u.iF)(null===(t=l.labelVisibility)||void 0===t?void 0:t.value),htmlFor:$.current,children:l.help&&(0,D.jsx)(x.dT,{children:(0,D.jsx)(h.Z,{content:l.help,placement:f.u.TOP_RIGHT})})}),(0,D.jsxs)(C,{className:P?"focused":"","data-testid":"stNumberInputContainer",children:[(0,D.jsx)(s.Z,{type:"number",inputRef:G,value:null!==K&&void 0!==K?K:"",placeholder:l.placeholder,onBlur:()=>(z&&Q({value:_,source:{fromUi:!0}}),void H(!1)),onFocus:()=>{H(!0)},onChange:e=>(e=>{const{value:t}=e.target;if(""===t)A(!0),Y(null),O(null);else{let e;e=l.dataType===b.Y2.DataType.INT?parseInt(t,10):parseFloat(t),A(!0),Y(e),O(t)}})(e),onKeyPress:e=>ae(e),onKeyDown:e=>ne(e),clearable:te,clearOnEscape:te,disabled:r,"aria-label":l.label,id:$.current,overrides:{ClearIcon:{props:{overrides:{Svg:{style:{color:m.colors.darkGray,transform:"scale(1.4)",width:m.spacing.twoXL,marginRight:"-1.25em",":hover":{fill:m.colors.bodyText}}}}}},Input:{props:{"data-testid":"stNumberInput-Input",step:E,min:M,max:Z},style:{lineHeight:m.lineHeights.inputWidget,paddingRight:m.spacing.sm,paddingLeft:m.spacing.sm,paddingBottom:m.spacing.sm,paddingTop:m.spacing.sm}},InputContainer:{style:()=>({borderTopRightRadius:0,borderBottomRightRadius:0})},Root:{style:()=>({borderTopRightRadius:0,borderBottomRightRadius:0,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:0,borderBottomWidth:0})}}}),d>g.A.hideNumberInputControls&&(0,D.jsxs)(T,{children:[(0,D.jsx)(k,{className:"step-down","data-testid":"stNumberInput-StepDown",onClick:oe,disabled:!q||r,tabIndex:-1,children:(0,D.jsx)(v.Z,{content:n.W,size:"xs",color:q?"inherit":"disabled"})}),(0,D.jsx)(k,{className:"step-up","data-testid":"stNumberInput-StepUp",onClick:re,disabled:!J||r,tabIndex:-1,children:(0,D.jsx)(v.Z,{content:a.v,size:"xs",color:J?"inherit":"disabled"})})]})]}),d>g.A.hideWidgetDetails&&(0,D.jsx)(R,{clearable:te,children:(0,D.jsx)(y.Z,{dirty:z,value:null!==K&&void 0!==K?K:"",inForm:(0,u.$b)({formId:l.formId})})})]})}))}}]);