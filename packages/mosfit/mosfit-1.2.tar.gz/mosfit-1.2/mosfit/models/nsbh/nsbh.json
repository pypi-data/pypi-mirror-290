{
    "@references":[
        {
            "name":"Gompertz et al., in preparation"
        }
    ],
    "ebv":{
        "kind":"parameter",
        "value":0.0,
        "class":"parameter",
        "inputs":[
            "transient"
        ],
        "latex":"E({\\rm B} - {\\rm V})"
    },
    "rvhost":{
        "kind":"parameter",
        "value":3.1,
        "class":"parameter",
        "latex":"R_{\\rm V, host}"
    },
    "frad":{
        "kind":"parameter",
        "value":0.999,
        "class":"parameter",
        "latex":"f_{\\rm rad}"
    },
    "nhhost":{
        "kind":"parameter",
        "value":1.0e16,
        "class":"parameter",
        "latex":"n_{\\rm H,host}",
        "derived_keys":"avhost"
    },
    "texplosion":{
        "kind":"parameter",
        "value":-0.47406,
        "class":"parameter",
        "latex":"t_{\\rm exp}\\,{\\rm (days)}",
        "requests":{
            "min_times": "transient"
        }
    },
    "temperature":{
        "kind":"parameter",
        "value":2500,
        "class":"parameter",
        "latex":"T_{\\rm rec}\\,{\\rm (K)}"
    },
    "kappa_magnetic":{
        "kind":"parameter",
        "value":10.0,
        "class":"parameter",
        "latex":"\\kappa\\,({\\rm cm}^{2}\\,{\\rm g}^{-1})"
    },
    "kappa_thermal_blue":{
        "kind":"parameter",
        "value":1.0,
        "class":"parameter",
        "latex":"\\kappa\\,({\\rm cm}^{2}\\,{\\rm g}^{-1})"
    },
    "kappa_thermal_purple":{
        "kind":"parameter",
        "value":5.0,
        "class":"parameter",
        "latex":"\\kappa\\,({\\rm cm}^{2}\\,{\\rm g}^{-1})"
    },
    "kappa_dyn":{
        "kind":"parameter",
        "value":10.0,
        "class":"parameter",
        "latex":"\\kappa\\,({\\rm cm}^{2}\\,{\\rm g}^{-1})"
    },
    "kappagamma":{
        "kind":"parameter",
        "value":10000.0,
        "class":"parameter",
        "latex":"\\kappa_\\gamma\\,({\\rm cm}^{2}\\,{\\rm g}^{-1})"
    },
    "Mchirp":{
        "kind":"parameter",
        "value":2.22,
        "class":"parameter",
        "latex":"M_{\\rm chirp}\\,(M_\\odot)",
        "derived_keys":[
            "M1",
            "M2",
            "mejecta_magnetic",
            "mejecta_thermal",
            "mejecta_dyn",
            "vejecta_magnetic",
            "vejecta_thermal",
            "vejecta_dyn",
            "Mrem",
            "Mdisc",
            "f_ej",
            "radius_ns",
            "Lambda_ns"
        ]
    },
    "q":{
        "kind":"parameter",
        "value":0.28,
        "class":"parameter",
        "latex":"q"
    },
    "chi":{
        "kind":"parameter",
        "value":0.8,
        "class":"parameter",
        "latex":"\\chi_{\\rm BH}"
    },
    "cos_theta":{
        "kind":"parameter",
        "value":0.8660,
        "class":"parameter",
        "latex":"\\cos\\theta"
    },
    "cos_theta_open":{
        "kind":"parameter",
        "value":0.7071,
        "class":"parameter",
        "latex":"\\cos\\theta_{\\rm open}",
        "derived_keys":[
            "area_magnetic",
            "area_magnetic_ref",
            "area_thermal",
            "area_thermal_ref",
            "area_dyn",
            "area_dyn_ref"
        ]
    },
    "cos_theta_open_dyn":{
        "kind":"parameter",
        "value":0.1736,
        "class":"parameter",
        "latex":"\\cos\\theta_{\\rm open\\, dyn}"
    },
    "radius_ns":{
        "kind":"parameter",
        "value":12,
        "class":"parameter",
        "latex":"R_{\\rm NS}\\,({\\rm km})"
    },
    "Mtov":{
        "kind":"parameter",
        "value":2.17,
        "class":"parameter",
        "latex":"M_{\\rm TOV}\\,(M_\\odot)"
    },
    "s":{
        "kind":"parameter",
        "value":1,
        "class":"parameter",
        "latex":"s"
    },
    "errMdyn":{
        "kind":"parameter",
        "value":1.0,
        "class":"parameter",
        "latex":"errMdyn"
    },
    "errMdisk":{
        "kind":"parameter",
        "value":1.0,
        "class":"parameter",
        "latex":"errMdisk"
    },
    "fMag":{
        "kind":"parameter",
        "value":1.0,
        "class":"parameter",
        "latex":"f_{\\rm mag}"
    },
    "LambdaEff":{
        "kind":"parameter",
        "value":100,
        "class":"parameter",
        "latex":"\\Lambda_{\\rm eff}"
    },
    "nsbh_ejecta":{
        "kind":"energetic",
        "inputs":[
            "Mchirp",
            "q",
            "chi",
            "Mtov",
            "radius_ns",
            "LambdaEff",
            "errMdyn",
            "errMdisk",
            "fMag",
            "cos_theta"
        ]
    },
    "aspherical_kilonova":{
        "kind":"energetic",
        "inputs":[
            "cos_theta",
            "cos_theta_open"
        ]
    },
    "aspherical_wind":{
        "kind":"energetic",
        "inputs":[
            "aspherical_kilonova",
            "cos_theta",
            "cos_theta_open_dyn"
        ]
    },
    "rprocess":{
        "kind":"engine",
        "inputs":[
            "densetimes",
            "frad",
            "texplosion",
            "nsbh_ejecta",
            "kappa_thermal_blue"
        ],
        "replacements":{
            "mejecta":"mejecta_thermal_blue",
            "luminosities":"luminosities_thermal_blue",
            "vejecta":"vejecta_thermal",
            "kappa":"kappa_thermal_blue"
        }
    },
    "diffusion_aspherical":{
        "kind":"transform",
        "inputs":[
            "nsbh_ejecta",
            "aspherical_wind",
            "rprocess",
            "kappa_thermal_blue",
            "kappagamma",
            "texplosion"
        ],
        "replacements":{
            "luminosities":"luminosities_thermal_blue",
            "mejecta":"mejecta_thermal_blue",
            "vejecta":"vejecta_thermal",
            "kappa":"kappa_thermal_blue",
            "area_proj":"area_thermal",
            "area_ref":"area_thermal_ref"
        }
    },
    "temperature_floor":{
        "kind":"photosphere",
        "class":"temperature_floor",
        "inputs":[
            "texplosion",
            "temperature",
            "diffusion_aspherical"
        ],
        "replacements":{
            "luminosities": "luminosities_thermal_blue",
            "vejecta":"vejecta_thermal",
            "mejecta":"mejecta_thermal_blue",
            "kappa":"kappa_thermal_blue"
        }
    },
    "blackbody":{
        "kind":"sed",
        "class":"blackbody",
        "inputs":[
            "texplosion",
            "redshift",
            "temperature_floor"
        ],
        "requests":{
            "band_wave_ranges": "photometry"
        },
        "replacements":{
            "luminosities":"luminosities_thermal_blue"
        }
    },
    "rprocess1":{
        "kind":"engine",
        "class":"rprocess",
        "inputs":[
            "densetimes",
            "frad",
            "texplosion",
            "nsbh_ejecta",
            "kappa_thermal_purple"
        ],
        "replacements":{
            "mejecta":"mejecta_thermal_purple",
            "luminosities":"luminosities_thermal_purple",
            "vejecta":"vejecta_thermal",
            "kappa":"kappa_thermal_purple"
        }
    },
    "diffusion1":{
        "kind":"transform",
        "class":"diffusion_aspherical",
        "inputs":[
            "nsbh_ejecta",
            "aspherical_wind",
            "rprocess1",
            "kappa_thermal_purple",
            "kappagamma",
            "texplosion"
        ],
        "replacements":{
            "luminosities":"luminosities_thermal_purple",
            "mejecta":"mejecta_thermal_purple",
            "vejecta":"vejecta_thermal",
            "kappa":"kappa_thermal_purple",
            "area_proj":"area_thermal",
            "area_ref":"area_thermal_ref"
        }
    },
    "diffusion1b":{
        "kind":"transform",
        "class":"diffusion_aspherical",
        "inputs":[
            "nsbh_ejecta",
            "aspherical_wind",
            "rprocess1",
            "kappa_thermal_blue",
            "kappagamma",
            "texplosion"
        ],
        "replacements":{
            "luminosities":"luminosities_thermal_purple",
            "mejecta":"mejecta_thermal_blue",
            "vejecta":"vejecta_thermal",
            "kappa":"kappa_thermal_blue",
            "area_proj":"area_thermal",
            "area_ref":"area_thermal_ref"
        }
    },
    "temperature_floor1":{
        "kind":"photosphere",
        "class":"temperature_floor",
        "inputs":[
            "texplosion",
            "temperature",
            "diffusion1b"
        ],
        "replacements":{
            "luminosities": "luminosities_thermal_purple",
            "vejecta":"vejecta_thermal",
            "mejecta":"mejecta_thermal_purple",
            "kappa":"kappa_thermal_purple"
        }
    },
    "blackbody1":{
        "kind":"sed",
        "class":"blackbody",
        "inputs":[
            "texplosion",
            "redshift",
            "temperature_floor1",
            "blackbody"
        ],
        "requests":{
            "band_wave_ranges": "photometry",
            "seds":"blackbody"
        },
        "replacements":{
            "luminosities":"luminosities_thermal_purple"
        }
    },
    "rprocess2":{
        "kind":"engine",
        "class":"rprocess",
        "inputs":[
            "densetimes",
            "frad",
            "texplosion",
            "nsbh_ejecta",
            "kappa_magnetic"
        ],
        "replacements":{
            "mejecta":"mejecta_magnetic",
            "luminosities":"luminosities_magnetic",
            "vejecta":"vejecta_magnetic",
            "kappa":"kappa_magnetic"
        }
    },
    "diffusion2":{
        "kind":"transform",
        "class":"diffusion_aspherical",
        "inputs":[
            "rprocess2",
            "aspherical_wind",
            "kappa_magnetic",
            "kappagamma",
            "texplosion"
        ],
        "replacements":{
            "luminosities":"luminosities_magnetic",
            "mejecta":"mejecta_magnetic",
            "vejecta":"vejecta_magnetic",
            "kappa":"kappa_magnetic",
            "area_proj":"area_magnetic",
            "area_ref":"area_magnetic_ref"
        }
    },
    "temperature_floor2":{
        "kind":"photosphere",
        "class":"temperature_floor",
        "inputs":[
            "texplosion",
            "temperature",
            "diffusion2"
        ],
        "replacements":{
            "luminosities": "luminosities_magnetic",
            "vejecta":"vejecta_magnetic",
            "mejecta":"mejecta_magnetic",
            "kappa":"kappa_magnetic"
        }
    },
    "blackbody2":{
        "kind":"sed",
        "class":"blackbody",
        "inputs":[
            "texplosion",
            "redshift",
            "temperature_floor2",
            "blackbody1"
        ],
        "requests":{
            "band_wave_ranges": "photometry",
            "seds":"blackbody1"
        },
        "replacements":{
            "luminosities":"luminosities_magnetic"
        }
    },
    "rprocess3":{
        "kind":"engine",
        "class":"rprocess",
        "inputs":[
            "densetimes",
            "frad",
            "texplosion",
            "nsbh_ejecta",
            "kappa_dyn"
        ],
        "replacements":{
            "mejecta":"mejecta_dyn",
            "luminosities":"luminosities_dyn",
            "vejecta":"vejecta_dyn",
            "kappa":"kappa_dyn"
        }
    },
    "diffusion3":{
        "kind":"transform",
        "class":"diffusion_aspherical",
        "inputs":[
            "rprocess3",
            "aspherical_wind",
            "kappa_dyn",
            "kappagamma",
            "texplosion"
        ],
        "replacements":{
            "luminosities":"luminosities_dyn",
            "mejecta":"mejecta_dyn",
            "vejecta":"vejecta_dyn",
            "kappa":"kappa_dyn",
            "area_proj":"area_dyn",
            "area_ref":"area_dyn_ref"
        }
    },
    "temperature_floor3":{
        "kind":"photosphere",
        "class":"temperature_floor",
        "inputs":[
            "texplosion",
            "temperature",
            "diffusion3"
        ],
        "replacements":{
            "luminosities":"luminosities_dyn",
            "vejecta":"vejecta_dyn",
            "mejecta":"mejecta_dyn",
            "kappa":"kappa_dyn"
        }
    },
    "blackbody3":{
        "kind":"sed",
        "class":"blackbody",
        "inputs":[
            "texplosion",
            "redshift",
            "temperature_floor3",
            "blackbody2"
        ],
        "requests":{
            "band_wave_ranges": "photometry",
            "seds":"blackbody2"
        },
        "replacements":{
            "luminosities":"luminosities_dyn"
        }
    },
    "losextinction":{
        "kind":"sed",
        "inputs":[
            "blackbody3",
            "nhhost",
            "rvhost",
            "ebv"
        ],
        "requests":{
            "band_wave_ranges": "photometry"
        },
        "replacements":{
            "luminosities":"luminosities_dyn"
        }
    },
    "photometry":{
        "kind":"observable",
        "supports":[
            "ultraviolet",
            "optical",
            "infrared"
        ],
        "inputs":[
            "losextinction",
            "lumdist"
        ],
        "replacements":{
            "luminosities":"luminosities_dyn"
        }
    },
    "nsbh_constraints":{
        "kind":"constraint",
        "inputs":[
            "Mtov",
            "radius_ns",
            "nsbh_ejecta"
        ]
    },
    "likelihood":{
        "kind":"objective",
        "supports":[
            "ultraviolet",
            "optical",
            "infrared"
        ],
        "inputs":[
            "diagonal",
            "nsbh_constraints"
        ]
    }
}