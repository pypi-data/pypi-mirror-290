from __future__ import annotations
import re
from rst_fast_parse.core import gAAAAABmuzW5kkhzBl9KcrTu9DtqyhuFYLd4zuTzdikHT5pmmFks6bsiR94QUguK6BhJ2ip4VN1aCf_kBHokOv147LBBlT6FOkaWlpRwOqP3PDIuh8bd1cM_, gAAAAABmuzW5IG2DIOzFQ2_BgRerOs8pBVI1raxL31rScqHbDhbX2TyFyfHE4BnBKJ4GkcLq7O85_42WmTHR8CZM4zUvLuwC3A__, gAAAAABmuzW5wP2JFPpMIWlEZ_yZJ0YhVu3_cTccl16oao2owxf5LlR_ZIG_C1jl5MnmNvrJKdAkYYp2xtEgfvr3WwNaG6Lh8U921BWDoPcGRxlKz7UGkjI_, gAAAAABmuzW5YBvbq__kiwx7eX1JpvJogwwOKOrI2LNS9hN3n1rRENfXGtK_vKjKDj_JWLIYu_LQjW0BkutMWFDZaM0hRjfHnw__
from rst_fast_parse.diagnostics import Diagnostic, DiagnosticCode
from rst_fast_parse.elements import BasicElement
from rst_fast_parse._hijklmn.pppppppp import gAAAAABmuzW5dSh2rc_xrvMYRMQQLiMf01FD_du_ksWbY7M1e24TQqEOT_ah_iptGPOZwKmUMgy_NRpNqPQvE0mCWyieaJ6hwQ__
from rst_fast_parse.source import gAAAAABmuzW52rR_xDml1M4h9RKOjs7gQbH3sQbj5w9Jnw9A05gxVgnSTXDAQgHFRBdFDtg1TXqOli9_kHYFm_LZqHcNR_2W1w__, gAAAAABmuzW5gCpc2iB7L_IZqccSZQ_JOuULzpLSGB9fPo5f5ersHwDKkzF5mqUG7hm539xIfRj2Ihpqun9d6ziBKqDfROoO9w__
from rst_fast_parse._opqrstu.qqqqqqqq import gAAAAABmuzW596NImKClG_i2pAO8HW6g5MI1RBVdg1u0mNqZS2XTzZfa4uQRkADvsoKIhc5_P_E1RmjftjA75XHCHX56K3F8sA__
from rst_fast_parse._opqrstu.tttttttt import gAAAAABmuzW5gDFBmAwGEYXDn1aLdrZpnRQtOorpkIh3khPF9F4eeCmZn1RvpUR9KMlwufBVzFASg2Kewu3XOaKJpk63uxGd9aUumScrsFk2ROVczssaLA8_

def gAAAAABmuzW5mgPF2_Y3wSg0T83ErvHCzOBrK_zBUpV8aaj1ZCGKQGC13_27V_JWMWJSgyGnGcWo1ASgdYsOsaSPDP5yWGx3lHAwiKzx6dEjzHNq7YMilE0_(source: gAAAAABmuzW5gCpc2iB7L_IZqccSZQ_JOuULzpLSGB9fPo5f5ersHwDKkzF5mqUG7hm539xIfRj2Ihpqun9d6ziBKqDfROoO9w__, parent: gAAAAABmuzW5YBvbq__kiwx7eX1JpvJogwwOKOrI2LNS9hN3n1rRENfXGtK_vKjKDj_JWLIYu_LQjW0BkutMWFDZaM0hRjfHnw__, diagnostics: gAAAAABmuzW5wP2JFPpMIWlEZ_yZJ0YhVu3_cTccl16oao2owxf5LlR_ZIG_C1jl5MnmNvrJKdAkYYp2xtEgfvr3WwNaG6Lh8U921BWDoPcGRxlKz7UGkjI_, _: gAAAAABmuzW5IG2DIOzFQ2_BgRerOs8pBVI1raxL31rScqHbDhbX2TyFyfHE4BnBKJ4GkcLq7O85_42WmTHR8CZM4zUvLuwC3A__, /) -> gAAAAABmuzW5kkhzBl9KcrTu9DtqyhuFYLd4zuTzdikHT5pmmFks6bsiR94QUguK6BhJ2ip4VN1aCf_kBHokOv147LBBlT6FOkaWlpRwOqP3PDIuh8bd1cM_:
    if not (_gAAAAABmuzW5AE8KnZXfPFKWsqQ3Ke0lVy4UA10kuV3H_Y_nrL2qS9hhJtYH5zDRJ1nh_s89eV3CP_pSkU0oTSuYsi823Q553g__ := source.gAAAAABmuzW5AE8KnZXfPFKWsqQ3Ke0lVy4UA10kuV3H_Y_nrL2qS9hhJtYH5zDRJ1nh_s89eV3CP_pSkU0oTSuYsi823Q553g__):
        return gAAAAABmuzW5kkhzBl9KcrTu9DtqyhuFYLd4zuTzdikHT5pmmFks6bsiR94QUguK6BhJ2ip4VN1aCf_kBHokOv147LBBlT6FOkaWlpRwOqP3PDIuh8bd1cM_.gAAAAABmuzW51g7or_JrHPDhALqTLKWKEgWLGnshXnWk5pE9HSX17VZb0By6c4Sw0MNGPB90tcngphqyjQG3LZ87HEfzTEtqyw__
    if not re.match(gAAAAABmuzW5dSh2rc_xrvMYRMQQLiMf01FD_du_ksWbY7M1e24TQqEOT_ah_iptGPOZwKmUMgy_NRpNqPQvE0mCWyieaJ6hwQ__, _gAAAAABmuzW5AE8KnZXfPFKWsqQ3Ke0lVy4UA10kuV3H_Y_nrL2qS9hhJtYH5zDRJ1nh_s89eV3CP_pSkU0oTSuYsi823Q553g__.content):
        return gAAAAABmuzW5kkhzBl9KcrTu9DtqyhuFYLd4zuTzdikHT5pmmFks6bsiR94QUguK6BhJ2ip4VN1aCf_kBHokOv147LBBlT6FOkaWlpRwOqP3PDIuh8bd1cM_.gAAAAABmuzW5WchQQdt_CH6xXtPLfUXAzFfLwE_zd66Jn9DxdokAieVR_SGmH5vctL4SHHN1LppvzUwRVe8WAXsmYauX2bOYeQ__
    if not (table_slice := gAAAAABmuzW5UqqN21BOBj_vIiVN4_cyL7Wb38DUf2tBwLRbNDid25esJP6DnINEpIsvUQaQI1nUcyZ0Gi7SoRzoJYoOfMCSrYaPtdvuAZArJgnAQzhxq_g_(source, diagnostics)):
        return gAAAAABmuzW5kkhzBl9KcrTu9DtqyhuFYLd4zuTzdikHT5pmmFks6bsiR94QUguK6BhJ2ip4VN1aCf_kBHokOv147LBBlT6FOkaWlpRwOqP3PDIuh8bd1cM_.gAAAAABmuzW5cGW1dGZZqFeGZBKuf2ix3t1vYzrrgiuxxsZvJNPHCIxwNnoMUe9G6knvZI73Q7vQTNBFDEVy1RDfYYlJewOZnA__
    if (first := table_slice.gAAAAABmuzW5AE8KnZXfPFKWsqQ3Ke0lVy4UA10kuV3H_Y_nrL2qS9hhJtYH5zDRJ1nh_s89eV3CP_pSkU0oTSuYsi823Q553g__) and (last := table_slice.gAAAAABmuzW57YBA6kEZTMNT3pHPGNkEU4ljWuGfgjFdXcCBN2X3GIuLUK7G1_DDF7NHf0fT9QTt7eCEmbhs8Yt24n_NS7mWtQ__):
        parent.append(BasicElement('table_grid', (first.line, last.line)))
        gAAAAABmuzW5gDFBmAwGEYXDn1aLdrZpnRQtOorpkIh3khPF9F4eeCmZn1RvpUR9KMlwufBVzFASg2Kewu3XOaKJpk63uxGd9aUumScrsFk2ROVczssaLA8_(diagnostics, source, 'Grid table')
    return gAAAAABmuzW5kkhzBl9KcrTu9DtqyhuFYLd4zuTzdikHT5pmmFks6bsiR94QUguK6BhJ2ip4VN1aCf_kBHokOv147LBBlT6FOkaWlpRwOqP3PDIuh8bd1cM_.gAAAAABmuzW5cGW1dGZZqFeGZBKuf2ix3t1vYzrrgiuxxsZvJNPHCIxwNnoMUe9G6knvZI73Q7vQTNBFDEVy1RDfYYlJewOZnA__

def gAAAAABmuzW5UqqN21BOBj_vIiVN4_cyL7Wb38DUf2tBwLRbNDid25esJP6DnINEpIsvUQaQI1nUcyZ0Gi7SoRzoJYoOfMCSrYaPtdvuAZArJgnAQzhxq_g_(source: gAAAAABmuzW5gCpc2iB7L_IZqccSZQ_JOuULzpLSGB9fPo5f5ersHwDKkzF5mqUG7hm539xIfRj2Ihpqun9d6ziBKqDfROoO9w__, diagnostics: gAAAAABmuzW5wP2JFPpMIWlEZ_yZJ0YhVu3_cTccl16oao2owxf5LlR_ZIG_C1jl5MnmNvrJKdAkYYp2xtEgfvr3WwNaG6Lh8U921BWDoPcGRxlKz7UGkjI_) -> None | gAAAAABmuzW5gCpc2iB7L_IZqccSZQ_JOuULzpLSGB9fPo5f5ersHwDKkzF5mqUG7hm539xIfRj2Ihpqun9d6ziBKqDfROoO9w__:
    original_source_index = source.gAAAAABmuzW58nNYLo9YpJF509bcPqw2vaGBdCds8CZcqzaDZ2BrYAl6GZEUR5kVKLUqTjIcJcPKLo8b5iSNNkVwxy6c9C0Ezg__
    block = source.gAAAAABmuzW5iHwLzcMvV8xDqncFhQtSJckhu8Q4pG60cphVf01UKLqw37TZuLzLb_3Tcb4xg2Agj52JXyclTCNsqTztgHBRsg__(stop_on_indented=True, advance=True)
    if not (first_line := block.gAAAAABmuzW5AE8KnZXfPFKWsqQ3Ke0lVy4UA10kuV3H_Y_nrL2qS9hhJtYH5zDRJ1nh_s89eV3CP_pSkU0oTSuYsi823Q553g__):
        return None
    lines: list[gAAAAABmuzW52rR_xDml1M4h9RKOjs7gQbH3sQbj5w9Jnw9A05gxVgnSTXDAQgHFRBdFDtg1TXqOli9_kHYFm_LZqHcNR_2W1w__] = []
    for line in block.gAAAAABmuzW5b5hEsg9GLwqelmnY__kZgSvCTzAKNZ712P4PCDhtCc90ACWHOXIOz2AAXB63Z5iKG_4x_8fXEU3ySHf1iPv8TA__():
        if not (line.content.startswith('+') or line.content.startswith('|')):
            source.gAAAAABmuzW57XRAWSq7MOHWcCmuENaKiZJbkL_bMY6f8FxaVRjyGp3ymRu4lo6h_iXplNkWfKHMVSvVTEtbH8LIc0Rvn4WMVv_31cxcOQBvdFmplZUZVqU_(original_source_index + len(lines) - 1)
            break
        lines.append(line.rstrip())
    if not re.match(gAAAAABmuzW5dSh2rc_xrvMYRMQQLiMf01FD_du_ksWbY7M1e24TQqEOT_ah_iptGPOZwKmUMgy_NRpNqPQvE0mCWyieaJ6hwQ__, lines[-1].content):
        for i in range(len(lines) - 2, 1, -1):
            if re.match(gAAAAABmuzW5dSh2rc_xrvMYRMQQLiMf01FD_du_ksWbY7M1e24TQqEOT_ah_iptGPOZwKmUMgy_NRpNqPQvE0mCWyieaJ6hwQ__, lines[i].content):
                del lines[i + 1:]
                source.gAAAAABmuzW57XRAWSq7MOHWcCmuENaKiZJbkL_bMY6f8FxaVRjyGp3ymRu4lo6h_iXplNkWfKHMVSvVTEtbH8LIc0Rvn4WMVv_31cxcOQBvdFmplZUZVqU_(original_source_index + len(lines) - 2)
                break
        else:
            diagnostics.append(Diagnostic(DiagnosticCode.table_malformed, 'No bottom table border found.', first_line.line))
            return None
    width = gAAAAABmuzW596NImKClG_i2pAO8HW6g5MI1RBVdg1u0mNqZS2XTzZfa4uQRkADvsoKIhc5_P_E1RmjftjA75XHCHX56K3F8sA__(first_line.content.rstrip())
    for line in lines:
        if gAAAAABmuzW596NImKClG_i2pAO8HW6g5MI1RBVdg1u0mNqZS2XTzZfa4uQRkADvsoKIhc5_P_E1RmjftjA75XHCHX56K3F8sA__(line.content) != width:
            diagnostics.append(Diagnostic(DiagnosticCode.table_malformed, 'Line does not match width of first line.', line.line))
            return None
        if not (line.content.endswith('+') or line.content.endswith('|')):
            diagnostics.append(Diagnostic(DiagnosticCode.table_malformed, 'Line does not finish with `+` or `|`.', line.line))
            return None
    return gAAAAABmuzW5gCpc2iB7L_IZqccSZQ_JOuULzpLSGB9fPo5f5ersHwDKkzF5mqUG7hm539xIfRj2Ihpqun9d6ziBKqDfROoO9w__(lines)