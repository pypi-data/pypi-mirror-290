from __future__ import annotations
import re
from rst_fast_parse.core import gAAAAABmuzW5kkhzBl9KcrTu9DtqyhuFYLd4zuTzdikHT5pmmFks6bsiR94QUguK6BhJ2ip4VN1aCf_kBHokOv147LBBlT6FOkaWlpRwOqP3PDIuh8bd1cM_, gAAAAABmuzW5IG2DIOzFQ2_BgRerOs8pBVI1raxL31rScqHbDhbX2TyFyfHE4BnBKJ4GkcLq7O85_42WmTHR8CZM4zUvLuwC3A__, gAAAAABmuzW5wP2JFPpMIWlEZ_yZJ0YhVu3_cTccl16oao2owxf5LlR_ZIG_C1jl5MnmNvrJKdAkYYp2xtEgfvr3WwNaG6Lh8U921BWDoPcGRxlKz7UGkjI_, gAAAAABmuzW5YBvbq__kiwx7eX1JpvJogwwOKOrI2LNS9hN3n1rRENfXGtK_vKjKDj_JWLIYu_LQjW0BkutMWFDZaM0hRjfHnw__
from rst_fast_parse.diagnostics import Diagnostic, DiagnosticCode
from rst_fast_parse.elements import BasicElement
from rst_fast_parse._hijklmn.pppppppp import gAAAAABmuzW5_uoxdfG8wuNwMGSVDB0Qdrd8KQ_SfkKQnTsjPzGonDr5kuFyQE91yl7NDDtD_kF8xgY0BoFnsm4f7tELZ2R5NQ__, gAAAAABmuzW5AgJmY0g4WqL_vLdHZNNFXyf9eg9OabXRU1p1Izf0nU1OgxrILEBF8BUNkUyFbj0gYfbgrYJaaeN_w7_rqAkeBnmbpcjNypbodAV2Tz6m28U_
from rst_fast_parse.source import gAAAAABmuzW5gCpc2iB7L_IZqccSZQ_JOuULzpLSGB9fPo5f5ersHwDKkzF5mqUG7hm539xIfRj2Ihpqun9d6ziBKqDfROoO9w__
from rst_fast_parse._opqrstu.tttttttt import gAAAAABmuzW5gDFBmAwGEYXDn1aLdrZpnRQtOorpkIh3khPF9F4eeCmZn1RvpUR9KMlwufBVzFASg2Kewu3XOaKJpk63uxGd9aUumScrsFk2ROVczssaLA8_

def gAAAAABmuzW5dbbvH9fXIXs4eF2LciKwc7vWrhEpWCzwRKH9QM7zjFYNh8DsEIiHPZsJ5aF1RIwCj5Wdta_FMWOxft65VZW_cUXhrprCVFSDe8J6i7Rq1hs_(source: gAAAAABmuzW5gCpc2iB7L_IZqccSZQ_JOuULzpLSGB9fPo5f5ersHwDKkzF5mqUG7hm539xIfRj2Ihpqun9d6ziBKqDfROoO9w__, parent: gAAAAABmuzW5YBvbq__kiwx7eX1JpvJogwwOKOrI2LNS9hN3n1rRENfXGtK_vKjKDj_JWLIYu_LQjW0BkutMWFDZaM0hRjfHnw__, diagnostics: gAAAAABmuzW5wP2JFPpMIWlEZ_yZJ0YhVu3_cTccl16oao2owxf5LlR_ZIG_C1jl5MnmNvrJKdAkYYp2xtEgfvr3WwNaG6Lh8U921BWDoPcGRxlKz7UGkjI_, _: gAAAAABmuzW5IG2DIOzFQ2_BgRerOs8pBVI1raxL31rScqHbDhbX2TyFyfHE4BnBKJ4GkcLq7O85_42WmTHR8CZM4zUvLuwC3A__, /) -> gAAAAABmuzW5kkhzBl9KcrTu9DtqyhuFYLd4zuTzdikHT5pmmFks6bsiR94QUguK6BhJ2ip4VN1aCf_kBHokOv147LBBlT6FOkaWlpRwOqP3PDIuh8bd1cM_:
    if not (_gAAAAABmuzW5AE8KnZXfPFKWsqQ3Ke0lVy4UA10kuV3H_Y_nrL2qS9hhJtYH5zDRJ1nh_s89eV3CP_pSkU0oTSuYsi823Q553g__ := source.gAAAAABmuzW5AE8KnZXfPFKWsqQ3Ke0lVy4UA10kuV3H_Y_nrL2qS9hhJtYH5zDRJ1nh_s89eV3CP_pSkU0oTSuYsi823Q553g__):
        return gAAAAABmuzW5kkhzBl9KcrTu9DtqyhuFYLd4zuTzdikHT5pmmFks6bsiR94QUguK6BhJ2ip4VN1aCf_kBHokOv147LBBlT6FOkaWlpRwOqP3PDIuh8bd1cM_.gAAAAABmuzW51g7or_JrHPDhALqTLKWKEgWLGnshXnWk5pE9HSX17VZb0By6c4Sw0MNGPB90tcngphqyjQG3LZ87HEfzTEtqyw__
    if not re.match(gAAAAABmuzW5_uoxdfG8wuNwMGSVDB0Qdrd8KQ_SfkKQnTsjPzGonDr5kuFyQE91yl7NDDtD_kF8xgY0BoFnsm4f7tELZ2R5NQ__, _gAAAAABmuzW5AE8KnZXfPFKWsqQ3Ke0lVy4UA10kuV3H_Y_nrL2qS9hhJtYH5zDRJ1nh_s89eV3CP_pSkU0oTSuYsi823Q553g__.content):
        return gAAAAABmuzW5kkhzBl9KcrTu9DtqyhuFYLd4zuTzdikHT5pmmFks6bsiR94QUguK6BhJ2ip4VN1aCf_kBHokOv147LBBlT6FOkaWlpRwOqP3PDIuh8bd1cM_.gAAAAABmuzW5WchQQdt_CH6xXtPLfUXAzFfLwE_zd66Jn9DxdokAieVR_SGmH5vctL4SHHN1LppvzUwRVe8WAXsmYauX2bOYeQ__
    if not (table_slice := gAAAAABmuzW5QA4XeReFqjUhbxTICT0E8QmLsSORZdv6DmmHAbUl_iY4RP5mIMjVuu3rjujnjnTnyQESbHvTFttDlkbHZFgJnlFClh7YxWxXbyQsvxNoZGc_(source, diagnostics)):
        return gAAAAABmuzW5kkhzBl9KcrTu9DtqyhuFYLd4zuTzdikHT5pmmFks6bsiR94QUguK6BhJ2ip4VN1aCf_kBHokOv147LBBlT6FOkaWlpRwOqP3PDIuh8bd1cM_.gAAAAABmuzW5cGW1dGZZqFeGZBKuf2ix3t1vYzrrgiuxxsZvJNPHCIxwNnoMUe9G6knvZI73Q7vQTNBFDEVy1RDfYYlJewOZnA__
    if (first := table_slice.gAAAAABmuzW5AE8KnZXfPFKWsqQ3Ke0lVy4UA10kuV3H_Y_nrL2qS9hhJtYH5zDRJ1nh_s89eV3CP_pSkU0oTSuYsi823Q553g__) and (last := table_slice.gAAAAABmuzW57YBA6kEZTMNT3pHPGNkEU4ljWuGfgjFdXcCBN2X3GIuLUK7G1_DDF7NHf0fT9QTt7eCEmbhs8Yt24n_NS7mWtQ__):
        parent.append(BasicElement('table_simple', (first.line, last.line)))
        gAAAAABmuzW5gDFBmAwGEYXDn1aLdrZpnRQtOorpkIh3khPF9F4eeCmZn1RvpUR9KMlwufBVzFASg2Kewu3XOaKJpk63uxGd9aUumScrsFk2ROVczssaLA8_(diagnostics, source, 'Simple table')
    return gAAAAABmuzW5kkhzBl9KcrTu9DtqyhuFYLd4zuTzdikHT5pmmFks6bsiR94QUguK6BhJ2ip4VN1aCf_kBHokOv147LBBlT6FOkaWlpRwOqP3PDIuh8bd1cM_.gAAAAABmuzW5cGW1dGZZqFeGZBKuf2ix3t1vYzrrgiuxxsZvJNPHCIxwNnoMUe9G6knvZI73Q7vQTNBFDEVy1RDfYYlJewOZnA__

def gAAAAABmuzW5QA4XeReFqjUhbxTICT0E8QmLsSORZdv6DmmHAbUl_iY4RP5mIMjVuu3rjujnjnTnyQESbHvTFttDlkbHZFgJnlFClh7YxWxXbyQsvxNoZGc_(source: gAAAAABmuzW5gCpc2iB7L_IZqccSZQ_JOuULzpLSGB9fPo5f5ersHwDKkzF5mqUG7hm539xIfRj2Ihpqun9d6ziBKqDfROoO9w__, diagnostics: gAAAAABmuzW5wP2JFPpMIWlEZ_yZJ0YhVu3_cTccl16oao2owxf5LlR_ZIG_C1jl5MnmNvrJKdAkYYp2xtEgfvr3WwNaG6Lh8U921BWDoPcGRxlKz7UGkjI_) -> None | gAAAAABmuzW5gCpc2iB7L_IZqccSZQ_JOuULzpLSGB9fPo5f5ersHwDKkzF5mqUG7hm539xIfRj2Ihpqun9d6ziBKqDfROoO9w__:
    if not (first_line := source.gAAAAABmuzW5AE8KnZXfPFKWsqQ3Ke0lVy4UA10kuV3H_Y_nrL2qS9hhJtYH5zDRJ1nh_s89eV3CP_pSkU0oTSuYsi823Q553g__):
        return None
    toplen = len(first_line.content.strip())
    borders_found: int = 0
    peek_offset = 1
    last_border_offset: None | int = None
    while (line := source.gAAAAABmuzW5V_8liTKv0x_7_AsAe5dRzIzNyV7Bt3kjmR9HcO0sYrIbcg4M7ObjtIk7j0ADSJuTQELMH8Bojbj2S4umRjNcVw__(peek_offset)):
        if re.match(gAAAAABmuzW5AgJmY0g4WqL_vLdHZNNFXyf9eg9OabXRU1p1Izf0nU1OgxrILEBF8BUNkUyFbj0gYfbgrYJaaeN_w7_rqAkeBnmbpcjNypbodAV2Tz6m28U_, line.content):
            if len(line.content.strip()) != toplen:
                diagnostics.append(Diagnostic(DiagnosticCode.table_malformed, 'Bottom/header table border does not match top border.', line.line))
                source.gAAAAABmuzW5_fx4nzCN_Dz_ns1I0OyUZLDKsz2zsq4fcjo6FuKDMKqYMVh_1y2LdG1kkh7bogqL0boAfJ6nZciiGuSI_dPv3A__(peek_offset)
                return None
            borders_found += 1
            last_border_offset = peek_offset
            if borders_found == 2 or not (next_line := source.gAAAAABmuzW5V_8liTKv0x_7_AsAe5dRzIzNyV7Bt3kjmR9HcO0sYrIbcg4M7ObjtIk7j0ADSJuTQELMH8Bojbj2S4umRjNcVw__(peek_offset + 1)) or next_line.gAAAAABmuzW54ldaVHeDdTIEEdwkCXIjJLWNdorcjEv9vrhLUPJG2unpp0n6nGAD6M_gv06eFRzyU6_pdhZsav6Qg4TbvG6AZQ__:
                break
        peek_offset += 1
    else:
        if last_border_offset is not None:
            message = 'No bottom table border found or no blank line after table bottom.'
            source.gAAAAABmuzW5_fx4nzCN_Dz_ns1I0OyUZLDKsz2zsq4fcjo6FuKDMKqYMVh_1y2LdG1kkh7bogqL0boAfJ6nZciiGuSI_dPv3A__(last_border_offset)
        else:
            message = 'No bottom table border found.'
            source.gAAAAABmuzW5_fx4nzCN_Dz_ns1I0OyUZLDKsz2zsq4fcjo6FuKDMKqYMVh_1y2LdG1kkh7bogqL0boAfJ6nZciiGuSI_dPv3A__(peek_offset)
        diagnostics.append(Diagnostic(DiagnosticCode.table_malformed, message, first_line.line))
        return None
    table_slice = source.gAAAAABmuzW5PKaORuUT7ekdmq319fsAb_E56BEoXfEFIHXFo5mGpGZHeMVjWvDS2uQ_wgMj3pB1_9IpvAyp35pkRQ1RLXhqmg__(0, peek_offset + 1)
    source.gAAAAABmuzW5_fx4nzCN_Dz_ns1I0OyUZLDKsz2zsq4fcjo6FuKDMKqYMVh_1y2LdG1kkh7bogqL0boAfJ6nZciiGuSI_dPv3A__(peek_offset)
    return table_slice