from __future__ import annotations
import re
from rst_fast_parse.core import gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_, gAAAAABmuqBghF38b81pn__UU7D5qCVVFkK7i83u7DXAdQLWtiiS_ZydwaodSrj3IFh4yGUG6oGAUyeJMzZJr7WZ_UDS3ydTew__, gAAAAABmuqBgi3FkS14lY3zFxXLMdRT3U_7FysMCGXu4_kVL2dSi7OnaSzLrCgWPKoqGI5fuLKI_xjZAPrs9YoYNMvPEB0_AzGK96yvqW_QAHyUvNasUB7I_, gAAAAABmuqBgxYWrhw_rlzzYMMGWQOJhD2RaFKgPKB2wq9jzDEYBfwxTun6HdIi5h58FaJB1vYJmIXRekkKijRxFJSkGbhrtSg__
from rst_fast_parse.diagnostics import Diagnostic
from rst_fast_parse.elements import BasicElement
from rst_fast_parse._hijklmn.pppppppp import gAAAAABmuqBgG6WFdFv1CMHBRpzfiF87J5otBZ5288XRTpCm9atVQ8pR0QnlZUd3QyDWPaWADCOslpKaGGkp4RBvyvBuC9mljg__, gAAAAABmuqBgGUDUBomz_85jDi8LetU_VeHgxv2P7Ovu_YFcAFu_JA_scAXKRBM2Uiu6ysXGSAPNOt2GJwdYoEaFD5u9_DeWFd32wpnMHDXM8dn1w8W1ahQ_
from rst_fast_parse.source import gAAAAABmuqBgb_ur9sqdhNZkzGBHUGvU7Nfny0poOiJkTqM24EfSM_oxVkny_hL1SzzD4iWFrF9wC2pXcy0ZG_sJ9_k1fHTTNA__
from rst_fast_parse._opqrstu.tttttttt import gAAAAABmuqBgMaN7_52LG9zhOd1ickNQEgncETM6TZgjNjXGvhk7uCylykAK4S4XK2rXMOA_uwT9ZSDQMs5ObVfqWqB_F5E0eQ0UC3QSbYOCv_0yCc_B7pU_

def gAAAAABmuqBgt1NxEI_MzXGRzU4xhYRpyjOpvDxjIh7Bo2_0jvtPGcOyxNOul07FRcg_mnha0wImxWELQ6BYC6FqqQT281LHXe1ylMVaP8pTrLZhthB_UVE_(source: gAAAAABmuqBgb_ur9sqdhNZkzGBHUGvU7Nfny0poOiJkTqM24EfSM_oxVkny_hL1SzzD4iWFrF9wC2pXcy0ZG_sJ9_k1fHTTNA__, parent: gAAAAABmuqBgxYWrhw_rlzzYMMGWQOJhD2RaFKgPKB2wq9jzDEYBfwxTun6HdIi5h58FaJB1vYJmIXRekkKijRxFJSkGbhrtSg__, diagnostics: gAAAAABmuqBgi3FkS14lY3zFxXLMdRT3U_7FysMCGXu4_kVL2dSi7OnaSzLrCgWPKoqGI5fuLKI_xjZAPrs9YoYNMvPEB0_AzGK96yvqW_QAHyUvNasUB7I_, _: gAAAAABmuqBghF38b81pn__UU7D5qCVVFkK7i83u7DXAdQLWtiiS_ZydwaodSrj3IFh4yGUG6oGAUyeJMzZJr7WZ_UDS3ydTew__, /) -> gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_:
    if not (_gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__ := source.gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__):
        return gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_.gAAAAABmuqBgKfbpVVNC7MvK1Dra1Alv7M5BtaEauTDfNX5IDsPJR0QSNUmfjdnymj3DP3ViTMNt2WDvxZfUcUqFyy_ZyAux5g__
    if not re.match(gAAAAABmuqBgG6WFdFv1CMHBRpzfiF87J5otBZ5288XRTpCm9atVQ8pR0QnlZUd3QyDWPaWADCOslpKaGGkp4RBvyvBuC9mljg__, _gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__.content):
        return gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_.gAAAAABmuqBgg3oVStjPL0fvHitctZj7GYy5hpgSVHhnqBN7CyhTVxkWOlO3n7cGwVyYiaVYSf_C2_eHOiD_4oxTBpabvZEUzg__
    if not (table_slice := gAAAAABmuqBgA2nqsMoCCzrVZxukxBT8qAw6PaaCn_aGpTdwH3wzSdDPOuXlZNjaJUeDjjNjz8tTah_6n7V0BqAupK0x_sx0VEQNs8J2jydXXFvH8wbZE_0_(source, diagnostics)):
        return gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_.gAAAAABmuqBg1MYLqH2uc_9cl0kmH49d89xAylXzTxomRbGYuyr1699oUeyyGn48h7_rvDhj_neHQUhhf_8foQ0HA1D5HJ8gFw__
    if (first := table_slice.gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__) and (last := table_slice.gAAAAABmuqBgfkBNr8Lkgy38MN4HxAyhGUh9Xhdq8bHGEJGudvDFQ48zyAuM4FCD1emHvCmSkIR9S4h0u_2CreuGS2pBFmWmYQ__):
        parent.append(BasicElement('table_simple', (first.line, last.line)))
        gAAAAABmuqBgMaN7_52LG9zhOd1ickNQEgncETM6TZgjNjXGvhk7uCylykAK4S4XK2rXMOA_uwT9ZSDQMs5ObVfqWqB_F5E0eQ0UC3QSbYOCv_0yCc_B7pU_(diagnostics, source, 'Simple table')
    return gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_.gAAAAABmuqBg1MYLqH2uc_9cl0kmH49d89xAylXzTxomRbGYuyr1699oUeyyGn48h7_rvDhj_neHQUhhf_8foQ0HA1D5HJ8gFw__

def gAAAAABmuqBgA2nqsMoCCzrVZxukxBT8qAw6PaaCn_aGpTdwH3wzSdDPOuXlZNjaJUeDjjNjz8tTah_6n7V0BqAupK0x_sx0VEQNs8J2jydXXFvH8wbZE_0_(source: gAAAAABmuqBgb_ur9sqdhNZkzGBHUGvU7Nfny0poOiJkTqM24EfSM_oxVkny_hL1SzzD4iWFrF9wC2pXcy0ZG_sJ9_k1fHTTNA__, diagnostics: gAAAAABmuqBgi3FkS14lY3zFxXLMdRT3U_7FysMCGXu4_kVL2dSi7OnaSzLrCgWPKoqGI5fuLKI_xjZAPrs9YoYNMvPEB0_AzGK96yvqW_QAHyUvNasUB7I_) -> None | gAAAAABmuqBgb_ur9sqdhNZkzGBHUGvU7Nfny0poOiJkTqM24EfSM_oxVkny_hL1SzzD4iWFrF9wC2pXcy0ZG_sJ9_k1fHTTNA__:
    if not (first_line := source.gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__):
        return None
    toplen = len(first_line.content.strip())
    borders_found: int = 0
    peek_offset = 1
    last_border_offset: None | int = None
    while (line := source.gAAAAABmuqBgw0qXQnkGD_Qskyuj3wpd_CG0dmMClRMYzgDtfudQYBezEq_WpYumEDfXZrbdJs4eQsgs8e4DIdu_9_6lKX9iQQ__(peek_offset)):
        if re.match(gAAAAABmuqBgGUDUBomz_85jDi8LetU_VeHgxv2P7Ovu_YFcAFu_JA_scAXKRBM2Uiu6ysXGSAPNOt2GJwdYoEaFD5u9_DeWFd32wpnMHDXM8dn1w8W1ahQ_, line.content):
            if len(line.content.strip()) != toplen:
                diagnostics.append(Diagnostic('table', 'Bottom/header table border does not match top border.', line.line))
                source.gAAAAABmuqBg_ATT7K3mNJmflzIxVvtzJZljH3kTQxBY15S3m14Zj9BkNcM0qDyapO3g7T50H8jNU0n8_AllJ90jHxBcb0OaVA__(peek_offset)
                return None
            borders_found += 1
            last_border_offset = peek_offset
            if borders_found == 2 or not (next_line := source.gAAAAABmuqBgw0qXQnkGD_Qskyuj3wpd_CG0dmMClRMYzgDtfudQYBezEq_WpYumEDfXZrbdJs4eQsgs8e4DIdu_9_6lKX9iQQ__(peek_offset + 1)) or next_line.gAAAAABmuqBgl4E5Lo3PT8VqK5GKvo4Ku32ltoCn3DAeeb5AORmj39SZqbyqaEAHS0iLZH8zwsxa1HKGpLo7TlFeHgYFLagNXQ__:
                break
        peek_offset += 1
    else:
        if last_border_offset is not None:
            message = 'No bottom table border found or no blank line after table bottom.'
            source.gAAAAABmuqBg_ATT7K3mNJmflzIxVvtzJZljH3kTQxBY15S3m14Zj9BkNcM0qDyapO3g7T50H8jNU0n8_AllJ90jHxBcb0OaVA__(last_border_offset)
        else:
            message = 'No bottom table border found.'
            source.gAAAAABmuqBg_ATT7K3mNJmflzIxVvtzJZljH3kTQxBY15S3m14Zj9BkNcM0qDyapO3g7T50H8jNU0n8_AllJ90jHxBcb0OaVA__(peek_offset)
        diagnostics.append(Diagnostic('table', message, first_line.line))
        return None
    table_slice = source.gAAAAABmuqBgFJIfJMVaspkvsCpnMsJ7v5MGuPM5jefiGEispjWqN8yaaf5fPKLYJg5E7DAz1JDxa6FHDNZ2ZfnhFkz9t1LE3g__(0, peek_offset + 1)
    source.gAAAAABmuqBg_ATT7K3mNJmflzIxVvtzJZljH3kTQxBY15S3m14Zj9BkNcM0qDyapO3g7T50H8jNU0n8_AllJ90jHxBcb0OaVA__(peek_offset)
    return table_slice