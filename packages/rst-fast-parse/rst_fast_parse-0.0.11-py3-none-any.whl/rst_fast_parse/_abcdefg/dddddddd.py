from __future__ import annotations
import re
from rst_fast_parse.core import gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_, gAAAAABmuqBghF38b81pn__UU7D5qCVVFkK7i83u7DXAdQLWtiiS_ZydwaodSrj3IFh4yGUG6oGAUyeJMzZJr7WZ_UDS3ydTew__, gAAAAABmuqBgi3FkS14lY3zFxXLMdRT3U_7FysMCGXu4_kVL2dSi7OnaSzLrCgWPKoqGI5fuLKI_xjZAPrs9YoYNMvPEB0_AzGK96yvqW_QAHyUvNasUB7I_, gAAAAABmuqBgxYWrhw_rlzzYMMGWQOJhD2RaFKgPKB2wq9jzDEYBfwxTun6HdIi5h58FaJB1vYJmIXRekkKijRxFJSkGbhrtSg__
from rst_fast_parse.diagnostics import Diagnostic
from rst_fast_parse.elements import BasicElement
from rst_fast_parse._hijklmn.pppppppp import gAAAAABmuqBgJBCkBnySgRTMf0Yz_E5JJmxBA8aeII0rilHx6fYrq1hL5KfbExn_FEIRjDLDDzPw1tXBkIEpTDkVY2ZMNYadSA__
from rst_fast_parse.source import gAAAAABmuqBgvYPxYEjY1Dyef8YFjWw3eYQhfWlHzOZXeiStkLy25nQhXFSF0i7ofgHKHNaTD87Ci0Nx5_bGtegVgpfWoZxodg__, gAAAAABmuqBgb_ur9sqdhNZkzGBHUGvU7Nfny0poOiJkTqM24EfSM_oxVkny_hL1SzzD4iWFrF9wC2pXcy0ZG_sJ9_k1fHTTNA__
from rst_fast_parse._opqrstu.qqqqqqqq import gAAAAABmuqBg2XqZkoeAyUVlvuSFxIHXrVi__rS3jrhh6iZIwq9BXe9Fq9aijl8R3hML4oFyPLwcAo8X_ZpvJix__0aanzjDnw__
from rst_fast_parse._opqrstu.tttttttt import gAAAAABmuqBgMaN7_52LG9zhOd1ickNQEgncETM6TZgjNjXGvhk7uCylykAK4S4XK2rXMOA_uwT9ZSDQMs5ObVfqWqB_F5E0eQ0UC3QSbYOCv_0yCc_B7pU_

def gAAAAABmuqBgFOTcVs5e6yXxaiMz6kFwjbgaa3lrLnYzNgvy6p4BKx64mPUVvJKWy6e8Sy7hnk6kk4AiA_ncIGXVNB9U5MGN0bd0cpb5ROV_srLaim4VAeM_(source: gAAAAABmuqBgb_ur9sqdhNZkzGBHUGvU7Nfny0poOiJkTqM24EfSM_oxVkny_hL1SzzD4iWFrF9wC2pXcy0ZG_sJ9_k1fHTTNA__, parent: gAAAAABmuqBgxYWrhw_rlzzYMMGWQOJhD2RaFKgPKB2wq9jzDEYBfwxTun6HdIi5h58FaJB1vYJmIXRekkKijRxFJSkGbhrtSg__, diagnostics: gAAAAABmuqBgi3FkS14lY3zFxXLMdRT3U_7FysMCGXu4_kVL2dSi7OnaSzLrCgWPKoqGI5fuLKI_xjZAPrs9YoYNMvPEB0_AzGK96yvqW_QAHyUvNasUB7I_, _: gAAAAABmuqBghF38b81pn__UU7D5qCVVFkK7i83u7DXAdQLWtiiS_ZydwaodSrj3IFh4yGUG6oGAUyeJMzZJr7WZ_UDS3ydTew__, /) -> gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_:
    if not (_gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__ := source.gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__):
        return gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_.gAAAAABmuqBgKfbpVVNC7MvK1Dra1Alv7M5BtaEauTDfNX5IDsPJR0QSNUmfjdnymj3DP3ViTMNt2WDvxZfUcUqFyy_ZyAux5g__
    if not re.match(gAAAAABmuqBgJBCkBnySgRTMf0Yz_E5JJmxBA8aeII0rilHx6fYrq1hL5KfbExn_FEIRjDLDDzPw1tXBkIEpTDkVY2ZMNYadSA__, _gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__.content):
        return gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_.gAAAAABmuqBgg3oVStjPL0fvHitctZj7GYy5hpgSVHhnqBN7CyhTVxkWOlO3n7cGwVyYiaVYSf_C2_eHOiD_4oxTBpabvZEUzg__
    if not (table_slice := gAAAAABmuqBgIqpAqlIGOV9tpNIHgIR4fVm8mIh6iJCuBmBJ5txHUV_oDdZghR2xiRwXW5Id0EBa85iej7zJe4HyRW4_mWhY_yXQaHRAWqhKFYHN_JNcMgg_(source, diagnostics)):
        return gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_.gAAAAABmuqBg1MYLqH2uc_9cl0kmH49d89xAylXzTxomRbGYuyr1699oUeyyGn48h7_rvDhj_neHQUhhf_8foQ0HA1D5HJ8gFw__
    if (first := table_slice.gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__) and (last := table_slice.gAAAAABmuqBgfkBNr8Lkgy38MN4HxAyhGUh9Xhdq8bHGEJGudvDFQ48zyAuM4FCD1emHvCmSkIR9S4h0u_2CreuGS2pBFmWmYQ__):
        parent.append(BasicElement('table_grid', (first.line, last.line)))
        gAAAAABmuqBgMaN7_52LG9zhOd1ickNQEgncETM6TZgjNjXGvhk7uCylykAK4S4XK2rXMOA_uwT9ZSDQMs5ObVfqWqB_F5E0eQ0UC3QSbYOCv_0yCc_B7pU_(diagnostics, source, 'Grid table')
    return gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_.gAAAAABmuqBg1MYLqH2uc_9cl0kmH49d89xAylXzTxomRbGYuyr1699oUeyyGn48h7_rvDhj_neHQUhhf_8foQ0HA1D5HJ8gFw__

def gAAAAABmuqBgIqpAqlIGOV9tpNIHgIR4fVm8mIh6iJCuBmBJ5txHUV_oDdZghR2xiRwXW5Id0EBa85iej7zJe4HyRW4_mWhY_yXQaHRAWqhKFYHN_JNcMgg_(source: gAAAAABmuqBgb_ur9sqdhNZkzGBHUGvU7Nfny0poOiJkTqM24EfSM_oxVkny_hL1SzzD4iWFrF9wC2pXcy0ZG_sJ9_k1fHTTNA__, diagnostics: gAAAAABmuqBgi3FkS14lY3zFxXLMdRT3U_7FysMCGXu4_kVL2dSi7OnaSzLrCgWPKoqGI5fuLKI_xjZAPrs9YoYNMvPEB0_AzGK96yvqW_QAHyUvNasUB7I_) -> None | gAAAAABmuqBgb_ur9sqdhNZkzGBHUGvU7Nfny0poOiJkTqM24EfSM_oxVkny_hL1SzzD4iWFrF9wC2pXcy0ZG_sJ9_k1fHTTNA__:
    original_source_index = source.gAAAAABmuqBgkNGinoIT4nDyAF1_rxe_t3T2gq5ohF_4keqmZ02YreuRBhEpNVJNi08k_rOBWnLuzW1ZCg2EF9_Yg40hKrEkVQ__
    block = source.gAAAAABmuqBgbJMrruP3D7RNcmjr5tjSd_BTue9o4iWw711fV3_teZFcRX0iv8YazHZCoiSKfSCmEEYEUfVKh3x2bNHQ04_8tA__(stop_on_indented=True, advance=True)
    if not (first_line := block.gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__):
        return None
    lines: list[gAAAAABmuqBgvYPxYEjY1Dyef8YFjWw3eYQhfWlHzOZXeiStkLy25nQhXFSF0i7ofgHKHNaTD87Ci0Nx5_bGtegVgpfWoZxodg__] = []
    for line in block.gAAAAABmuqBgqCjOt5_Zbc1dDw5Q6PoiEUZ_zP0SyURWU5cwuX_WyExydsLJDxe2fjPNtymxcVDVyRWXyHAs_TDXHasPXrlZjw__():
        if not (line.content.startswith('+') or line.content.startswith('|')):
            source.gAAAAABmuqBgzqbRUVAyLhCEfiSnLOq0RiPZd7Wp4xG9LYppizLIirOnm8h2RWPjKmThkWEv7zrFYe_A_ZKoC1Kfr6VR8n8amW6trY_BEDPd7uku9EYZ4wM_(original_source_index + len(lines) - 1)
            break
        lines.append(line.rstrip())
    if not re.match(gAAAAABmuqBgJBCkBnySgRTMf0Yz_E5JJmxBA8aeII0rilHx6fYrq1hL5KfbExn_FEIRjDLDDzPw1tXBkIEpTDkVY2ZMNYadSA__, lines[-1].content):
        for i in range(len(lines) - 2, 1, -1):
            if re.match(gAAAAABmuqBgJBCkBnySgRTMf0Yz_E5JJmxBA8aeII0rilHx6fYrq1hL5KfbExn_FEIRjDLDDzPw1tXBkIEpTDkVY2ZMNYadSA__, lines[i].content):
                del lines[i + 1:]
                source.gAAAAABmuqBgzqbRUVAyLhCEfiSnLOq0RiPZd7Wp4xG9LYppizLIirOnm8h2RWPjKmThkWEv7zrFYe_A_ZKoC1Kfr6VR8n8amW6trY_BEDPd7uku9EYZ4wM_(original_source_index + len(lines) - 2)
                break
        else:
            diagnostics.append(Diagnostic('table', 'No bottom table border found.', first_line.line))
            return None
    width = gAAAAABmuqBg2XqZkoeAyUVlvuSFxIHXrVi__rS3jrhh6iZIwq9BXe9Fq9aijl8R3hML4oFyPLwcAo8X_ZpvJix__0aanzjDnw__(first_line.content.rstrip())
    for line in lines:
        if gAAAAABmuqBg2XqZkoeAyUVlvuSFxIHXrVi__rS3jrhh6iZIwq9BXe9Fq9aijl8R3hML4oFyPLwcAo8X_ZpvJix__0aanzjDnw__(line.content) != width:
            diagnostics.append(Diagnostic('table', 'Line does not match width of first line.', line.line))
            return None
        if not (line.content.endswith('+') or line.content.endswith('|')):
            diagnostics.append(Diagnostic('table', 'Line does not finish with `+` or `|`.', line.line))
            return None
    return gAAAAABmuqBgb_ur9sqdhNZkzGBHUGvU7Nfny0poOiJkTqM24EfSM_oxVkny_hL1SzzD4iWFrF9wC2pXcy0ZG_sJ9_k1fHTTNA__(lines)