from __future__ import annotations
import re
from typing import Callable, Literal
from typing_extensions import TypeAlias
from rst_fast_parse.core import gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_, gAAAAABmuqBghF38b81pn__UU7D5qCVVFkK7i83u7DXAdQLWtiiS_ZydwaodSrj3IFh4yGUG6oGAUyeJMzZJr7WZ_UDS3ydTew__, gAAAAABmuqBgi3FkS14lY3zFxXLMdRT3U_7FysMCGXu4_kVL2dSi7OnaSzLrCgWPKoqGI5fuLKI_xjZAPrs9YoYNMvPEB0_AzGK96yvqW_QAHyUvNasUB7I_, gAAAAABmuqBgxYWrhw_rlzzYMMGWQOJhD2RaFKgPKB2wq9jzDEYBfwxTun6HdIi5h58FaJB1vYJmIXRekkKijRxFJSkGbhrtSg__
from rst_fast_parse.elements import ListElement, ListItemElement
from rst_fast_parse._hijklmn.pppppppp import gAAAAABmuqBggjv15OBRHKBM6q4em_bcra3ujZ3w75b_FjPAQ6TJ3fO8N01FsZ0F5cH84GThvdxNxu2KA4yuWqD5VblKczDezQ__
from rst_fast_parse.source import gAAAAABmuqBgb_ur9sqdhNZkzGBHUGvU7Nfny0poOiJkTqM24EfSM_oxVkny_hL1SzzD4iWFrF9wC2pXcy0ZG_sJ9_k1fHTTNA__
from rst_fast_parse._opqrstu.tttttttt import gAAAAABmuqBgMaN7_52LG9zhOd1ickNQEgncETM6TZgjNjXGvhk7uCylykAK4S4XK2rXMOA_uwT9ZSDQMs5ObVfqWqB_F5E0eQ0UC3QSbYOCv_0yCc_B7pU_
from rst_fast_parse._opqrstu.uuuuuuuu import gAAAAABmuqBgAerhmdqoQekgJYtWEzUo_GZugBNMkr_4Lpp3cbZP_dc_07bT88eZ8Yt86KFhMs5unKE00ggNGtYPlBbEF_JT_Q__

def gAAAAABmuqBgkYiQ41JFV_gZULfa_6VHrXZkvxgDm3ExzH7cxLF5rXmeUS3NneTgkmKxyutn8OKa_aRxwlsvakCJ33_XlMzT2Six6DyoynKaYV6OJGgHRQA_(source: gAAAAABmuqBgb_ur9sqdhNZkzGBHUGvU7Nfny0poOiJkTqM24EfSM_oxVkny_hL1SzzD4iWFrF9wC2pXcy0ZG_sJ9_k1fHTTNA__, parent: gAAAAABmuqBgxYWrhw_rlzzYMMGWQOJhD2RaFKgPKB2wq9jzDEYBfwxTun6HdIi5h58FaJB1vYJmIXRekkKijRxFJSkGbhrtSg__, diagnostics: gAAAAABmuqBgi3FkS14lY3zFxXLMdRT3U_7FysMCGXu4_kVL2dSi7OnaSzLrCgWPKoqGI5fuLKI_xjZAPrs9YoYNMvPEB0_AzGK96yvqW_QAHyUvNasUB7I_, context: gAAAAABmuqBghF38b81pn__UU7D5qCVVFkK7i83u7DXAdQLWtiiS_ZydwaodSrj3IFh4yGUG6oGAUyeJMzZJr7WZ_UDS3ydTew__, /) -> gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_:
    if (init_line := source.gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__) is None:
        return gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_.gAAAAABmuqBgKfbpVVNC7MvK1Dra1Alv7M5BtaEauTDfNX5IDsPJR0QSNUmfjdnymj3DP3ViTMNt2WDvxZfUcUqFyy_ZyAux5g__
    if (result := gAAAAABmuqBgts25PqoFQBDUNraGOM91NVIsx6lEwjjryTSWSPTJfyVZ386ofmHI2VnB0sWzaJS_VXubWo3xmwi0OOTde_F_SBbeZn5dtK8mJecwNXSVaS4_(init_line.content)) is None:
        return gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_.gAAAAABmuqBgg3oVStjPL0fvHitctZj7GYy5hpgSVHhnqBN7CyhTVxkWOlO3n7cGwVyYiaVYSf_C2_eHOiD_4oxTBpabvZEUzg__
    init_format, init_type, init_ordinal, _ = result
    last_auto = init_type == 'auto'
    last_ordinal: int | None = None
    if init_type == 'auto':
        init_type = 'arabic'
    if (next_line := source.gAAAAABmuqBgw0qXQnkGD_Qskyuj3wpd_CG0dmMClRMYzgDtfudQYBezEq_WpYumEDfXZrbdJs4eQsgs8e4DIdu_9_6lKX9iQQ__()) and (not next_line.gAAAAABmuqBgl4E5Lo3PT8VqK5GKvo4Ku32ltoCn3DAeeb5AORmj39SZqbyqaEAHS0iLZH8zwsxa1HKGpLo7TlFeHgYFLagNXQ__) and next_line.content[:1].strip() and (not gAAAAABmuqBgts25PqoFQBDUNraGOM91NVIsx6lEwjjryTSWSPTJfyVZ386ofmHI2VnB0sWzaJS_VXubWo3xmwi0OOTde_F_SBbeZn5dtK8mJecwNXSVaS4_(next_line.content)):
        return gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_.gAAAAABmuqBgg3oVStjPL0fvHitctZj7GYy5hpgSVHhnqBN7CyhTVxkWOlO3n7cGwVyYiaVYSf_C2_eHOiD_4oxTBpabvZEUzg__
    items: list[ListItemElement] = []
    while (gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__ := source.gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__):
        if gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__.gAAAAABmuqBgl4E5Lo3PT8VqK5GKvo4Ku32ltoCn3DAeeb5AORmj39SZqbyqaEAHS0iLZH8zwsxa1HKGpLo7TlFeHgYFLagNXQ__:
            source.gAAAAABmuqBg_ATT7K3mNJmflzIxVvtzJZljH3kTQxBY15S3m14Zj9BkNcM0qDyapO3g7T50H8jNU0n8_AllJ90jHxBcb0OaVA__()
            continue
        if (result := gAAAAABmuqBgts25PqoFQBDUNraGOM91NVIsx6lEwjjryTSWSPTJfyVZ386ofmHI2VnB0sWzaJS_VXubWo3xmwi0OOTde_F_SBbeZn5dtK8mJecwNXSVaS4_(gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__.content, init_type)) is not None:
            eformat, etype, next_ordinal, char_offset = result
            if eformat != init_format or (etype != 'auto' and (etype != init_type or last_auto or (last_ordinal is not None and next_ordinal != last_ordinal + 1))):
                source.gAAAAABmuqBgmREbJy8vp9L2VClyu7NZCsXnqyt54Z56EQ06ng1kCoWK2BwiNsKaIbgWLdclDIbSErGyJYieLyRVY1bQ_yyekA__()
                break
            if len(gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__.content) > char_offset:
                content = source.gAAAAABmuqBg4Uy1Lo4cHcdPv5KdrsC83VAcBuaElrmaXYKhpw6I6Utta_P8nQIxKi1GdDhblMbAxY_p13TCxym16_AvxdvDG6B1rRv41Pb6qWa_Ml_FJUA_(char_offset, always_first=True, advance=True)
            else:
                content = source.gAAAAABmuqBgR6nkTuatlmEgSX35qeEX9yLxp_BhUDbMKFiwqSVwh1r9bn61FpKA4ZG_VNfojToT25ae1THlyoLKF8qF4WzPJ7DFIkuyrImgPgPNiaZa820_(first_indent=char_offset, advance=True)
            list_item = ListItemElement((gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__.line, gAAAAABmuqBgohObt0WbwaA8X_bW4_P4vs555AxepS7VQawstEi7wwQZwxVSLPyp3l8Ldxv3CSmUhuwzcjZjX25W1F0OwHE8Hg__.line if content.gAAAAABmuqBgfkBNr8Lkgy38MN4HxAyhGUh9Xhdq8bHGEJGudvDFQ48zyAuM4FCD1emHvCmSkIR9S4h0u_2CreuGS2pBFmWmYQ__ is None else content.gAAAAABmuqBgfkBNr8Lkgy38MN4HxAyhGUh9Xhdq8bHGEJGudvDFQ48zyAuM4FCD1emHvCmSkIR9S4h0u_2CreuGS2pBFmWmYQ__.line))
            items.append(list_item)
            context.gAAAAABmuqBggT_j70GGTzkaIrvKFq65ggMKGob9Z_137Gwvo95SAWTSiVkPIKHpiMZvo9vLthsPv3V9qaRXwtGF3tP1bvhHzQ__(content, list_item, diagnostics)
            last_auto = etype == 'auto'
            last_ordinal = next_ordinal
            source.gAAAAABmuqBg_ATT7K3mNJmflzIxVvtzJZljH3kTQxBY15S3m14Zj9BkNcM0qDyapO3g7T50H8jNU0n8_AllJ90jHxBcb0OaVA__()
        else:
            source.gAAAAABmuqBgmREbJy8vp9L2VClyu7NZCsXnqyt54Z56EQ06ng1kCoWK2BwiNsKaIbgWLdclDIbSErGyJYieLyRVY1bQ_yyekA__()
            break
    if items:
        parent.append(ListElement('enum_list', items))
        gAAAAABmuqBgMaN7_52LG9zhOd1ickNQEgncETM6TZgjNjXGvhk7uCylykAK4S4XK2rXMOA_uwT9ZSDQMs5ObVfqWqB_F5E0eQ0UC3QSbYOCv_0yCc_B7pU_(diagnostics, source, 'Enumerated list')
    return gAAAAABmuqBgf1WI5Eny4t5bHCfoNLC5_Hbdh6ZKNtYw_vCVXVqlXlSGn7hVy1jgT_1dI5A5xPANjzTR1pG_GQReL5iOzyUKI6hqmw4L7uU_k4DNfqB4y_Q_.gAAAAABmuqBg1MYLqH2uc_9cl0kmH49d89xAylXzTxomRbGYuyr1699oUeyyGn48h7_rvDhj_neHQUhhf_8foQ0HA1D5HJ8gFw__
_ParenType: TypeAlias = Literal['parens', 'rparen', 'period']
_EnumType: TypeAlias = Literal['auto', 'arabic', 'loweralpha', 'upperalpha', 'lowerroman', 'upperroman']
gAAAAABmuqBgKCZnK6BorBx0bdu_Uhs4f7AJjrXlgQrw4aH9Lf5e_98S1457McWe2_zpqRyA_CFsYXJD5L2L_B9ogdN5rjfuywA2L5T3IIwjRYXUQncdQLc_: dict[_EnumType, tuple[str, _EnumType]] = {'auto': ('^[0-9]+$', 'arabic'), 'arabic': ('^[0-9]+$', 'arabic'), 'loweralpha': ('^[a-z]$', 'loweralpha'), 'upperalpha': ('^[A-Z]$', 'upperalpha'), 'lowerroman': ('^[ivxlcdm]+$', 'lowerroman'), 'upperroman': ('^[IVXLCDM]+$', 'upperroman')}
gAAAAABmuqBgKYaF7VBye_zIRWabY7NlDUOt9729MemKzgiyg6bAVxqZa1TUX4gVP3BkyX8cMss9FTWi_8msQwNHILv8eytevQ__: tuple[tuple[str, _EnumType], ...] = (('^[0-9]+$', 'arabic'), ('^[a-z]$', 'loweralpha'), ('^[A-Z]$', 'upperalpha'), ('^[ivxlcdm]+$', 'lowerroman'), ('^[IVXLCDM]+$', 'upperroman'))
gAAAAABmuqBgBufV9SJCsstwXBC_zHm_TWdfNviK9YIx53hcfJvUh_CZZpn9KjvYN9EV33bTQgb9_IKCWQBtYvyK9_69_J1SuAxd_Y7xztEUWql33DpCAO0_: dict[_EnumType, Callable[[str], int | None]] = {'auto': lambda t: 1, 'arabic': int, 'loweralpha': lambda t: ord(t) - ord('a') + 1, 'upperalpha': lambda t: ord(t) - ord('A') + 1, 'lowerroman': lambda t: gAAAAABmuqBgAerhmdqoQekgJYtWEzUo_GZugBNMkr_4Lpp3cbZP_dc_07bT88eZ8Yt86KFhMs5unKE00ggNGtYPlBbEF_JT_Q__(t.upper()), 'upperroman': lambda t: gAAAAABmuqBgAerhmdqoQekgJYtWEzUo_GZugBNMkr_4Lpp3cbZP_dc_07bT88eZ8Yt86KFhMs5unKE00ggNGtYPlBbEF_JT_Q__(t)}

def gAAAAABmuqBgts25PqoFQBDUNraGOM91NVIsx6lEwjjryTSWSPTJfyVZ386ofmHI2VnB0sWzaJS_VXubWo3xmwi0OOTde_F_SBbeZn5dtK8mJecwNXSVaS4_(line: str, expected: None | _EnumType=None) -> None | tuple[_ParenType, _EnumType, int, int]:
    if not (match := re.match(gAAAAABmuqBggjv15OBRHKBM6q4em_bcra3ujZ3w75b_FjPAQ6TJ3fO8N01FsZ0F5cH84GThvdxNxu2KA4yuWqD5VblKczDezQ__, line)):
        return None
    fmt: _ParenType
    for fmt in ('parens', 'rparen', 'period'):
        if (submatch := match.group(fmt)):
            text: str = submatch[:-1]
            if fmt == 'parens':
                text = text[1:]
            break
    else:
        raise RuntimeError(f'enumerator format not matched: {line!r}')
    sequence: None | _EnumType = None
    if text == '#':
        sequence = 'auto'
    elif expected is not None:
        regex, result = gAAAAABmuqBgKCZnK6BorBx0bdu_Uhs4f7AJjrXlgQrw4aH9Lf5e_98S1457McWe2_zpqRyA_CFsYXJD5L2L_B9ogdN5rjfuywA2L5T3IIwjRYXUQncdQLc_[expected]
        if re.match(regex, text):
            sequence = result
    elif text == 'i':
        sequence = 'lowerroman'
    elif text == 'I':
        sequence = 'upperroman'
    if sequence is None:
        for regex, result in gAAAAABmuqBgKYaF7VBye_zIRWabY7NlDUOt9729MemKzgiyg6bAVxqZa1TUX4gVP3BkyX8cMss9FTWi_8msQwNHILv8eytevQ__:
            if re.match(regex, text):
                sequence = result
                break
        else:
            raise RuntimeError(f'enumerator sequence not matched: {text!r}')
    if (ordinal := gAAAAABmuqBgBufV9SJCsstwXBC_zHm_TWdfNviK9YIx53hcfJvUh_CZZpn9KjvYN9EV33bTQgb9_IKCWQBtYvyK9_69_J1SuAxd_Y7xztEUWql33DpCAO0_[sequence](text)) is None:
        return None
    return (fmt, sequence, ordinal, match.end(0))