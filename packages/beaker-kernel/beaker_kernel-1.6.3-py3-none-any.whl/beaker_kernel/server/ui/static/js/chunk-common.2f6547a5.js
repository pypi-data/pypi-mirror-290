(self["webpackChunkbeaker_vue"]=self["webpackChunkbeaker_vue"]||[]).push([[64],{61843:function(e,t,s){"use strict";s.d(t,{qp:function(){return m},zE:function(){return g},fE:function(){return f},mY:function(){return b}});var n=s(73396),o=s(25316),i=s.n(o),r=s(12020),l=s(44870),a=(s(43439),s(92584)),c=s.n(a),u=s(91552);const d=["id"];var h={__name:"DecapodePreview",props:["data"],setup(e){const t=e,s=(0,l.iH)(String((0,u.Z)())),o=(0,l.iH)(),i={name:"breadthfirst"},r=(0,n.Fl)((()=>t.data.graph.V.map((e=>({group:"nodes",data:{id:e["_id"],color:"green",...e.vprops}}))))),a=(0,n.Fl)((()=>t.data.graph.E.map((e=>({group:"edges",data:{id:`${e.src}-${e.tgt}`,source:e.src,target:e.tgt,...e.eprops}})))));var h=null,p=null,_=null;const m=()=>{const e=document.getElementById(s.value),t=e.clientWidth,n=e.clientHeight;null!==h||0===t&&0===n||t===p&&n===_||(o.value.layout(i).run(),o.value.fit(),h=setTimeout((()=>{h=null,o.value.layout(i).run(),o.value.fit(),p=t,_=n}),150),p=t,_=n)},g=new ResizeObserver(m);return(0,n.bv)((()=>{const e=document.getElementById(s.value);o.value=c()({elements:{nodes:r.value,edges:a.value},container:e,style:[{selector:"node",style:{label:"data(label)",shape:"data(shape)","background-color":"data(color)"}},{selector:"edge",style:{label:"data(label)","line-style":"data(style)"}}],layout:i,wheelSensitivity:.1}),g.observe(e)})),(0,n.Jd)((()=>{const e=document.getElementById(s.value);e&&g.unobserve(e)})),(e,t)=>((0,n.wg)(),(0,n.iD)("div",{id:s.value,class:"decapode-graph",onResize:m},null,40,d))}};const p=h;var _=p;const m={rank:20,mimetypes:["application/x-askem-decapode-json-graph"],render:(e,t,s)=>({component:_,bindMapping:{data:t}})},g={rank:60,mimetypes:["application/json","text/json"],render:(e,t,s)=>({component:i(),bindMapping:{data:t,deep:"2",showLength:!0,showIcon:!0,showDoubleQuotes:"isQuotes",showLineNumber:"linenum",style:{whiteSpace:"pre"}}})},f={rank:40,mimetypes:["text/latex","application/latex"],render:(e,t,s)=>{const o=r.Z.renderToString(t.toString(),{displayMode:!0,output:"mathml",throwOnError:!1});return{component:(0,n.aZ)((e=>()=>(0,n.h)("div",{innerHTML:e.html})),{props:["html"]}),bindMapping:{html:o}}}};function b(e){return{rank:e.rank-10,mimetypes:e.mimetypes,render:(t,s,o)=>{const i=e.render(t,s,o);return{component:(0,n.aZ)((e=>()=>(0,n.h)("div",{innerHTML:e.html})),{props:["html"]}),bindMapping:{html:i.outerHTML}}}}}},81265:function(e,t){"use strict";t.Z={}},35200:function(e,t,s){"use strict";s.d(t,{EK:function(){return c},Gn:function(){return l},b9:function(){return u},qC:function(){return d},yt:function(){return a}});s(70560);var n=s(37353),o=s(728),i=s(17769);class r{constructor(){this.IPYNB_KEYS=["cell_type","source","metadata","id","attachments","outputs","execution_count"],this.status="idle",this.last_execution={status:"none"},this.children=[]}reset_execution_state(){this.last_execution={status:"modified"}}fromJSON(e){Object.keys(e).forEach((t=>{this[t]=e[t]}))}toJSON(){return{...this}}fromIPynb(e){Object.keys(e).forEach((t=>{this[t]=e[t]}))}toIPynb(){const e={};for(const t of Object.keys(this))this.IPYNB_KEYS.includes(t)&&(e[t]=this[t]);return e}}class l extends r{constructor(e){super(),Object.keys(e).forEach((t=>{this[t]=e[t]})),void 0===this.id&&(this.id=(0,o.Z)())}execute(e){return null}}class a extends r{constructor(e){super(),Object.keys(e).forEach((t=>{this[t]=e[t]})),this.outputs=this.outputs??[],void 0===this.id&&(this.id=(0,o.Z)()),void 0===this.execution_count&&(this.execution_count=null),this.busy=!1,Array.isArray(this.source)&&(this.source=this.source.join("\n"))}execute(e,t=void 0){var s;return this.busy=!0,this.outputs.splice(0,this.outputs.length),void 0!==t?s=t:(s=e.sendBeakerMessage("execute_request",{code:this.source,silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!1}),s.onIOPub=e=>i.Kf.handleIOPub(e,this),s.onReply=e=>i.Kf.handleReply(e,this)),s}rollback(e){if("ok"===this?.last_execution?.status){const t=e.executeAction("rollback",{checkpoint_index:this.last_execution.checkpoint_index});return this.busy=!0,t.done.then((e=>{"ok"===e.content.status?(this.busy=!1,this.last_execution={status:"none"},this.execution_count=null,this.outputs.splice(0,this.outputs.length),this.children.splice(0,this.children.length)):"error"===e.content.status&&(this.last_execution=e.content,this.outputs.push({...e.content,output_type:"error"}))})),t}return null}}class c extends r{constructor(e){super(),Object.keys(e).forEach((t=>{this[t]=e[t]})),void 0===this.id&&(this.id=(0,o.Z)())}execute(e){return null}}class u extends r{constructor(e){super(),this.events=[],Object.keys(e).forEach((t=>{this[t]=e[t]})),void 0===this.id&&(this.id=(0,o.Z)())}execute(e){this.events.splice(0,this.events.length),this.children.splice(0,this.children.length);const t=async t=>{const s=t.header.msg_type,n=t.content;if("status"===s)this.status=n.execution_state;else if("llm_thought"===s){if(""===n.thought)return;this.events.push({type:"thought",content:n.thought})}else if("llm_response"===s&&"response_text"===n.name)this.events.push({type:"response",content:n.text});else if("code_cell"===s){const t=e.notebook,s=new a({cell_type:"code",source:n.code,metadata:{parent_cell:this.id},outputs:[]}),o=t.cells.findIndex((e=>e.id===this.id));o>=0?e.notebook.cells.splice(o+1,0,s):t.addCell(s)}else if("add_child_codecell"===s){const t=n.autoexecute,s=new a({cell_type:"code",source:n.code,metadata:{parent_cell:this.id},outputs:[],busy:!0});s.last_execution={status:"pending",checkpoint_index:n.checkpoint_index},this.events.push({type:"code_cell",content:{parent_id:this.id,cell_id:s.id,metadata:{}}}),this.children.push(s);const o=this.children[this.children.length-1];if(t&&n.execute_request_msg){const t=n.execute_request_msg;new i.Fp(t,!0,!0,e.kernel,o)}}else if("update_child_codecell"==s){const e=n.id,s=this.children.find((t=>t.id===e));if(void 0===s||null===s)throw console.log("Can't find cell"),Error("Cell to be updated not found ");s.execution_count=n.execution_count;let o={status:n.execution_status};if("error"===n.execution_status){const e={ename:t.content.ename,evalue:t.content.evalue,traceback:t.content.traceback};s.outputs.push({output_type:"error",...e}),o={...o,...e}}else"ok"===o.status&&(o={...o,checkpoint_index:n.checkpoint_index},s.outputs.push({output_type:"execute_result",data:{"text/plain":n.execution_return}}));s.last_execution=o}},s=async e=>{n.isInputRequestMsg(e)&&(this.events.push({type:"user_question",content:e.content.prompt}),this.status="awaiting_input",this._current_input_request_message=e)},o=async e=>{if("ok"===e.content.status)this.last_execution={status:"ok"};else if("error"===e.content.status){const t={ename:e.content.ename,evalue:e.content.evalue,traceback:e.content.traceback};this.last_execution={status:"error",...t},this.events.push({type:"error",content:{...e.content}})}else"abort"===e.content.status&&(this.last_execution={status:"abort"},this.events.push({type:"abort",content:"Request aborted"}))},r=e.sendBeakerMessage("llm_request",{request:this.source});return r.onIOPub=t,r.onStdin=s,r.onReply=o,r}respond(e,t){"awaiting_input"===this.status&&(this.events.push({type:"user_answer",content:e}),t.kernel.sendInputReply({value:e,status:"ok"},this._current_input_request_message.header),this.status="busy",this._current_input_request_message=void 0)}toMarkdownCell(){const e=[`# ${this.source}\n`];this.events.forEach((t=>{"thought"===t.type?e.push(`> Thought: ${t.content}\n> `):"response"===t.type?e.push(`**${t.content}**`):"user_question"===t.type?e.push(`*Beaker asks:* ${t.content}\n`):"user_answer"===t.type&&e.push(`*The user responds:* ${t.content}\n`)}));const t=e.join("\n"),s={...this.metadata,beaker_cell_type:"query",prompt:this.source,events:this.events};return new c({cell_type:"markdown",id:this.id,source:t,metadata:s})}fromIPynb(e){if("query"!==this.metadata.beaker_cell_type)throw TypeError("Cell is trying to be parsed as a query cell, but doesn't have the required metadata.");this.source=e.metadata.prompt,this.events=e.metadata.events}toIPynb(){const e=this.children?.map((e=>(e.metadata.beaker_child_of=this?.id,e.toIPynb())));return[this.toMarkdownCell().toIPynb(),...e]}}class d{constructor(){this.content={nbformat:4,nbformat_minor:5,cells:[],metadata:{kernelspec:{display_name:"Beaker Kernel",name:"beaker",language:"beaker"},language_info:this.subkernelInfo}},this.cells=new Proxy(this.content.cells,{})}toJSON(){return this.content.metadata.language_info=this.subkernelInfo,{...this.content}}fromJSON(e){Object.keys(e).forEach((t=>{this.content[t]=e[t]}))}loadFromIPynb(e){this.content.nbformat=e.nbformat,this.content.nbformat_minor=e.nbformat_minor;const t=e.cells.map((e=>"raw"===e.cell_type?new l(e):"code"===e.cell_type?new a(e):"query"===e.metadata.beaker_cell_type?new u({cell_type:"query",id:e.id,source:e.metadata.prompt,events:e.metadata.events,metadata:e.metadata}):"markdown"===e.cell_type?new c(e):void 0));let s={};t.forEach((e=>{s[e.id]=e}));let n=0;while(n<t.length){const e=t[n];"undefined"!==typeof e.metadata.beaker_child_of?s[e.metadata.beaker_child_of].children.push(t.splice(n,1)[0]):n++}this.cells.splice(0,this.cells.length,...t),this.content.metadata=e.metadata}toIPynb(){return this.content.metadata.language_info=this.subkernelInfo,{nbformat:this.content.nbformat,nbformat_minor:this.content.nbformat_minor,cells:this.content.cells.flatMap((e=>e.toIPynb())),metadata:this.content.metadata}}addCell(e){this.cells.push(e)}insertCell(e,t){this.cells.splice(t,0,e)}removeCell(e){this.cells.splice(e,1)}cutCell(e){const t=this.cells.splice(e,1);return t.length>0?t[0]:null}moveCell(e,t){e!==t&&this.insertCell(this.cutCell(e),t)}setSubkernelInfo(e){this.subkernelInfo={name:e.subkernel,display_name:e.language}}}},31439:function(e,t,s){"use strict";s.d(t,{T4:function(){return a},xj:function(){return l}});var n=s(81914),o=s(88915),i=s(42304);class r{render(e,t,s){return new HTMLElement}}class l extends r{constructor(e){super(),this._factory=e,this.rank=e.defaultRank,this.mimetypes=[...e.mimeTypes]}render(e,t,s){const i=this._factory.createRenderer({mimeType:e,resolver:null,sanitizer:new o.T,linkHandler:null,latexTypesetter:null,markdownParser:null,translator:null}),r=new n.a({trusted:!0,data:{[e]:t},metadata:s});return i.renderModel(r),i.node}}class a{constructor(e){this._renderers={};for(const t of i.Nf){const e=new l(t);this.addRenderer(e)}for(const t of e?.renderers)this.addRenderer(t)}addRenderer(e){for(const t of e.mimetypes)if(Object.keys(this._renderers).includes(t)){const s=this._renderers[t];e.rank<=s.rank&&(this._renderers[t]=e)}else this._renderers[t]=e}get rankedMimetypes(){const e=Object.keys(this._renderers);return e.sort(((e,t)=>this._renderers[e].rank-this._renderers[t].rank)),e}render(e,t,s){const n=this._renderers[e];if(n)return n.render(e,t,s)}renderMimeBundle(e,t){const s={};for(const n in e)s[n]=this.render(n,e[n],t);return s}rankedMimetypesInBundle(e){const t=this.rankedMimetypes.filter((t=>e&&Object.keys(e).includes(t)));return t}}},53603:function(e,t,s){"use strict";s.d(t,{F:function(){return _}});var n=s(19770),o=s(85574),i=s(49293),r=s(37353),l=s(728),a=s(82293),c=s.n(a),u=s(17769),d=s(35200);s(70560);class h{constructor(e){this.sessionId=e,this.events=[]}addEvent(e){this.events.push(e)}clear(){this.events.splice(0,this.events.splice.length)}}var p=s(31439);class _{constructor(e){this._sessionId=(0,l.Z)(),this._sessionOptions=e,this._serverSettings=o.ServerConnection.makeSettings(e.settings),this._services=new i.ServiceManager({serverSettings:this._serverSettings}),this._renderer=new p.T4(e.rendererOptions),this._history=new h(this._sessionId),this.notebook=new d.qC,this._services.ready.then((()=>{this.initialize(e)}))}async initialize(e){this._sessionContext=new n.B({sessionManager:this._services.sessions,specsManager:this._services.kernelspecs,name:e.name,path:e.sessionId,kernelPreference:{name:e.kernelName}}),this._sessionContext.initialize().then((()=>{this._sessionContext.ready.then((()=>{e.messageHandler?(this._messageHandler=e.messageHandler,this._sessionContext.iopubMessage.connect(this._messageHandler)):this._messageHandler=void 0,this._sessionContext.iopubMessage.connect(this._sessionMessageHandler,this)}))}))}sendBeakerMessage(e,t,s=null){null===s&&(s=(0,u.gb)(e));const n=r.createMessage({session:this.session.session.id,channel:"shell",msgType:e,content:t,msgId:s}),o=this.kernel.sendShellMessage(n,!0,!0);return o.msgId=s,o}_sessionMessageHandler(e,t){"context_setup_response"!==t.header.msg_type&&"context_info_response"!==t.header.msg_type||("context_setup_response"===t.header.msg_type?this._sessionInfo=t.content:"context_info_response"===t.header.msg_type&&(this._sessionInfo=t.content.info),this.notebook.setSubkernelInfo(this._sessionInfo))}async availableContexts(){return new Promise((async e=>{this._serverSettings.baseUrl;const t=await c()(`${this._serverSettings.baseUrl}contexts`),s=await t.json();e(s)}))}async activeContext(){return new Promise((async(e,t)=>{await this.sessionReady;const s=this.sendBeakerMessage("context_info_request",{});s.onIOPub=t=>{"context_info_response"===t.header.msg_type&&e(t.content)},await s.done,t({})}))}executeAction(e,t,s=null){const n=`${e}_request`,o=`${e}_response`,i=this.sendBeakerMessage(n,t,s),r=async e=>{if(e.header.msg_type===o&&i.onResponse)await i.onResponse(e);else if("code_cell"===e.header.msg_type){const t=this.notebook,s=new d.yt({cell_type:"code",source:e.content.code,metadata:{},outputs:[]});t.addCell(s)}return!0};return i.registerMessageHook(r),i}addCodeCell(e,t={},s=[]){const n=new d.yt({cell_type:"code",source:e,metadata:t,outputs:s});return this.notebook.addCell(n),n}addMarkdownCell(e,t={}){const s=new d.EK({cell_type:"markdown",source:e,metadata:t});return this.notebook.addCell(s),s}addRawCell(e,t={}){const s=new d.Gn({cell_type:"raw",source:e,metadata:t});return this.notebook.addCell(s),s}addQueryCell(e,t={}){const s=new d.b9({cell_type:"query",source:e,metadata:t});return this.notebook.addCell(s),s}loadNotebook(e){this.notebook.loadFromIPynb(e)}reset(){this.notebook.cells.splice(0,this.notebook.cells.length),this._history.clear(),this._sessionContext.restartKernel()}get sessionReady(){return new Promise((async e=>{await this._services.ready,await this._sessionContext.ready,e()}))}get session(){return this._sessionContext}get kernel(){return this._sessionContext?.session?.kernel}get services(){return this._services}get renderer(){return this._renderer}}},17769:function(e,t,s){"use strict";s.d(t,{Fp:function(){return l},Kf:function(){return a},gb:function(){return r}});s(70560);var n,o=s(728),i=s(73304);(function(e){e["unknown"]="unknown",e["starting"]="starting",e["idle"]="idle",e["busy"]="busy",e["terminating"]="terminating",e["restarting"]="restarting",e["autorestarting"]="autorestarting",e["dead"]="dead"})(n||(n={}));const r=e=>{const t=(0,o.Z)().replaceAll("-","").slice(0,16);return`beaker-${t}-${e}`};class l extends i.KernelFutureHandler{constructor(e,t,s,n,o){const i=e.header.msg_id;void 0===e.channel&&(e.channel="shell");const r=()=>{n._futures.delete(i)};super(r,e,t,s,n),n._futures?.set(i,this),this.cell=o,this.onIOPub=e=>a.handleIOPub(e,this.cell),this.onReply=e=>a.handleReply(e,this.cell)}}var a;(function(e){e.handleIOPub=(e,t)=>{const s=e.header.msg_type,n=e.content;"status"===s?t.status=n.execution_state:"execute_result"===s?(t.busy=!1,n.execution_count&&(t.execution_count=n.execution_count),t.outputs.push({output_type:"execute_result",...n})):"stream"===s?t.outputs.push({output_type:"stream",...n}):"display_data"===s&&t.outputs.push({output_type:"display_data",...n})},e.handleReply=(e,t)=>{if(t.busy=!1,"ok"===e.content.status)t.last_execution={...t.last_execution,status:"ok"},t.execution_count=Number(e.content.execution_count);else if("error"===e.content.status){t.execution_count=Number(e.content.execution_count);const s={ename:e.content.ename,evalue:e.content.evalue,traceback:e.content.traceback};t.last_execution={status:"error",...s},t.outputs.push({output_type:"error",...s})}else if("abort"===e.content.status){t.execution_count=e.content.execution_count;const s={ename:"Execution aborted",evalue:"Execution aborted",traceback:[]};t.last_execution={status:"error",...s},t.outputs.push({output_type:"error",content:s})}}})(a||(a={}))},97012:function(e,t,s){"use strict";s.d(t,{Z:function(){return _}});var n=s(73396),o=s(44870),i=s(87139),r=s(31608),l=s(63618);const a={class:"status-bar"},c=(0,n._)("div",{class:"logo"},[(0,n._)("h4",null,[(0,n.Uk)(" Beaker "),(0,n._)("span",{class:"longer-title"},"Development Interface")])],-1),u={href:"https://jataware.github.io/beaker-kernel",rel:"noopener",target:"_blank"},d={href:"https://github.com/jataware/beaker-kernel",rel:"noopener",target:"_blank"};var h=(0,n.aZ)({__name:"BeakerHeader",props:["toggleDarkMode","kernel"],emits:["selectKernel"],setup(e,{emit:t}){const s=t,{theme:h,toggleDarkMode:p}=(0,n.f3)("theme"),_=(0,n.f3)("beakerSession");function m(){s("selectKernel")}const g=(0,n.Fl)((()=>"pi pi-"+("dark"===h?"sun":"moon"))),f={unknown:"Unknown",starting:"Starting",idle:"Ready",busy:"Busy",terminating:"Terminating",restarting:"Restarting",autorestarting:"Autorestarting",dead:"Dead",connected:"Connected",connecting:"Connecting"},b={connected:"green-300",idle:"green-400",connecting:"green-200",busy:"orange-400"},y=(0,n.Fl)((()=>f[_.status]||"unknown")),k=(0,n.Fl)((()=>b[_.status]||"grey-200"));return(e,t)=>((0,n.wg)(),(0,n.j4)((0,o.SU)(r.Z),{class:"toolbar"},{start:(0,n.w5)((()=>[(0,n._)("div",a,[(0,n._)("i",{class:"pi pi-circle-fill",style:(0,i.j5)(`font-size: inherit; color: var(--${k.value});`)},null,4),(0,n.Uk)(" "+(0,i.zw)(y.value),1)]),(0,n.Wm)((0,o.SU)(l.Z),{outlined:"",size:"small",icon:"pi pi-angle-down",iconPos:"right",class:"connection-button",onClick:m,label:(0,o.SU)(_).activeContext?.slug,loading:!(0,o.SU)(_).activeContext?.slug},null,8,["label","loading"])])),center:(0,n.w5)((()=>[c])),end:(0,n.w5)((()=>[(0,n._)("nav",null,[(0,n.Wm)((0,o.SU)(l.Z),{text:"",onClick:(0,o.SU)(p),style:{margin:"0",color:"var(--gray-500)"},icon:g.value},null,8,["onClick","icon"]),(0,n._)("a",u,[(0,n.Wm)((0,o.SU)(l.Z),{text:"",style:{margin:"0",color:"var(--gray-500)"},"aria-label":"Beaker Documentation",icon:"pi pi-book"})]),(0,n._)("a",d,[(0,n.Wm)((0,o.SU)(l.Z),{text:"",style:{margin:"0",color:"var(--gray-500)"},"aria-label":"Github Repository Link Icon",icon:"pi pi-github"})])])])),_:1}))}});const p=h;var _=p},71360:function(e,t,s){"use strict";s.d(t,{Z:function(){return h}});var n=s(73396);const o={class:"beaker-notebook"};function i(e,t,s,i,r,l){return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.WI)(e.$slots,"default")])}var r=s(44870),l=s(20295);const a=(0,n.aZ)({props:["cellMap"],setup(e){const t=(0,n.f3)("session"),s=(0,n.f3)("beakerSession"),o=(0,r.iH)(t.notebook),i=(0,r.iH)(null);(0,n.JJ)("cell-component-mapping",e.cellMap);const l=(0,n.Fl)((()=>t?.notebook?.cells?.length||0));return{session:t,beakerSession:s,notebook:o,selectedCellId:i,cellCount:l}},methods:{selectCell(e){let t;return t="string"===typeof e?e:e.id,this.selectedCellId!==t&&(this.selectedCellId=t),(0,n.Y3)((()=>{this.scrollCellIntoView(this.selectedCell())})),this.selectedCellId},scrollCellIntoView(e){const t=e?.$?.vnode?.el;if(!t)return;const s=t.closest(".beaker-cell")??t;(0,l.Z)(s,{scrollMode:"if-needed",block:"nearest",inline:"nearest"})},selectedCell(){return this.beakerSession.findNotebookCellById(this.selectedCellId)},selectNextCell(e,t=!1){void 0===e&&(e=this.selectedCell().cell);let s=this.notebook.cells.indexOf(e);if(s>=0){if(s<this.cellCount-1)return this.selectCell(this.notebook.cells[s+1],t)}else for(const n of this.notebook.cells)if(n.children){const s=n.children.indexOf(e);if(-1===s)continue;return s<=n.children.length-1?this.selectNextCell(n):this.selectCell(n.children[s+1],t)}return null},selectPrevCell(e,t=!1){let s=this.notebook.cells.indexOf(this.selectedCell().cell);if(s>=0)s>0&&this.selectCell(this.notebook.cells[s-1],t);else for(const n of this.notebook.cells)console.log(n);return null},insertCellBefore(e,t,s=!1){void 0===e&&(e=this.selectedCell()),void 0===t&&(t="code");const o=void 0===e?this.notebook.cells.length-1:this.notebook.cells.findIndex((t=>t===e.cell)),i=this.session.addCodeCell("");return this.notebook.moveCell(this.notebook.cells.length-1,o),(0,n.Y3)((()=>this.selectCell(i,s))),i},insertCellAfter(e,t,s=!1){void 0===e&&(e=this.selectedCell()),void 0===t&&(t="code");let o=void 0===e?this.notebook.cells.length-1:this.notebook.cells.findIndex((t=>t===e.cell));const i=e?.cell?.metadata?.beaker_child_of;-1===o&&i&&(o=this.notebook.cells.findIndex((e=>e.id===i)));const r=this.session.addCodeCell("");return this.notebook.moveCell(this.notebook.cells.length-1,o+1),(0,n.Y3)((()=>this.selectCell(r,s))),r},removeCell(e){void 0===e&&(e=this.selectedCell());const t=this.notebook.cells.findIndex((t=>t===e.cell));return this.selectNextCell()||this.selectPrevCell(),this.notebook.cutCell(t)},convertCellType(e,t){const s=this.notebook.cells.indexOf(e);if(-1===s)return void console.warn("attempted to convert cell not found in parent cell in place; cell not found");if(!Object.keys(this.cellMap).includes(t))return void console.warn("invalid cell type provided for conversion target");const n=new this.cellMap[t].modelClass({...e});n.cell_type=t,this.notebook.cells.splice(s,1,n)}},computed:{},beforeMount(){if((0,n.JJ)("notebook",this),0===this.cellCount){this.session.addCodeCell("")}},mounted(){this.selectedCell()||this.selectCell(this.notebook.cells[0].id)}});var c=a,u=s(40089);const d=(0,u.Z)(c,[["render",i]]);var h=d},66555:function(e,t,s){"use strict";s.d(t,{ZP:function(){return _}});var n=s(73396);const o={class:"beaker-session-container"};function i(e,t,s,i,r,l){return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.WI)(e.$slots,"default")])}var r=s(44870),l=s(90479),a=s(22487);const c=e=>{const t=e?.component;if(void 0!==t)return(0,r.qj)({...t.proxy,...t.exposed,$:t})},u=(0,n.aZ)({props:{connectionSettings:Object,sessionName:String,sessionId:String,defaultKernel:String,renderers:Object},emits:["iopub-msg","unhandled-msg","any-msg","session-status-changed","context-changed"],setup(e,{emit:t}){const s=(0,r.iH)("unknown"),n=(0,r.iH)({}),o=(0,r.iH)(),i=new l.F1({settings:e.connectionSettings,name:e.sessionName,sessionId:e.sessionId,kernelName:e.defaultKernel,rendererOptions:{renderers:e.renderers||[]}});i.sessionReady.then((()=>{i.session.iopubMessage.connect(((e,n)=>{if(t("iopub-msg",n),a.isStatusMsg(n)){const e=n?.content?.execution_state||"connecting";s.value=e,t("session-status-changed",e)}})),i.session.session.anyMessage.connect(((e,{msg:s,direction:n})=>{t("any-msg",s,n)})),i.session.unhandledMessage.connect(((e,s)=>{t("unhandled-msg",s)}))}));const c=(0,r.qj)(i);return{activeContext:o,session:c,status:s,cellRegistry:n}},methods:{findNotebookCell(e){for(const t of this.cellRegistry)if(e(t))return c(t)},findNotebookCellById(e){const t=this.cellRegistry[e];if(void 0!==t)return c(t)},async fetchContextInfo(){const e=await this.session.activeContext();this.activeContext=e,this.$emit("context-changed",this.activeContext)},setContext(e){const t=(0,n.f3)("show_toast");this.activeContext={};const s=this.session.sendBeakerMessage("context_setup_request",e);return s.done.then((e=>{if("error"!==e?.content?.status)"abort"!==e?.content?.status?this.fetchContextInfo():t({title:"Context Setup Aborted",severity:"warning",detail:e?.content?.evalue,life:6e3});else{let s=e?.content?.evalue;if(s){const e=/\.$/.test(s);e||(s+=".")}t({title:"Context Setup Failed",severity:"error",detail:`${s} Please try again or contact us.`,life:0})}})),s}},beforeMount(){(0,n.JJ)("beakerSession",(0,r.qj)(this)),(0,n.JJ)("session",this.session)},mounted(){this.fetchContextInfo()}});var d=u,h=s(40089);const p=(0,h.Z)(d,[["render",i]]);var _=p},93548:function(){},45742:function(){},79336:function(){},45159:function(){},49481:function(){}}]);
//# sourceMappingURL=chunk-common.2f6547a5.js.map