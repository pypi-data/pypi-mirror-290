{"version":3,"file":"index.js","mappings":"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","sources":["webpack://ipyfilite/./css/widget.css","webpack://ipyfilite/./node_modules/css-loader/dist/runtime/api.js","webpack://ipyfilite/./css/widget.css?2598","webpack://ipyfilite/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://ipyfilite/./src/extension.ts","webpack://ipyfilite/./src/index.ts","webpack://ipyfilite/./src/register.ts","webpack://ipyfilite/./src/version.ts","webpack://ipyfilite/./src/widget.ts","webpack://ipyfilite/external amd \"@jupyter-widgets/base\"","webpack://ipyfilite/webpack/bootstrap","webpack://ipyfilite/webpack/runtime/get javascript chunk filename","webpack://ipyfilite/webpack/runtime/hasOwnProperty shorthand","webpack://ipyfilite/webpack/runtime/publicPath","webpack://ipyfilite/webpack/runtime/jsonp chunk loading","webpack://ipyfilite/webpack/runtime/nonce","webpack://ipyfilite/webpack/startup"],"sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".custom-widget {\\n  background-color: lightseagreen;\\n  padding: 0px 2px;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\n// Entry point for the notebook bundle containing custom model definitions.\n//\n// Setup notebook base URL\n//\n// Some static assets may be required by the custom widget javascript. The base\n// url for the notebook is not known at build time and is therefore computed\n// dynamically.\n// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n(window as any).__webpack_public_path__ =\n  document.querySelector('body')!.getAttribute('data-base-url') +\n  'nbextensions/ipyfilite';\n\nexport * from './index';\n","// Copyright (c) Juniper Tyree\n// Distributed under the terms of the Modified BSD License.\n\nexport * from './version';\nexport * from './widget';\n","export function registerServiceWorker(): Promise<ServiceWorkerRegistration> {\n  return navigator.serviceWorker.register(\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    new URL('./service-worker', import.meta.url)\n  );\n}\n","// Copyright (c) Juniper Tyree\n// Distributed under the terms of the Modified BSD License.\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst data = require('../package.json');\n\n/**\n * The _model_module_version/_view_module_version this package implements.\n *\n * The html widget manager assumes that this is the same as the npm package\n * version number.\n */\nexport const MODULE_VERSION = data.version;\n\n/*\n * The current package name.\n */\nexport const MODULE_NAME = data.name;\n","// Copyright (c) Juniper Tyree\n// Distributed under the terms of the Modified BSD License.\n\nimport {\n  DOMWidgetModel,\n  DOMWidgetView,\n  ISerializers,\n  uuid as uuidv4,\n} from '@jupyter-widgets/base';\nimport { registerServiceWorker } from './register';\n\nimport { MODULE_NAME, MODULE_VERSION } from './version';\n\n// Import the CSS\nimport '../css/widget.css';\n\ninterface IFileUploaded {\n  name: string;\n  size: number;\n  type: string;\n  last_modified: number;\n  path: string;\n}\n\nexport class FileUploadLiteModel extends DOMWidgetModel {\n  defaults() {\n    return {\n      ...super.defaults(),\n      _model_name: FileUploadLiteModel.model_name,\n      _model_module: FileUploadLiteModel.model_module,\n      _model_module_version: FileUploadLiteModel.model_module_version,\n      _view_name: FileUploadLiteModel.view_name,\n      _view_module: FileUploadLiteModel.view_module,\n      _view_module_version: FileUploadLiteModel.view_module_version,\n      _session: uuidv4(),\n      accept: '',\n      description: 'Upload',\n      disabled: false,\n      icon: 'upload',\n      button_style: '',\n      multiple: false,\n      value: [], // has type Array<IFileUploaded>\n      style: null,\n    };\n  }\n\n  static serializers: ISerializers = {\n    ...DOMWidgetModel.serializers,\n    // use a dummy serializer for value to circumvent the default serializer.\n    value: { serialize: <T>(x: T): T => x },\n  };\n\n  static model_name = 'FileUploadLiteModel';\n  static model_module = MODULE_NAME;\n  static model_module_version = MODULE_VERSION;\n  static view_name = 'FileUploadLiteView';\n  static view_module = MODULE_NAME;\n  static view_module_version = MODULE_VERSION;\n}\n\nexport class FileUploadLiteView extends DOMWidgetView {\n  el: HTMLButtonElement;\n  fileInput: HTMLInputElement;\n\n  preinitialize() {\n    // Must set this before the initialize method creates the element\n    this.tagName = 'button';\n  }\n\n  render(): void {\n    super.render();\n\n    this.el.classList.add('jupyter-widgets');\n    this.el.classList.add('widget-upload-lite');\n    this.el.classList.add('jupyter-button');\n\n    this.fileInput = document.createElement('input');\n    this.fileInput.type = 'file';\n    this.fileInput.style.display = 'none';\n\n    this.el.addEventListener('click', () => {\n      this.fileInput.click();\n    });\n\n    this.fileInput.addEventListener('click', () => {\n      this.fileInput.value = '';\n    });\n\n    this.fileInput.addEventListener('change', () => {\n      const uuid: string = uuidv4();\n\n      const files: Array<IFileUploaded> = Array.from(\n        this.fileInput.files ?? []\n      ).map((file: File) => {\n        return {\n          name: file.name,\n          type: file.type,\n          size: file.size,\n          last_modified: file.lastModified,\n          path: `/uploads/${uuid}/${file.name}`,\n        };\n      });\n\n      Private.getChannel(this.model.get('_session')).postMessage({\n        kind: 'upload',\n        files: this.fileInput.files,\n        uuid,\n        widget: this.model.model_id,\n      });\n\n      this.model.set({\n        value: files,\n      });\n      this.touch();\n    });\n\n    this.listenTo(this.model, 'change:button_style', this.update_button_style);\n    this.set_button_style();\n    this.update(); // Set defaults.\n  }\n\n  update(): void {\n    this.el.disabled = this.model.get('disabled');\n    this.el.setAttribute('title', this.model.get('tooltip'));\n\n    const value: [] = this.model.get('value');\n    const description = `${this.model.get('description')} (${value.length})`;\n    const icon = this.model.get('icon');\n\n    if (description.length || icon.length) {\n      this.el.textContent = '';\n      if (icon.length) {\n        const i = document.createElement('i');\n        i.classList.add('fa');\n        i.classList.add('fa-' + icon);\n        if (description.length === 0) {\n          i.classList.add('center');\n        }\n        this.el.appendChild(i);\n      }\n      this.el.appendChild(document.createTextNode(description));\n    }\n\n    this.fileInput.accept = this.model.get('accept');\n    this.fileInput.multiple = this.model.get('multiple');\n\n    return super.update();\n  }\n\n  update_button_style(): void {\n    this.update_mapped_classes(\n      FileUploadLiteView.class_map,\n      'button_style',\n      this.el\n    );\n  }\n\n  set_button_style(): void {\n    this.set_mapped_classes(\n      FileUploadLiteView.class_map,\n      'button_style',\n      this.el\n    );\n  }\n\n  static class_map = {\n    primary: ['mod-primary'],\n    success: ['mod-success'],\n    info: ['mod-info'],\n    warning: ['mod-warning'],\n    danger: ['mod-danger'],\n  };\n}\n\nnamespace Private {\n  const _OldWorker = window.Worker;\n  const _channels: Map<string, MessagePort> = new Map();\n  const _downloads: Map<string, Map<string, MessagePort>> = new Map();\n\n  class _NewWorker extends _OldWorker {\n    private _session: string | undefined;\n\n    constructor(aURL: string | URL, options: WorkerOptions | undefined) {\n      super(aURL, options);\n\n      this.addEventListener('message', (event) => {\n        if (\n          !(\n            event.data &&\n            event.data.type &&\n            event.data.kind &&\n            event.data.type === 'ipyfilite' &&\n            event.data.kind === 'register'\n          )\n        ) {\n          return;\n        }\n\n        const session = event.data.session;\n        this._session = session;\n\n        const channel: MessagePort = event.data.channel;\n        _channels.set(session, channel);\n        _downloads.set(session, new Map());\n\n        const backlog = new Int32Array(event.data.backlog);\n\n        channel.onmessage = function (event) {\n          if (!event.data || !event.data.kind) {\n            return;\n          }\n\n          if (event.data.kind === 'download') {\n            _processDownload(\n              backlog,\n              session,\n              event.data.uuid,\n              event.data.name,\n              event.data.channel\n            );\n          }\n        };\n        channel.start();\n      });\n    }\n\n    terminate(): void {\n      if (this._session !== undefined) {\n        if (_channels.has(this._session)) {\n          _channels.get(this._session)!.close();\n          _channels.delete(this._session);\n        }\n\n        if (_downloads.has(this._session)) {\n          for (const channel of _downloads.get(this._session)!.values()) {\n            channel.postMessage({ kind: 'abort' });\n          }\n          _downloads.delete(this._session);\n        }\n      }\n\n      super.terminate();\n    }\n  }\n\n  window.Worker = _NewWorker;\n\n  export function getChannel(session: string): MessagePort {\n    return _channels.get(session)!;\n  }\n\n  const _download_queue: (() => Promise<void>)[] = [];\n  let _download_queue_active = false;\n\n  let _service_worker: ServiceWorker | null = null;\n  let _service_worker_scope = '';\n\n  /* eslint-disable no-inner-declarations */\n  function _processDownload(\n    backlog: Int32Array,\n    session: string,\n    uuid: string,\n    name: string,\n    channel: MessagePort\n  ) {\n    const BACKLOG_LIMIT = 1024 * 1024 * 16;\n    const SEGMENT_LIMIT = 1024 * 1024 * 256;\n\n    const service_worker: ServiceWorker | null = _service_worker;\n    let service_worker_channel: MessagePort | null = null;\n    let download_ready_resolve: (value: unknown) => void;\n    let download_ready_reject: (value: unknown) => void;\n    const download_ready = new Promise((resolve, reject) => {\n      download_ready_resolve = resolve;\n      download_ready_reject = reject;\n    });\n\n    let created = false;\n    const chunks: Uint8Array[] = [];\n    let size = 0;\n    let segment = 0;\n\n    _downloads.get(session)!.set(uuid, channel);\n\n    channel.onmessage = function (event) {\n      if (!(event.data && event.data.kind)) {\n        return;\n      }\n\n      if (event.data.kind === 'close' || event.data.kind === 'abort') {\n        channel.onmessage = null;\n        channel.close();\n      }\n\n      if (service_worker !== null) {\n        if (service_worker_channel === null) {\n          if (event.data.kind === 'create' || event.data.kind === 'chunk') {\n            const url = new URL(\n              `${_service_worker_scope}/download/${session}/${uuid}`\n            ).toString();\n            const sw_channel = new MessageChannel();\n\n            service_worker_channel = sw_channel.port1;\n            service_worker_channel.onmessage = (event) => {\n              if (!(event.data && event.data.kind)) {\n                return;\n              }\n\n              if (event.data.kind === 'ready') {\n                download_ready_resolve(null);\n              } else if (event.data.kind === 'abort') {\n                channel.postMessage({ kind: 'abort' });\n                if (service_worker_channel !== null) {\n                  service_worker_channel.onmessage = null;\n                  service_worker_channel.close();\n                }\n                download_ready_reject(null);\n              }\n            };\n            service_worker_channel.start();\n\n            // Pause further chunks until the download has started\n            Atomics.add(backlog, 0, BACKLOG_LIMIT);\n\n            _enqueueUserDownload(() => {\n              service_worker.postMessage(\n                {\n                  name,\n                  url,\n                  channel: sw_channel.port2,\n                },\n                [sw_channel.port2]\n              );\n\n              return download_ready\n                .then(() => {\n                  const iframe = document.createElement('iframe');\n                  iframe.hidden = true;\n                  iframe.src = url;\n                  document.body.appendChild(iframe);\n                })\n                .finally(() => {\n                  // Resume downloading chunks since\n                  // (a) the download has now started -> continue this one\n                  // (b) this download has been cancelled -> continue others\n                  Atomics.sub(backlog, 0, BACKLOG_LIMIT);\n                  Atomics.notify(backlog, 0);\n                });\n            });\n          }\n        }\n\n        if (service_worker_channel !== null) {\n          service_worker_channel.postMessage(event.data);\n\n          if (event.data.kind === 'close' || event.data.kind === 'abort') {\n            download_ready.finally(() => {\n              if (service_worker_channel !== null) {\n                service_worker_channel.onmessage = null;\n                service_worker_channel.close();\n              }\n            });\n          } else if (event.data.kind === 'chunk') {\n            const chunk = new Uint8Array(event.data.chunk);\n\n            const newBacklog = Atomics.sub(backlog, 0, chunk.length);\n            if (newBacklog < BACKLOG_LIMIT / 4) {\n              // Only notify once a lower backlog threshold has been reached\n              Atomics.notify(backlog, 0);\n            }\n          }\n\n          return;\n        }\n      }\n\n      let downloadChunk = false;\n\n      if (event.data.kind === 'create') {\n        created = true;\n      } else if (event.data.kind === 'chunk') {\n        created = true;\n\n        const chunk = new Uint8Array(event.data.chunk);\n\n        chunks.push(chunk);\n        size += chunk.length;\n\n        const newBacklog = Atomics.sub(backlog, 0, chunk.length);\n        if (newBacklog < BACKLOG_LIMIT / 4) {\n          // Only notify once a lower backlog threshold has been reached\n          Atomics.notify(backlog, 0);\n        }\n\n        if (size >= SEGMENT_LIMIT) {\n          segment += 1;\n          downloadChunk = true;\n        }\n      } else if (event.data.kind === 'close') {\n        if (created) {\n          // download if the file was created and either\n          // (a) we have received an empty file (not segemented)\n          // (b) we have received a segmented file and there is data left\n          downloadChunk = chunks.length > 0 || segment === 0;\n        }\n\n        if (segment > 0) {\n          segment += 1;\n        }\n      } else if (event.data.kind === 'abort') {\n        return;\n      } else {\n        // ignore unknown message kinds\n        return;\n      }\n\n      if (!downloadChunk) {\n        return;\n      }\n\n      // Pause further chunks until the download has gone through\n      Atomics.add(backlog, 0, BACKLOG_LIMIT);\n\n      const chunkname =\n        segment > 0 ? `${name}.${segment.toString().padStart(3, '0')}` : name;\n\n      const download = document.createElement('a');\n      download.rel = 'noopener';\n      download.href = URL.createObjectURL(new Blob(chunks));\n      download.download = chunkname;\n\n      _enqueueUserDownload(async () => {\n        // Resume downloading chunks since the download has now started\n        Atomics.sub(backlog, 0, BACKLOG_LIMIT);\n        Atomics.notify(backlog, 0);\n\n        download.dispatchEvent(new MouseEvent('click'));\n        setTimeout(() => URL.revokeObjectURL(download.href), 40 * 1000);\n      });\n\n      chunks.splice(0, chunks.length);\n      size = 0;\n    };\n    channel.start();\n  }\n\n  /* eslint-disable no-inner-declarations */\n  function _enqueueUserDownload(download: () => Promise<void>) {\n    _download_queue.push(download);\n\n    if (!_download_queue_active) {\n      _download_queue_active = true;\n      _processNextDownloadQueueItem();\n    }\n  }\n\n  function _processNextDownloadQueueItem() {\n    const downloadFunc = _download_queue.shift();\n\n    if (downloadFunc === undefined) {\n      _download_queue_active = false;\n      return;\n    }\n\n    downloadFunc().then(() =>\n      setTimeout(\n        () => _processNextDownloadQueueItem(),\n        2000 + Math.random() * 1000\n      )\n    );\n  }\n\n  if (navigator.serviceWorker) {\n    navigator.serviceWorker\n      .getRegistration()\n      .then((serviceWorkerRegistration) => {\n        return serviceWorkerRegistration || registerServiceWorker();\n      })\n      .then((serviceWorkerRegistration) => {\n        _service_worker_scope = serviceWorkerRegistration.scope;\n\n        if ((_service_worker = serviceWorkerRegistration.active) !== null) {\n          return;\n        }\n\n        const bootingServiceWorker = (serviceWorkerRegistration.installing ||\n          serviceWorkerRegistration.waiting)!;\n\n        bootingServiceWorker.addEventListener(\n          'statechange',\n          function serviceWorkerActivationListener() {\n            if (bootingServiceWorker.state === 'activated') {\n              bootingServiceWorker.removeEventListener(\n                'statechange',\n                serviceWorkerActivationListener\n              );\n              _service_worker = serviceWorkerRegistration.active;\n            }\n          }\n        );\n      });\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__55__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".index.js\";\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.p = \"\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(265);\n"],"names":["exports","___CSS_LOADER_API_IMPORT___","push","module","id","useSourceMap","list","toString","this","map","item","content","sourceMap","base64","data","cssMapping","btoa","sourceMapping","unescape","encodeURIComponent","JSON","stringify","concat","sourceURLs","sources","source","sourceRoot","join","cssWithMappingToString","i","modules","mediaQuery","dedupe","alreadyImportedModules","length","_i","api","__esModule","default","options","locals","memo","getTarget","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","index","obj","css","media","references","updater","addStyle","insertStyleElement","style","createElement","attributes","nonce","Object","keys","forEach","key","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","Boolean","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","bind","parentNode","removeStyleElement","newObj","all","atob","lastIdentifiers","newList","prototype","call","newLastIdentifiers","_index","splice","__webpack_public_path__","getAttribute","navigator","serviceWorker","register","URL","MODULE_VERSION","version","MODULE_NAME","name","FileUploadLiteModel","DOMWidgetModel","defaults","super","_model_name","model_name","_model_module","model_module","_model_module_version","model_module_version","_view_name","view_name","_view_module","view_module","_view_module_version","view_module_version","_session","uuid","accept","description","disabled","icon","button_style","multiple","value","serializers","serialize","x","FileUploadLiteView","DOMWidgetView","preinitialize","tagName","render","el","classList","add","fileInput","type","display","addEventListener","click","files","Array","from","file","size","last_modified","lastModified","path","Private","getChannel","model","get","postMessage","kind","widget","model_id","set","touch","listenTo","update_button_style","set_button_style","textContent","update_mapped_classes","class_map","set_mapped_classes","primary","success","info","warning","danger","_OldWorker","Worker","_channels","Map","_downloads","constructor","aURL","event","session","channel","backlog","Int32Array","onmessage","BACKLOG_LIMIT","service_worker","_service_worker","download_ready_resolve","download_ready_reject","service_worker_channel","download_ready","Promise","resolve","reject","created","chunks","segment","close","url","_service_worker_scope","sw_channel","MessageChannel","port1","start","Atomics","_enqueueUserDownload","port2","then","iframe","hidden","src","body","finally","sub","notify","chunk","Uint8Array","downloadChunk","chunkname","padStart","download","rel","href","createObjectURL","Blob","async","dispatchEvent","MouseEvent","setTimeout","revokeObjectURL","_processDownload","terminate","undefined","has","delete","values","_download_queue","_download_queue_active","_processNextDownloadQueueItem","downloadFunc","shift","Math","random","getRegistration","serviceWorkerRegistration","registerServiceWorker","scope","active","bootingServiceWorker","installing","waiting","serviceWorkerActivationListener","state","removeEventListener","__WEBPACK_EXTERNAL_MODULE__55__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","u","chunkId","o","prop","hasOwnProperty","p","b","baseURI","self","location","nc"],"sourceRoot":""}