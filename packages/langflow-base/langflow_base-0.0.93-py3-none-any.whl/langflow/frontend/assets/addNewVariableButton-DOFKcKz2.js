import{U as Z,a as q,g as ee,e2 as re,r as I,t as Se,j as u,i as we,c as ie,I as D,u as ae,aj as Ie,B as V,bF as _e}from"./index-DugHs1zq.js";import{P as je,c as Ae,a as ve,b as Ce,d as Ne}from"./popover-BoT3hib3.js";import{S as Le}from"./index-JVT3rcxt.js";import{a as Re,b as Fe,c as Oe,d as $e,C as ke,I as W}from"./index-DBvHSJua.js";import{I as Ve}from"./input-BBLODMOP.js";import{L as P}from"./label-BZZvrSGa.js";const Ot=s=>{const{mutate:e,queryClient:t}=Z();return e(["useDeleteGlobalVariables"],async({id:i})=>(await q.delete(`${ee("VARIABLES")}/${i}`)).data,{onSettled:()=>{t.refetchQueries({queryKey:["useGetGlobalVariables"]})},...s})};function de(s){const e={};return s.forEach(t=>{t.default_fields&&t.default_fields.forEach(n=>{e[n]=t.name})}),e}const Te=s=>{const{query:e}=Z(),t=re(a=>a.setGlobalVariablesEntries),n=re(a=>a.setUnavailableFields);return e(["useGetGlobalVariables"],async()=>{const a=await q.get(`${ee("VARIABLES")}/`);return t(a.data.map(o=>o.name)),n(de(a.data)),a.data},s)},Pe=s=>{const{mutate:e,queryClient:t}=Z();return e(["usePostGlobalVariables"],async({name:i,value:a,type:o,default_fields:c=[]})=>(await q.post(`${ee("VARIABLES")}/`,{name:i,value:a,type:o,default_fields:c})).data,{onSettled:()=>{t.refetchQueries({queryKey:["useGetGlobalVariables"]})},...s})};function R(s){return Array.isArray?Array.isArray(s):ge(s)==="[object Array]"}const Ge=1/0;function De(s){if(typeof s=="string")return s;let e=s+"";return e=="0"&&1/s==-Ge?"-0":e}function Be(s){return s==null?"":De(s)}function L(s){return typeof s=="string"}function fe(s){return typeof s=="number"}function Ke(s){return s===!0||s===!1||We(s)&&ge(s)=="[object Boolean]"}function pe(s){return typeof s=="object"}function We(s){return pe(s)&&s!==null}function _(s){return s!=null}function z(s){return!s.trim().length}function ge(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}const ze="Incorrect 'index' type",Ue=s=>`Invalid value for key ${s}`,He=s=>`Pattern length exceeds max of ${s}.`,Ye=s=>`Missing ${s} property in key`,Qe=s=>`Property 'weight' in key '${s}' must be a positive integer`,oe=Object.prototype.hasOwnProperty;class Xe{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(n=>{let r=me(n);this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(n=>{n.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function me(s){let e=null,t=null,n=null,r=1,i=null;if(L(s)||R(s))n=s,e=ce(s),t=U(s);else{if(!oe.call(s,"name"))throw new Error(Ye("name"));const a=s.name;if(n=a,oe.call(s,"weight")&&(r=s.weight,r<=0))throw new Error(Qe(a));e=ce(a),t=U(a),i=s.getFn}return{path:e,id:t,weight:r,src:n,getFn:i}}function ce(s){return R(s)?s:s.split(".")}function U(s){return R(s)?s.join("."):s}function Je(s,e){let t=[],n=!1;const r=(i,a,o)=>{if(_(i))if(!a[o])t.push(i);else{let c=a[o];const l=i[c];if(!_(l))return;if(o===a.length-1&&(L(l)||fe(l)||Ke(l)))t.push(Be(l));else if(R(l)){n=!0;for(let h=0,d=l.length;h<d;h+=1)r(l[h],a,o+1)}else a.length&&r(l,a,o+1)}};return r(s,L(e)?e.split("."):e,0),n?t:t[0]}const Ze={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},qe={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(s,e)=>s.score===e.score?s.idx<e.idx?-1:1:s.score<e.score?-1:1},et={location:0,threshold:.6,distance:100},tt={useExtendedSearch:!1,getFn:Je,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var f={...qe,...Ze,...et,...tt};const st=/[^ ]+/g;function nt(s=1,e=3){const t=new Map,n=Math.pow(10,e);return{get(r){const i=r.match(st).length;if(t.has(i))return t.get(i);const a=1/Math.pow(i,.5*s),o=parseFloat(Math.round(a*n)/n);return t.set(i,o),o},clear(){t.clear()}}}class te{constructor({getFn:e=f.getFn,fieldNormWeight:t=f.fieldNormWeight}={}){this.norm=nt(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,L(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();L(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!_(e)||z(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((r,i)=>{let a=r.getFn?r.getFn(e):this.getFn(e,r.path);if(_(a)){if(R(a)){let o=[];const c=[{nestedArrIndex:-1,value:a}];for(;c.length;){const{nestedArrIndex:l,value:h}=c.pop();if(_(h))if(L(h)&&!z(h)){let d={v:h,i:l,n:this.norm.get(h)};o.push(d)}else R(h)&&h.forEach((d,p)=>{c.push({nestedArrIndex:p,value:d})})}n.$[i]=o}else if(L(a)&&!z(a)){let o={v:a,n:this.norm.get(a)};n.$[i]=o}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function xe(s,e,{getFn:t=f.getFn,fieldNormWeight:n=f.fieldNormWeight}={}){const r=new te({getFn:t,fieldNormWeight:n});return r.setKeys(s.map(me)),r.setSources(e),r.create(),r}function rt(s,{getFn:e=f.getFn,fieldNormWeight:t=f.fieldNormWeight}={}){const{keys:n,records:r}=s,i=new te({getFn:e,fieldNormWeight:t});return i.setKeys(n),i.setIndexRecords(r),i}function G(s,{errors:e=0,currentLocation:t=0,expectedLocation:n=0,distance:r=f.distance,ignoreLocation:i=f.ignoreLocation}={}){const a=e/s.length;if(i)return a;const o=Math.abs(n-t);return r?a+o/r:o?1:a}function it(s=[],e=f.minMatchCharLength){let t=[],n=-1,r=-1,i=0;for(let a=s.length;i<a;i+=1){let o=s[i];o&&n===-1?n=i:!o&&n!==-1&&(r=i-1,r-n+1>=e&&t.push([n,r]),n=-1)}return s[i-1]&&i-n>=e&&t.push([n,i-1]),t}const O=32;function at(s,e,t,{location:n=f.location,distance:r=f.distance,threshold:i=f.threshold,findAllMatches:a=f.findAllMatches,minMatchCharLength:o=f.minMatchCharLength,includeMatches:c=f.includeMatches,ignoreLocation:l=f.ignoreLocation}={}){if(e.length>O)throw new Error(He(O));const h=e.length,d=s.length,p=Math.max(0,Math.min(n,d));let g=i,x=p;const y=o>1||c,j=y?Array(d):[];let w;for(;(w=s.indexOf(e,x))>-1;){let E=G(e,{currentLocation:w,expectedLocation:p,distance:r,ignoreLocation:l});if(g=Math.min(E,g),x=w+h,y){let S=0;for(;S<h;)j[w+S]=1,S+=1}}x=-1;let C=[],A=1,m=h+d;const b=1<<h-1;for(let E=0;E<h;E+=1){let S=0,N=m;for(;S<N;)G(e,{errors:E,currentLocation:p+N,expectedLocation:p,distance:r,ignoreLocation:l})<=g?S=N:m=N,N=Math.floor((m-S)/2+S);m=N;let se=Math.max(1,p-N+1),K=a?d:Math.min(p+N,d)+h,$=Array(K+2);$[K+1]=(1<<E)-1;for(let v=K;v>=se;v-=1){let T=v-1,ne=t[s.charAt(T)];if(y&&(j[T]=+!!ne),$[v]=($[v+1]<<1|1)&ne,E&&($[v]|=(C[v+1]|C[v])<<1|1|C[v+1]),$[v]&b&&(A=G(e,{errors:E,currentLocation:T,expectedLocation:p,distance:r,ignoreLocation:l}),A<=g)){if(g=A,x=T,x<=p)break;se=Math.max(1,2*p-x)}}if(G(e,{errors:E+1,currentLocation:p,expectedLocation:p,distance:r,ignoreLocation:l})>g)break;C=$}const M={isMatch:x>=0,score:Math.max(.001,A)};if(y){const E=it(j,o);E.length?c&&(M.indices=E):M.isMatch=!1}return M}function ot(s){let e={};for(let t=0,n=s.length;t<n;t+=1){const r=s.charAt(t);e[r]=(e[r]||0)|1<<n-t-1}return e}class be{constructor(e,{location:t=f.location,threshold:n=f.threshold,distance:r=f.distance,includeMatches:i=f.includeMatches,findAllMatches:a=f.findAllMatches,minMatchCharLength:o=f.minMatchCharLength,isCaseSensitive:c=f.isCaseSensitive,ignoreLocation:l=f.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:l},this.pattern=c?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(p,g)=>{this.chunks.push({pattern:p,alphabet:ot(p),startIndex:g})},d=this.pattern.length;if(d>O){let p=0;const g=d%O,x=d-g;for(;p<x;)h(this.pattern.substr(p,O),p),p+=O;if(g){const y=d-O;h(this.pattern.substr(y),y)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let x={isMatch:!0,score:0};return n&&(x.indices=[[0,e.length-1]]),x}const{location:r,distance:i,threshold:a,findAllMatches:o,minMatchCharLength:c,ignoreLocation:l}=this.options;let h=[],d=0,p=!1;this.chunks.forEach(({pattern:x,alphabet:y,startIndex:j})=>{const{isMatch:w,score:C,indices:A}=at(e,x,y,{location:r+j,distance:i,threshold:a,findAllMatches:o,minMatchCharLength:c,includeMatches:n,ignoreLocation:l});w&&(p=!0),d+=C,w&&A&&(h=[...h,...A])});let g={isMatch:p,score:p?d/this.chunks.length:1};return p&&n&&(g.indices=h),g}}class F{constructor(e){this.pattern=e}static isMultiMatch(e){return le(e,this.multiRegex)}static isSingleMatch(e){return le(e,this.singleRegex)}search(){}}function le(s,e){const t=s.match(e);return t?t[1]:null}class ct extends F{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class lt extends F{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class ht extends F{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class ut extends F{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class dt extends F{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class ft extends F{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class ye extends F{constructor(e,{location:t=f.location,threshold:n=f.threshold,distance:r=f.distance,includeMatches:i=f.includeMatches,findAllMatches:a=f.findAllMatches,minMatchCharLength:o=f.minMatchCharLength,isCaseSensitive:c=f.isCaseSensitive,ignoreLocation:l=f.ignoreLocation}={}){super(e),this._bitapSearch=new be(e,{location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Me extends F{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,n;const r=[],i=this.pattern.length;for(;(n=e.indexOf(this.pattern,t))>-1;)t=n+i,r.push([n,t-1]);const a=!!r.length;return{isMatch:a,score:a?0:1,indices:r}}}const H=[ct,Me,ht,ut,ft,dt,lt,ye],he=H.length,pt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,gt="|";function mt(s,e={}){return s.split(gt).map(t=>{let n=t.trim().split(pt).filter(i=>i&&!!i.trim()),r=[];for(let i=0,a=n.length;i<a;i+=1){const o=n[i];let c=!1,l=-1;for(;!c&&++l<he;){const h=H[l];let d=h.isMultiMatch(o);d&&(r.push(new h(d,e)),c=!0)}if(!c)for(l=-1;++l<he;){const h=H[l];let d=h.isSingleMatch(o);if(d){r.push(new h(d,e));break}}}return r})}const xt=new Set([ye.type,Me.type]);class bt{constructor(e,{isCaseSensitive:t=f.isCaseSensitive,includeMatches:n=f.includeMatches,minMatchCharLength:r=f.minMatchCharLength,ignoreLocation:i=f.ignoreLocation,findAllMatches:a=f.findAllMatches,location:o=f.location,threshold:c=f.threshold,distance:l=f.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:r,findAllMatches:a,ignoreLocation:i,location:o,threshold:c,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=mt(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let i=0,a=[],o=0;for(let c=0,l=t.length;c<l;c+=1){const h=t[c];a.length=0,i=0;for(let d=0,p=h.length;d<p;d+=1){const g=h[d],{isMatch:x,indices:y,score:j}=g.search(e);if(x){if(i+=1,o+=j,n){const w=g.constructor.type;xt.has(w)?a=[...a,...y]:a.push(y)}}else{o=0,i=0,a.length=0;break}}if(i){let d={isMatch:!0,score:o/i};return n&&(d.indices=a),d}}return{isMatch:!1,score:1}}}const Y=[];function yt(...s){Y.push(...s)}function Q(s,e){for(let t=0,n=Y.length;t<n;t+=1){let r=Y[t];if(r.condition(s,e))return new r(s,e)}return new be(s,e)}const B={AND:"$and",OR:"$or"},X={PATH:"$path",PATTERN:"$val"},J=s=>!!(s[B.AND]||s[B.OR]),Mt=s=>!!s[X.PATH],Et=s=>!R(s)&&pe(s)&&!J(s),ue=s=>({[B.AND]:Object.keys(s).map(e=>({[e]:s[e]}))});function Ee(s,e,{auto:t=!0}={}){const n=r=>{let i=Object.keys(r);const a=Mt(r);if(!a&&i.length>1&&!J(r))return n(ue(r));if(Et(r)){const c=a?r[X.PATH]:i[0],l=a?r[X.PATTERN]:r[c];if(!L(l))throw new Error(Ue(c));const h={keyId:U(c),pattern:l};return t&&(h.searcher=Q(l,e)),h}let o={children:[],operator:i[0]};return i.forEach(c=>{const l=r[c];R(l)&&l.forEach(h=>{o.children.push(n(h))})}),o};return J(s)||(s=ue(s)),n(s)}function St(s,{ignoreFieldNorm:e=f.ignoreFieldNorm}){s.forEach(t=>{let n=1;t.matches.forEach(({key:r,norm:i,score:a})=>{const o=r?r.weight:null;n*=Math.pow(a===0&&o?Number.EPSILON:a,(o||1)*(e?1:i))}),t.score=n})}function wt(s,e){const t=s.matches;e.matches=[],_(t)&&t.forEach(n=>{if(!_(n.indices)||!n.indices.length)return;const{indices:r,value:i}=n;let a={indices:r,value:i};n.key&&(a.key=n.key.src),n.idx>-1&&(a.refIndex=n.idx),e.matches.push(a)})}function It(s,e){e.score=s.score}function _t(s,e,{includeMatches:t=f.includeMatches,includeScore:n=f.includeScore}={}){const r=[];return t&&r.push(wt),n&&r.push(It),s.map(i=>{const{idx:a}=i,o={item:e[a],refIndex:a};return r.length&&r.forEach(c=>{c(i,o)}),o})}class k{constructor(e,t={},n){this.options={...f,...t},this.options.useExtendedSearch,this._keyStore=new Xe(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof te))throw new Error(ze);this._myIndex=t||xe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){_(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,r-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:i,sortFn:a,ignoreFieldNorm:o}=this.options;let c=L(e)?L(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return St(c,{ignoreFieldNorm:o}),i&&c.sort(a),fe(t)&&t>-1&&(c=c.slice(0,t)),_t(c,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=Q(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:i,i:a,n:o})=>{if(!_(i))return;const{isMatch:c,score:l,indices:h}=t.searchIn(i);c&&r.push({item:i,idx:a,matches:[{score:l,value:i,norm:o,indices:h}]})}),r}_searchLogical(e){const t=Ee(e,this.options),n=(o,c,l)=>{if(!o.children){const{keyId:d,searcher:p}=o,g=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(c,d),searcher:p});return g&&g.length?[{idx:l,item:c,matches:g}]:[]}const h=[];for(let d=0,p=o.children.length;d<p;d+=1){const g=o.children[d],x=n(g,c,l);if(x.length)h.push(...x);else if(o.operator===B.AND)return[]}return h},r=this._myIndex.records,i={},a=[];return r.forEach(({$:o,i:c})=>{if(_(o)){let l=n(t,o,c);l.length&&(i[c]||(i[c]={idx:c,item:o,matches:[]},a.push(i[c])),l.forEach(({matches:h})=>{i[c].matches.push(...h)}))}}),a}_searchObjectList(e){const t=Q(e,this.options),{keys:n,records:r}=this._myIndex,i=[];return r.forEach(({$:a,i:o})=>{if(!_(a))return;let c=[];n.forEach((l,h)=>{c.push(...this._findMatches({key:l,value:a[h],searcher:t}))}),c.length&&i.push({idx:o,item:a,matches:c})}),i}_findMatches({key:e,value:t,searcher:n}){if(!_(t))return[];let r=[];if(R(t))t.forEach(({v:i,i:a,n:o})=>{if(!_(i))return;const{isMatch:c,score:l,indices:h}=n.searchIn(i);c&&r.push({score:l,key:e,value:i,idx:a,norm:o,indices:h})});else{const{v:i,n:a}=t,{isMatch:o,score:c,indices:l}=n.searchIn(i);o&&r.push({score:c,key:e,value:i,norm:a,indices:l})}return r}}k.version="7.0.0";k.createIndex=xe;k.parseIndex=rt;k.config=f;k.parseQuery=Ee;yt(bt);function $t({disabled:s,isLoading:e,value:t,options:n,combobox:r,onSelect:i,editNode:a=!1,id:o="",children:c}){var A,m;const[l,h]=I.useState(!!c),d=I.useRef(null),p=c||a?Ce:Ne,[g,x]=I.useState(""),[y,j]=I.useState(n),w=new k(n,{keys:["name","value"]}),C=async b=>{const M=b.target.value,S=w.search(M).map(N=>N.item);!S.includes(M)&&r&&M&&S.push(M),j(M?S:n),x(M)};return I.useEffect(()=>{s&&t!==""&&i("",void 0,!0)},[s]),I.useEffect(()=>{if(l){const b=Se.cloneDeep(n);g===t&&t&&r&&b.push(g),j(b)}},[l]),u.jsx(u.Fragment,{children:((A=Object.keys(n??[]))==null?void 0:A.length)>0||r?u.jsx(u.Fragment,{children:u.jsxs(je,{open:l,onOpenChange:c?()=>{}:h,children:[c?u.jsx(Ae,{children:c}):u.jsx(ve,{asChild:!0,children:u.jsxs(we,{disabled:s,variant:"primary",size:"xs",role:"combobox",ref:d,"aria-expanded":l,"data-testid":`${o??""}`,className:ie(a?"dropdown-component-outline":"dropdown-component-false-outline","w-full justify-between font-normal",a?"input-edit-node":"py-2"),children:[u.jsx("span",{className:"truncate","data-testid":"value-dropdown-"+o,children:t&&t!==""&&y.find(b=>b===t)?y.find(b=>b===t):"Choose an option..."}),u.jsx(D,{name:"ChevronsUpDown",className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),u.jsx(p,{side:"bottom",avoidCollisions:!!c,className:"noflow nowheel nopan nodelete nodrag p-0",style:c?{}:{minWidth:((m=d==null?void 0:d.current)==null?void 0:m.clientWidth)??"200px"},children:u.jsxs(Re,{children:[u.jsxs("div",{className:"flex items-center border-b px-3",children:[u.jsx(D,{name:"search",className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),u.jsx("input",{onChange:C,placeholder:"Search options...",className:"flex h-9 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),u.jsxs(Fe,{children:[u.jsx(Oe,{children:"No values found."}),u.jsx($e,{defaultChecked:!1,children:y==null?void 0:y.map((b,M)=>u.jsx(Le,{delayDuration:700,content:b,children:u.jsx("div",{children:u.jsxs(ke,{value:b,onSelect:E=>{i(E),h(!1)},className:"items-center overflow-hidden truncate","data-testid":`${b}-${M??""}-option`,children:[g===b?u.jsx("span",{className:"text-muted-foreground",children:"Text: "}):u.jsx(u.Fragment,{}),u.jsx("span",{className:"truncate",children:b}),u.jsx(D,{name:"Check",className:ie("ml-auto h-4 w-4 shrink-0 text-primary",t===b?"opacity-100":"opacity-0")})]},M)})},M))})]})]})})]})}):u.jsx(u.Fragment,{children:!e&&u.jsx("div",{children:u.jsx("span",{className:"text-sm italic",children:"No parameters are available for display."})})||u.jsx("div",{children:u.jsx("span",{className:"text-sm italic",children:"Loading..."})})})})}function jt(s){return s.sort((e,t)=>e.localeCompare(t))}function kt({children:s,asChild:e}){const[t,n]=I.useState(""),[r,i]=I.useState(""),[a,o]=I.useState("Generic"),[c,l]=I.useState([]),[h,d]=I.useState(!1),p=ae(m=>m.setErrorData),g=Ie(m=>m.ComponentFields),{mutate:x}=Pe(),{data:y}=Te(),[j,w]=I.useState([]);I.useEffect(()=>{if(y&&g.size>0){const m=de(y),b=Array.from(g).filter(M=>!m.hasOwnProperty(M));w(jt(b))}},[y,g]);const C=ae(m=>m.setSuccessData);function A(){x({name:t,type:a,value:r,default_fields:c},{onSuccess:b=>{const{name:M}=b;n(""),i(""),o(""),l([]),d(!1),C({title:`Variable ${M} created successfully`})},onError:b=>{var E,S;let M=b;p({title:"Error creating variable",list:[((S=(E=M==null?void 0:M.response)==null?void 0:E.data)==null?void 0:S.detail)??"An unexpected error occurred while adding a new variable. Please try again."]})}})}return u.jsxs(V,{open:h,setOpen:d,size:"x-small",onSubmit:A,children:[u.jsxs(V.Header,{description:"This variable will be encrypted and will be available for you to use in any of your projects.",children:[u.jsx("span",{className:"pr-2",children:" Create Variable "}),u.jsx(D,{name:"Globe",className:"h-6 w-6 pl-1 text-primary","aria-hidden":"true"})]}),u.jsx(V.Trigger,{asChild:e,children:s}),u.jsx(V.Content,{children:u.jsxs("div",{className:"flex h-full w-full flex-col gap-4 align-middle",children:[u.jsx(P,{children:"Variable Name"}),u.jsx(Ve,{value:t,onChange:m=>{n(m.target.value)},placeholder:"Insert a name for the variable..."}),u.jsx(P,{children:"Type (optional)"}),u.jsx(W,{setSelectedOption:m=>{o(m)},selectedOption:a,password:!1,options:["Generic","Credential"],placeholder:"Choose a type for the variable...",id:"type-global-variables"}),u.jsx(P,{children:"Value"}),a==="Credential"?u.jsx(W,{password:!0,value:r,onChange:m=>{i(m)},placeholder:"Insert a value for the variable..."}):u.jsx(_e,{value:r,onChange:m=>{i(m.target.value)},placeholder:"Insert a value for the variable...",className:"w-full resize-none custom-scroll"}),u.jsx(P,{children:"Apply To Fields (optional)"}),u.jsx(W,{setSelectedOptions:m=>l(m),selectedOptions:c,options:j,password:!1,placeholder:"Choose a field for the variable...",id:"apply-to-fields"})]})}),u.jsx(V.Footer,{submit:{label:"Save Variable",dataTestId:"save-variable-btn"}})]})}export{kt as A,$t as D,k as F,Ot as a,Te as u};
