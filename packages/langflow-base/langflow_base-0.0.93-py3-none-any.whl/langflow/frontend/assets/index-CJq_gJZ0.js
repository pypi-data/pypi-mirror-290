import{U as E,a as v,g as M,r as m,j as e,i as D,I as u,c as y,u as f,at as I,as as P,D as p,x as R,au as b,av as B,aw as L,ax as T}from"./index-DugHs1zq.js";import{D as U,a as _,b as $,c as k}from"./index-CsuEKUZG.js";import{P as A}from"./index-BgUGMBxR.js";import{S as J}from"./index-fThUwMX-.js";import{D as H}from"./index-Fwx-o5rU.js";import{N as q}from"./index-Cc4RVquG.js";import{b as z}from"./checkbox-Cp8Gj5nb.js";import"./popover-BoT3hib3.js";import"./index-BTKZZIZD.js";import"./separator-zNeG_xON.js";import"./index-DX26fhId.js";import"./input-BBLODMOP.js";import"./label-BZZvrSGa.js";import"./index-JVT3rcxt.js";import"./shortcuts-BAVRR9Ck.js";import"./index-CQJAwG_T.js";const G=n=>{const{mutate:s}=E();return s(["useDeleteFolders"],async({folder_id:l})=>(await v.delete(`${M("FOLDERS")}/${l}`)).data,n)};function Y({firstButtonName:n,onFirstBtnClick:s,options:r,plusButton:a=!1,dropdownOptions:l=!0}){const[i,c]=m.useState(!1);return e.jsx("div",{children:e.jsxs(U,{open:i,children:[e.jsx(_,{asChild:!0,children:e.jsxs(D,{id:"new-project-btn",variant:"primary",className:"relative"+l?"pl-[12px]":"pl-[12px] pr-10",onClick:t=>{t.stopPropagation(),t.preventDefault(),s()},children:[a&&e.jsx(u,{name:"Plus",className:"main-page-nav-button"}),n,l&&e.jsx("div",{className:"absolute right-2 items-center text-muted-foreground",onClick:t=>{t.stopPropagation(),t.preventDefault(),c(!i)},children:i?e.jsx(u,{name:"ChevronUp"}):e.jsx(u,{name:"ChevronDown"})})]})}),e.jsx($,{onPointerDownOutside:t=>{t.stopPropagation(),t.preventDefault(),c(!i)},children:r.map(({name:t,onBtnClick:x},d)=>e.jsx(k,{onClick:x,children:t},d))})]})})}const K=({openModal:n,setOpenModal:s,openDeleteFolderModal:r,setOpenDeleteFolderModal:a,handleDeleteFolder:l})=>e.jsxs(e.Fragment,{children:[n&&e.jsx(q,{open:n,setOpen:s}),r&&e.jsx(H,{open:r,setOpen:a,onConfirm:()=>{l(),a(!1)},description:"folder",note:"Deleting the selected folder will remove all associated flows and components.",children:e.jsx(D,{variant:"ghost",size:"icon",className:"whitespace-nowrap",children:e.jsx(u,{"data-testid":"delete-folder",name:"Trash2",className:y("h-5 w-5")})})})]}),Q=K,V=({navigate:n,is_component:s})=>{const r=f(t=>t.setSuccessData),a=f(t=>t.setErrorData),l=z();return[...[{name:"Import from JSON",onBtnClick:()=>{l({isComponent:s}).then(t=>{r({title:`${s?"Component":"Flow"} uploaded successfully`}),s||n("/flow/"+t)}).catch(t=>{a({title:I,list:[t]})})}}]]},W=V;function fe(){const s=P().pathname,[r,a]=m.useState(!1),[l,i]=m.useState(!1),[c,t]=m.useState(!1),x=s==="/components",d=p(o=>o.setFolderToEdit),h=R(),j=f(o=>o.setSuccessData),g=f(o=>o.setErrorData),w=p(o=>o.folderToEdit),F=p(o=>o.myCollectionId),C=p(o=>o.getFoldersApi),O=W({navigate:h,is_component:x}),{mutate:S}=G(),N=()=>{S({folder_id:w==null?void 0:w.id},{onSuccess:()=>{j({title:"Folder deleted successfully."}),T(F),C(!0),h("/all")},onError:o=>{console.error(o),g({title:"Error deleting folder."})}})};return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:b,description:B,button:e.jsx("div",{className:"flex gap-2",children:e.jsx(Y,{firstButtonName:"New Project",onFirstBtnClick:()=>a(!0),options:O,plusButton:!0,dropdownOptions:!1})}),children:e.jsxs("div",{className:"flex h-full w-full space-y-8 md:flex-col lg:flex-row lg:space-x-8 lg:space-y-0",children:[e.jsx("aside",{className:"flex h-fit w-fit flex-col space-y-6",children:e.jsx(J,{items:[],handleChangeFolder:o=>{h(`all/folder/${o}`,{state:{folderId:o}})},handleEditFolder:o=>{d(o),i(!0)},handleDeleteFolder:o=>{d(o),t(!0)},className:"w-[20vw]"})}),e.jsx("div",{className:"relative h-full w-full flex-1",children:e.jsx(L,{})})]})}),e.jsx(Q,{openModal:r,setOpenModal:a,openDeleteFolderModal:c,setOpenDeleteFolderModal:t,handleDeleteFolder:N})]})}export{fe as default};
