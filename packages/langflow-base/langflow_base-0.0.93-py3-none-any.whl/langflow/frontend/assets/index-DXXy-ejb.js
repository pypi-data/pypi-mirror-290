import{r as n,y as v,A as $,x as S,u as I,z as i,D as y,j as e,$ as E,b as c,d as o,e as L,f as d,k as C,i as u,ar as F,S as A}from"./index-DugHs1zq.js";import{u as D}from"./use-post-login-user-DcTNeyeV.js";import{I as R}from"./index-DBvHSJua.js";import{I as O}from"./input-BBLODMOP.js";import"./popover-BoT3hib3.js";function M(){const[m,x]=n.useState(v),{password:t,username:r}=m,{login:f}=n.useContext($);S();const p=I(s=>s.setErrorData),h=i(s=>s.setIsLoading),j=i(s=>s.setAllFlows),g=y(s=>s.setSelectedFolder);function l({target:{name:s,value:a}}){x(b=>({...b,[s]:a}))}const{mutate:w}=D();function N(){const s={username:r.trim(),password:t.trim()};w(s,{onSuccess:a=>{j([]),g(null),h(!0),f(a.access_token,"login")},onError:a=>{p({title:A,list:[a.response.data.detail]})}})}return e.jsx(E,{onSubmit:s=>{if(t===""){s.preventDefault();return}N(),Object.fromEntries(new FormData(s.currentTarget)),s.preventDefault()},className:"h-full w-full",children:e.jsx("div",{className:"flex h-full w-full flex-col items-center justify-center bg-muted",children:e.jsxs("div",{className:"flex w-72 flex-col items-center justify-center gap-2",children:[e.jsx("span",{className:"mb-4 text-5xl",children:"⛓️"}),e.jsx("span",{className:"mb-6 text-2xl font-semibold text-primary",children:"Sign in to Langflow"}),e.jsx("div",{className:"mb-3 w-full",children:e.jsxs(c,{name:"username",children:[e.jsxs(o,{className:"data-[invalid]:label-invalid",children:["Username ",e.jsx("span",{className:"font-medium text-destructive",children:"*"})]}),e.jsx(L,{asChild:!0,children:e.jsx(O,{type:"username",onChange:({target:{value:s}})=>{l({target:{name:"username",value:s}})},value:r,className:"w-full",required:!0,placeholder:"Username"})}),e.jsx(d,{match:"valueMissing",className:"field-invalid",children:"Please enter your username"})]})}),e.jsx("div",{className:"mb-3 w-full",children:e.jsxs(c,{name:"password",children:[e.jsxs(o,{className:"data-[invalid]:label-invalid",children:["Password ",e.jsx("span",{className:"font-medium text-destructive",children:"*"})]}),e.jsx(R,{onChange:s=>{l({target:{name:"password",value:s}})},value:t,isForm:!0,password:!0,required:!0,placeholder:"Password",className:"w-full"}),e.jsx(d,{className:"field-invalid",match:"valueMissing",children:"Please enter your password"})]})}),e.jsx("div",{className:"w-full",children:e.jsx(C,{asChild:!0,children:e.jsx(u,{className:"mr-3 mt-6 w-full",type:"submit",children:"Sign in"})})}),e.jsx("div",{className:"w-full",children:e.jsx(F,{to:"/signup",children:e.jsxs(u,{className:"w-full",variant:"outline",type:"button",children:["Don't have an account? ",e.jsx("b",{children:"Sign Up"})]})})})]})})})}export{M as default};
