import{r as u,b2 as E,u as x,x as I,j as e,$ as P,b as o,d as m,e as y,f as n,k as U,i as p,ar as D,b3 as A,b4 as R}from"./index-DugHs1zq.js";import{u as T}from"./use-post-add-user-B306BuQg.js";import{I as h}from"./index-DBvHSJua.js";import{I as _}from"./input-BBLODMOP.js";import"./popover-BoT3hib3.js";function M(){const[f,j]=u.useState(E),[v,t]=u.useState(!0),{password:a,cnfPassword:r,username:i}=f,w=x(s=>s.setSuccessData),N=x(s=>s.setErrorData),b=I(),{mutate:g}=T();function l({target:{name:s,value:c}}){j(d=>({...d,[s]:c}))}u.useEffect(()=>{if(a!==r||a===""||r===""||i==="")return t(!0);t(!1)},[a,r,i,l]);function S(){const{username:s,password:c}=f,d={username:s.trim(),password:c.trim()};g(d,{onSuccess:()=>{w({title:A}),b("/login")},onError:$=>{const{response:{data:{detail:C}}}=$;N({title:R,list:[C]})}})}return e.jsx(P,{onSubmit:s=>{if(a===""){s.preventDefault();return}Object.fromEntries(new FormData(s.currentTarget)),s.preventDefault()},className:"h-full w-full",children:e.jsx("div",{className:"flex h-full w-full flex-col items-center justify-center bg-muted",children:e.jsxs("div",{className:"flex w-72 flex-col items-center justify-center gap-2",children:[e.jsx("span",{className:"mb-4 text-5xl",children:"⛓️"}),e.jsx("span",{className:"mb-6 text-2xl font-semibold text-primary",children:"Sign up to Langflow"}),e.jsx("div",{className:"mb-3 w-full",children:e.jsxs(o,{name:"username",children:[e.jsxs(m,{className:"data-[invalid]:label-invalid",children:["Username ",e.jsx("span",{className:"font-medium text-destructive",children:"*"})]}),e.jsx(y,{asChild:!0,children:e.jsx(_,{type:"username",onChange:({target:{value:s}})=>{l({target:{name:"username",value:s}})},value:i,className:"w-full",required:!0,placeholder:"Username"})}),e.jsx(n,{match:"valueMissing",className:"field-invalid",children:"Please enter your username"})]})}),e.jsx("div",{className:"mb-3 w-full",children:e.jsxs(o,{name:"password",serverInvalid:a!=r,children:[e.jsxs(m,{className:"data-[invalid]:label-invalid",children:["Password ",e.jsx("span",{className:"font-medium text-destructive",children:"*"})]}),e.jsx(h,{onChange:s=>{l({target:{name:"password",value:s}})},value:a,isForm:!0,password:!0,required:!0,placeholder:"Password",className:"w-full"}),e.jsx(n,{className:"field-invalid",match:"valueMissing",children:"Please enter a password"}),a!=r&&e.jsx(n,{className:"field-invalid",children:"Passwords do not match"})]})}),e.jsx("div",{className:"w-full",children:e.jsxs(o,{name:"confirmpassword",serverInvalid:a!=r,children:[e.jsxs(m,{className:"data-[invalid]:label-invalid",children:["Confirm your password"," ",e.jsx("span",{className:"font-medium text-destructive",children:"*"})]}),e.jsx(h,{onChange:s=>{l({target:{name:"cnfPassword",value:s}})},value:r,isForm:!0,password:!0,required:!0,placeholder:"Confirm your password",className:"w-full"}),e.jsx(n,{className:"field-invalid",match:"valueMissing",children:"Please confirm your password"})]})}),e.jsx("div",{className:"w-full",children:e.jsx(U,{asChild:!0,children:e.jsx(p,{disabled:v,type:"submit",className:"mr-3 mt-6 w-full",onClick:()=>{S()},children:"Sign up"})})}),e.jsx("div",{className:"w-full",children:e.jsx(D,{to:"/login",children:e.jsxs(p,{className:"w-full",variant:"outline",children:["Already have an account? ",e.jsx("b",{children:"Sign in"})]})})})]})})})}export{M as default};
