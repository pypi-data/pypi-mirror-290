import{u as b,r,j as e,I as i,i as h,a$ as j}from"./index-DugHs1zq.js";import{u as w,a as N,A as v,D as g}from"./addNewVariableButton-DOFKcKz2.js";import{T as y}from"./index-JVT3rcxt.js";import"./popover-BoT3hib3.js";import"./index-DBvHSJua.js";import"./input-BBLODMOP.js";import"./label-BZZvrSGa.js";function T(){const o=b(a=>a.setErrorData),n=a=>a.value!==""?e.jsx("div",{children:e.jsx(j,{variant:"outline",size:"md",className:"font-normal",children:a.value})}):e.jsx("div",{}),d=({options:a,value:l,onValueChange:t})=>e.jsx(g,{options:a,value:l,onSelect:t,children:e.jsx("div",{className:"-mt-1.5 w-full"})}),[c,D]=r.useState([{headerName:"Variable Name",field:"name",flex:2},{headerName:"Type",field:"type",cellRenderer:n,cellEditor:d,cellEditorParams:{options:["Generic","Credential"]},flex:1,editable:!1},{headerName:"Apply To Fields",field:"default_fields",flex:1,editable:!1,resizable:!1}]),[m,f]=r.useState([]),{data:s}=w(),{mutate:u}=N();async function x(){m.map(async a=>{var t;const l=(t=s==null?void 0:s.find(p=>p.name===a))==null?void 0:t.id;u({id:l},{onError:()=>{o({title:"Error deleting variable",list:[`ID not found for variable: ${a}`]})}})})}return e.jsxs("div",{className:"flex h-full w-full flex-col justify-between gap-6",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-4 space-y-0.5",children:[e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsxs("h2",{className:"flex items-center text-lg font-semibold tracking-tight",children:["Global Variables",e.jsx(i,{name:"Globe",className:"ml-2 h-5 w-5 text-primary"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage global variables and assign them to fields."})]}),e.jsx("div",{className:"flex flex-shrink-0 items-center gap-2",children:e.jsx(v,{asChild:!0,children:e.jsxs(h,{"data-testid":"api-key-button-store",variant:"primary",children:[e.jsx(i,{name:"Plus",className:"w-4"}),"Add New"]})})})]}),e.jsx("div",{className:"flex h-full w-full flex-col justify-between",children:e.jsx(y,{overlayNoRowsTemplate:"No data available",onSelectionChanged:a=>{f(a.api.getSelectedRows().map(l=>l.name))},rowSelection:"multiple",suppressRowClickSelection:!0,pagination:!0,columnDefs:c,rowData:s??[],onDelete:x},"globalVariables")})]})}export{T as default};
