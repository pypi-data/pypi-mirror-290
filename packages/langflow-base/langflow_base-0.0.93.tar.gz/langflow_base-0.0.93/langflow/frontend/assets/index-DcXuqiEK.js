import{R as k,r as d,O as Ye,P as Xe,Q as I,V as me,W as be,X as ae,Y as ie,Z as ze,_ as qe,a0 as le,a1 as G,a2 as ue,a3 as Me,a4 as ge,a5 as Je,j as r,a6 as Be,B as K,a7 as Qe,I as C,a8 as F,a9 as z,aa as q,ab as Ze,ac as J,z as H,ad as Se,ae as ee,af as et,ag as tt,ah as nt,ai as A,aj as xe,u as rt,t as we,ak as V,n as O,al as ye,am as st,an as ot,ao as Ee,ap as at,aq as it,x as lt}from"./index-DugHs1zq.js";import{u as ut}from"./addNewVariableButton-DOFKcKz2.js";import{u as B,a as ct}from"./index-DX26fhId.js";import{C as $e}from"./index-dhsXRcH7.js";import{C as dt,I as ft}from"./index-DEyF4mDW.js";import{u as U}from"./index-BNRQjE7R.js";import{S as pt,a as vt,b as ht,c as mt,d as je,P as bt}from"./index-BgOZaZZR.js";import{u as Q}from"./shortcuts-BAVRR9Ck.js";import{S as te}from"./separator-zNeG_xON.js";import{H as gt}from"./index-CsuEKUZG.js";import{S as Ce}from"./index-JVT3rcxt.js";import{I as xt}from"./input-BBLODMOP.js";import{u as wt}from"./checkbox-Cp8Gj5nb.js";import"./popover-BoT3hib3.js";import"./index-DBvHSJua.js";import"./label-BZZvrSGa.js";import"./index-r4VfA4EI.js";import"./index-BTKZZIZD.js";import"./select-y7Zfqo9c.js";import"./index-CKHl3ayo.js";import"./index-Fwx-o5rU.js";import"./index-C0-Y76wX.js";import"./index-CQJAwG_T.js";const Oe=typeof document<"u"?k.useLayoutEffect:()=>{};function yt(e){const n=d.useRef(null);return Oe(()=>{n.current=e},[e]),d.useCallback((...t)=>{const s=n.current;return s==null?void 0:s(...t)},[])}const N=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},P=e=>e&&"window"in e&&e.window===e?e:N(e).defaultView||window;function Et(e){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function $t(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function jt(){return $t(/^Mac/i)}function Ct(){return Et(/Android/i)}function Tt(e){return e.mozInputSource===0&&e.isTrusted?!0:Ct()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}class kt{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(n,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=n}}function He(e){let n=d.useRef({isFocused:!1,observer:null});Oe(()=>{const s=n.current;return()=>{s.observer&&(s.observer.disconnect(),s.observer=null)}},[]);let t=yt(s=>{e==null||e(s)});return d.useCallback(s=>{if(s.target instanceof HTMLButtonElement||s.target instanceof HTMLInputElement||s.target instanceof HTMLTextAreaElement||s.target instanceof HTMLSelectElement){n.current.isFocused=!0;let l=s.target,a=p=>{n.current.isFocused=!1,l.disabled&&t(new kt("blur",p)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};l.addEventListener("focusout",a,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&l.disabled){var p;(p=n.current.observer)===null||p===void 0||p.disconnect();let u=l===document.activeElement?null:document.activeElement;l.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),l.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),n.current.observer.observe(l,{attributes:!0,attributeFilter:["disabled"]})}},[t])}function Pt(e){let{isDisabled:n,onFocus:t,onBlur:s,onFocusChange:l}=e;const a=d.useCallback(f=>{if(f.target===f.currentTarget)return s&&s(f),l&&l(!1),!0},[s,l]),p=He(a),u=d.useCallback(f=>{const m=N(f.target);f.target===f.currentTarget&&m.activeElement===f.target&&(t&&t(f),l&&l(!0),p(f))},[l,t,p]);return{focusProps:{onFocus:!n&&(t||l||s)?u:void 0,onBlur:!n&&(s||l)?a:void 0}}}let W=null,ne=new Set,R=new Map,D=!1,re=!1;const Ft={Tab:!0,Escape:!0};function ce(e,n){for(let t of ne)t(e,n)}function Dt(e){return!(e.metaKey||!jt()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function Y(e){D=!0,Dt(e)&&(W="keyboard",ce("keyboard",e))}function $(e){W="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(D=!0,ce("pointer",e))}function Ae(e){Tt(e)&&(D=!0,W="virtual")}function Re(e){e.target===window||e.target===document||(!D&&!re&&(W="virtual",ce("virtual",e)),D=!1,re=!1)}function Ne(){D=!1,re=!0}function se(e){if(typeof window>"u"||R.get(P(e)))return;const n=P(e),t=N(e);let s=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){D=!0,s.apply(this,arguments)},t.addEventListener("keydown",Y,!0),t.addEventListener("keyup",Y,!0),t.addEventListener("click",Ae,!0),n.addEventListener("focus",Re,!0),n.addEventListener("blur",Ne,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",$,!0),t.addEventListener("pointermove",$,!0),t.addEventListener("pointerup",$,!0)):(t.addEventListener("mousedown",$,!0),t.addEventListener("mousemove",$,!0),t.addEventListener("mouseup",$,!0)),n.addEventListener("beforeunload",()=>{We(e)},{once:!0}),R.set(n,{focus:s})}const We=(e,n)=>{const t=P(e),s=N(e);n&&s.removeEventListener("DOMContentLoaded",n),R.has(t)&&(t.HTMLElement.prototype.focus=R.get(t).focus,s.removeEventListener("keydown",Y,!0),s.removeEventListener("keyup",Y,!0),s.removeEventListener("click",Ae,!0),t.removeEventListener("focus",Re,!0),t.removeEventListener("blur",Ne,!1),typeof PointerEvent<"u"?(s.removeEventListener("pointerdown",$,!0),s.removeEventListener("pointermove",$,!0),s.removeEventListener("pointerup",$,!0)):(s.removeEventListener("mousedown",$,!0),s.removeEventListener("mousemove",$,!0),s.removeEventListener("mouseup",$,!0)),R.delete(t))};function Lt(e){const n=N(e);let t;return n.readyState!=="loading"?se(e):(t=()=>{se(e)},n.addEventListener("DOMContentLoaded",t)),()=>We(e,t)}typeof document<"u"&&Lt();function _e(){return W!=="pointer"}const It=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Mt(e,n,t){var s;const l=typeof window<"u"?P(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,a=typeof window<"u"?P(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,p=typeof window<"u"?P(t==null?void 0:t.target).HTMLElement:HTMLElement,u=typeof window<"u"?P(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||(t==null?void 0:t.target)instanceof l&&!It.has(t==null||(s=t.target)===null||s===void 0?void 0:s.type)||(t==null?void 0:t.target)instanceof a||(t==null?void 0:t.target)instanceof p&&(t==null?void 0:t.target.isContentEditable),!(e&&n==="keyboard"&&t instanceof u&&!Ft[t.key])}function St(e,n,t){se(),d.useEffect(()=>{let s=(l,a)=>{Mt(!!(t!=null&&t.isTextInput),l,a)&&e(_e())};return ne.add(s),()=>{ne.delete(s)}},n)}function Ot(e){let{isDisabled:n,onBlurWithin:t,onFocusWithin:s,onFocusWithinChange:l}=e,a=d.useRef({isFocusWithin:!1}),p=d.useCallback(m=>{a.current.isFocusWithin&&!m.currentTarget.contains(m.relatedTarget)&&(a.current.isFocusWithin=!1,t&&t(m),l&&l(!1))},[t,l,a]),u=He(p),f=d.useCallback(m=>{!a.current.isFocusWithin&&document.activeElement===m.target&&(s&&s(m),l&&l(!0),a.current.isFocusWithin=!0,u(m))},[s,l,u]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:f,onBlur:p}}}let X=!1,Z=0;function oe(){X=!0,setTimeout(()=>{X=!1},50)}function Te(e){e.pointerType==="touch"&&oe()}function Ht(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",Te):document.addEventListener("touchend",oe),Z++,()=>{Z--,!(Z>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",Te):document.removeEventListener("touchend",oe))}}function At(e){let{onHoverStart:n,onHoverChange:t,onHoverEnd:s,isDisabled:l}=e,[a,p]=d.useState(!1),u=d.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;d.useEffect(Ht,[]);let{hoverProps:f,triggerHoverEnd:m}=d.useMemo(()=>{let g=(c,i)=>{if(u.pointerType=i,l||i==="touch"||u.isHovered||!c.currentTarget.contains(c.target))return;u.isHovered=!0;let v=c.currentTarget;u.target=v,n&&n({type:"hoverstart",target:v,pointerType:i}),t&&t(!0),p(!0)},y=(c,i)=>{if(u.pointerType="",u.target=null,i==="touch"||!u.isHovered)return;u.isHovered=!1;let v=c.currentTarget;s&&s({type:"hoverend",target:v,pointerType:i}),t&&t(!1),p(!1)},o={};return typeof PointerEvent<"u"?(o.onPointerEnter=c=>{X&&c.pointerType==="mouse"||g(c,c.pointerType)},o.onPointerLeave=c=>{!l&&c.currentTarget.contains(c.target)&&y(c,c.pointerType)}):(o.onTouchStart=()=>{u.ignoreEmulatedMouseEvents=!0},o.onMouseEnter=c=>{!u.ignoreEmulatedMouseEvents&&!X&&g(c,"mouse"),u.ignoreEmulatedMouseEvents=!1},o.onMouseLeave=c=>{!l&&c.currentTarget.contains(c.target)&&y(c,"mouse")}),{hoverProps:o,triggerHoverEnd:y}},[n,t,s,l,u]);return d.useEffect(()=>{l&&m({currentTarget:u.target},u.pointerType)},[l]),{hoverProps:f,isHovered:a}}function Rt(e={}){let{autoFocus:n=!1,isTextInput:t,within:s}=e,l=d.useRef({isFocused:!1,isFocusVisible:n||_e()}),[a,p]=d.useState(!1),[u,f]=d.useState(()=>l.current.isFocused&&l.current.isFocusVisible),m=d.useCallback(()=>f(l.current.isFocused&&l.current.isFocusVisible),[]),g=d.useCallback(c=>{l.current.isFocused=c,p(c),m()},[m]);St(c=>{l.current.isFocusVisible=c,m()},[],{isTextInput:t});let{focusProps:y}=Pt({isDisabled:s,onFocusChange:g}),{focusWithinProps:o}=Ot({isDisabled:!s,onFocusWithinChange:g});return{isFocused:a,isFocusVisible:u,focusProps:s?o:y}}function Ke(e){return Ye.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function Nt(e){let n=e.width/2,t=e.height/2;return{top:e.clientY-t,right:e.clientX+n,bottom:e.clientY+t,left:e.clientX-n}}function Wt(e,n){return!(!e||!n||e.right<n.left||e.left>n.right||e.bottom<n.top||e.top>n.bottom)}function _t({disabled:e=!1}={}){let n=d.useRef(null),[t,s]=d.useState(!1),l=Xe(),a=I(()=>{n.current=null,s(!1),l.dispose()}),p=I(u=>{if(l.dispose(),n.current===null){n.current=u.currentTarget,s(!0);{let f=Ke(u.currentTarget);l.addEventListener(f,"pointerup",a,!1),l.addEventListener(f,"pointermove",m=>{if(n.current){let g=Nt(m);s(Wt(g,n.current.getBoundingClientRect()))}},!1),l.addEventListener(f,"pointercancel",a,!1)}}});return{pressed:t,pressProps:e?{}:{onPointerDown:p,onPointerUp:a,onClick:a}}}function Kt(e){let n=e.parentElement,t=null;for(;n&&!(n instanceof HTMLFieldSetElement);)n instanceof HTMLLegendElement&&(t=n),n=n.parentElement;let s=(n==null?void 0:n.getAttribute("disabled"))==="";return s&&Vt(t)?!1:s}function Vt(e){if(!e)return!1;let n=e.previousElementSibling;for(;n!==null;){if(n instanceof HTMLLegendElement)return!1;n=n.previousElementSibling}return!0}var L=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(L||{});let Ut=d.createContext(()=>{});function Gt({value:e,children:n}){return k.createElement(Ut.Provider,{value:e},n)}function ke(e){var n;if(e.type)return e.type;let t=(n=e.as)!=null?n:"button";if(typeof t=="string"&&t.toLowerCase()==="button")return"button"}function Yt(e,n){let[t,s]=d.useState(()=>ke(e));return me(()=>{s(ke(e))},[e.type,e.as]),me(()=>{t||n.current&&n.current instanceof HTMLButtonElement&&!n.current.hasAttribute("type")&&s("button")},[t,n]),t}var Pe;let Xt=(Pe=k.startTransition)!=null?Pe:function(e){e()};var zt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(zt||{}),qt=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(qt||{});let Jt={0:e=>({...e,disclosureState:le(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},4(e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},5(e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},2(e,n){return e.buttonId===n.buttonId?e:{...e,buttonId:n.buttonId}},3(e,n){return e.panelId===n.panelId?e:{...e,panelId:n.panelId}}},de=d.createContext(null);de.displayName="DisclosureContext";function fe(e){let n=d.useContext(de);if(n===null){let t=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,fe),t}return n}let pe=d.createContext(null);pe.displayName="DisclosureAPIContext";function Ve(e){let n=d.useContext(pe);if(n===null){let t=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Ve),t}return n}let ve=d.createContext(null);ve.displayName="DisclosurePanelContext";function Bt(){return d.useContext(ve)}function Qt(e,n){return le(n.type,Jt,e,n)}let Zt=d.Fragment;function en(e,n){let{defaultOpen:t=!1,...s}=e,l=d.useRef(null),a=ie(n,ze(w=>{l.current=w},e.as===void 0||e.as===d.Fragment)),p=d.useRef(null),u=d.useRef(null),f=d.useReducer(Qt,{disclosureState:t?0:1,linkedPanel:!1,buttonRef:u,panelRef:p,buttonId:null,panelId:null}),[{disclosureState:m,buttonId:g},y]=f,o=I(w=>{y({type:1});let x=Ke(l);if(!x||!g)return;let b=w?w instanceof HTMLElement?w:w.current instanceof HTMLElement?w.current:x.getElementById(g):x.getElementById(g);b==null||b.focus()}),c=d.useMemo(()=>({close:o}),[o]),i=d.useMemo(()=>({open:m===0,close:o}),[m,o]),v={ref:a};return k.createElement(de.Provider,{value:f},k.createElement(pe.Provider,{value:c},k.createElement(Gt,{value:o},k.createElement(qe,{value:le(m,{0:G.Open,1:G.Closed})},ue({ourProps:v,theirProps:s,slot:i,defaultTag:Zt,name:"Disclosure"})))))}let tn="button";function nn(e,n){let t=d.useId(),{id:s=`headlessui-disclosure-button-${t}`,disabled:l=!1,autoFocus:a=!1,...p}=e,[u,f]=fe("Disclosure.Button"),m=Bt(),g=m===null?!1:m===u.panelId,y=d.useRef(null),o=ie(y,n,g?null:u.buttonRef),c=Me();d.useEffect(()=>{if(!g)return f({type:2,buttonId:s}),()=>{f({type:2,buttonId:null})}},[s,f,g]);let i=I(j=>{var S;if(g){if(u.disclosureState===1)return;switch(j.key){case L.Space:case L.Enter:j.preventDefault(),j.stopPropagation(),f({type:0}),(S=u.buttonRef.current)==null||S.focus();break}}else switch(j.key){case L.Space:case L.Enter:j.preventDefault(),j.stopPropagation(),f({type:0});break}}),v=I(j=>{switch(j.key){case L.Space:j.preventDefault();break}}),w=I(j=>{var S;Kt(j.currentTarget)||l||(g?(f({type:0}),(S=u.buttonRef.current)==null||S.focus()):f({type:0}))}),{isFocusVisible:x,focusProps:b}=Rt({autoFocus:a}),{isHovered:h,hoverProps:E}=At({isDisabled:l}),{pressed:T,pressProps:_}=_t({disabled:l}),Ue=d.useMemo(()=>({open:u.disclosureState===0,hover:h,active:T,disabled:l,focus:x,autofocus:a}),[u,h,T,x,l,a]),he=Yt(e,y),Ge=g?ge({ref:o,type:he,disabled:l||void 0,autoFocus:a,onKeyDown:i,onClick:w},b,E,_):ge({ref:o,id:s,type:he,"aria-expanded":u.disclosureState===0,"aria-controls":u.linkedPanel?u.panelId:void 0,disabled:l||void 0,autoFocus:a,onKeyDown:i,onKeyUp:v,onClick:w},b,E,_);return ue({mergeRefs:c,ourProps:Ge,theirProps:p,slot:Ue,defaultTag:tn,name:"Disclosure.Button"})}let rn="div",sn=be.RenderStrategy|be.Static;function on(e,n){let t=d.useId(),{id:s=`headlessui-disclosure-panel-${t}`,...l}=e,[a,p]=fe("Disclosure.Panel"),{close:u}=Ve("Disclosure.Panel"),f=Me(),m=ie(n,a.panelRef,i=>{Xt(()=>p({type:i?4:5}))});d.useEffect(()=>(p({type:3,panelId:s}),()=>{p({type:3,panelId:null})}),[s,p]);let g=Je(),y=g!==null?(g&G.Open)===G.Open:a.disclosureState===0,o=d.useMemo(()=>({open:a.disclosureState===0,close:u}),[a,u]),c={ref:m,id:s};return k.createElement(ve.Provider,{value:a.panelId},ue({mergeRefs:f,ourProps:c,theirProps:l,slot:o,defaultTag:rn,features:sn,visible:y,name:"Disclosure.Panel"}))}let an=ae(en),ln=ae(nn),un=ae(on),M=Object.assign(an,{Button:ln,Panel:un});function cn({onSave:e,onProceed:n,onCancel:t}){return r.jsx($e,{open:!0,onClose:t,destructiveCancel:!0,title:"Exit without saving?",cancelText:"Exit anyway",confirmationText:"Save and Exit",icon:"Save",onConfirm:e,onCancel:n,size:"x-small",children:r.jsx($e.Content,{children:"You have unsaved changes. Would you like to save them before exiting?"})})}function dn({flow:e,children:n,open:t,setOpen:s}){const l=Be(c=>c.autoLogin),[a,p]=s!==void 0&&t!==void 0?[t,s]:d.useState(!1),[u,f]=d.useState("0"),m=U(c=>c.activeTweaks),g=U(c=>c.setActiveTweaks),y=U(c=>c.tabs),o=U(c=>c.initialSetup);return d.useEffect(()=>{a&&o(l,e),f("0")},[a]),r.jsxs(K,{open:a,setOpen:p,children:[r.jsx(K.Trigger,{asChild:!0,children:n}),r.jsxs(K.Header,{description:Qe,children:[r.jsx("span",{className:"pr-2",children:"API"}),r.jsx(C,{name:"Code2",className:"h-6 w-6 pl-1 text-gray-800 dark:text-white","aria-hidden":"true"})]}),r.jsx(K.Content,{overflowHidden:!0,children:r.jsx(dt,{open:a,tabs:y,activeTab:u,setActiveTab:f,activeTweaks:m,setActiveTweaks:g})})]})}function fn(){const[n,t]=d.useState(!1),[s,l]=d.useState(!1),[a,p]=d.useState(!1);function u(h){J()&&!s||l(E=>!E)}function f(h){J()&&!n||F.getState().hasIO&&t(E=>!E)}function m(h){J()&&!a||p(E=>!E)}const g=Q(h=>h.open),y=Q(h=>h.api),o=Q(h=>h.flow);B(g,f,{preventDefault:!0}),B(y,u,{preventDefault:!0}),B(o,m,{preventDefault:!0});const c=F(h=>h.hasIO),i=z(h=>h.hasStore),v=z(h=>h.validApiKey),w=z(h=>h.hasApiKey),x=F(h=>h.currentFlow),b=d.useMemo(()=>r.jsx(pt,{is_component:!1,component:x,disabled:!w||!v||!i,open:a,setOpen:p,children:r.jsxs("button",{disabled:!w||!v||!i,className:q("relative inline-flex h-full w-full items-center justify-center gap-[4px] bg-muted px-5 py-3 text-sm font-semibold text-foreground transition-all duration-150 ease-in-out hover:bg-background hover:bg-hover",!w||!v||!i?"button-disable text-muted-foreground":""),"data-testid":"shared-button-flow",children:[r.jsx(C,{name:"Share3",className:q("-m-0.5 -ml-1 h-6 w-6",!w||!v||!i?"extra-side-bar-save-disable":"")}),"Share"]})}),[w,v,x,i,a,p]);return r.jsx(r.Fragment,{children:r.jsx(Ze,{show:!0,appear:!0,enter:"transition ease-out duration-300",enterFrom:"translate-y-96",enterTo:"translate-y-0",leave:"transition ease-in duration-300",leaveFrom:"translate-y-0",leaveTo:"translate-y-96",children:r.jsx("div",{className:"shadow-round-btn-shadow hover:shadow-round-btn-shadow message-button-position flex items-center justify-center gap-7 rounded-sm border bg-muted shadow-md transition-all",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex h-full w-full gap-1 rounded-sm transition-all",children:c?r.jsx(ft,{open:n,setOpen:t,disable:!c,children:r.jsxs("div",{"data-testid":"playground-btn-flow-io",className:"relative inline-flex w-full items-center justify-center gap-1 px-5 py-3 text-sm font-semibold transition-all duration-500 ease-in-out hover:bg-hover",children:[r.jsx(C,{name:"BotMessageSquareIcon",className:"h-5 w-5 transition-all"}),"Playground"]})}):r.jsxs("div",{className:"relative inline-flex w-full cursor-not-allowed items-center justify-center gap-1 px-5 py-3 text-sm font-semibold text-muted-foreground transition-all duration-150 ease-in-out","data-testid":"playground-btn-flow",children:[r.jsx(C,{name:"BotMessageSquareIcon",className:"h-5 w-5 transition-all"}),"Playground"]})}),r.jsx("div",{children:r.jsx(te,{orientation:"vertical"})}),r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex cursor-pointer items-center gap-2",children:x&&x.data&&r.jsx(dn,{flow:x,open:s,setOpen:l,children:r.jsxs("div",{className:q("relative inline-flex w-full items-center justify-center gap-1 px-5 py-3 text-sm font-semibold text-foreground transition-all duration-150 ease-in-out hover:bg-hover"),children:[r.jsx(C,{name:"Code2",className:"h-5 w-5"}),"API"]})})}),r.jsx("div",{children:r.jsx(te,{orientation:"vertical"})})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("div",{className:`side-bar-button ${!w||!v||!i?"cursor-not-allowed":"cursor-pointer"}`,children:b})})]})})})})}function Fe({button:{title:e,Icon:n,buttons:t=[]},isChild:s=!0,children:l,defaultOpen:a}){return r.jsx(M,{as:"div",defaultOpen:a,children:({open:p})=>r.jsxs(r.Fragment,{children:[r.jsx("div",{children:r.jsxs(M.Button,{className:s?"components-disclosure-arrangement-child":"components-disclosure-arrangement","data-testid":`disclosure-${e.toLocaleLowerCase()}`,children:[r.jsxs("div",{className:"flex gap-4"+(s?" pl-2":""),children:[r.jsx(n,{strokeWidth:1.5,size:22,className:"text-primary"}),r.jsx("span",{className:"components-disclosure-title",children:e})]}),r.jsxs("div",{className:"components-disclosure-div",children:[t.map((u,f)=>r.jsx("button",{onClick:u.onClick,children:u.Icon},f)),r.jsx("div",{children:r.jsx(C,{name:"ChevronRight",className:`${p||a?"rotate-90 transform":""} h-4 w-4 text-foreground`})})]})]})}),r.jsx(M.Panel,{as:"div",children:l})]})},e)}function pn({button:{title:e,Icon:n,buttons:t=[]},children:s,defaultOpen:l,testId:a}){return r.jsx(M,{as:"div",defaultOpen:l,children:({open:p})=>r.jsxs(r.Fragment,{children:[r.jsx("div",{children:r.jsxs(M.Button,{className:"parent-disclosure-arrangement","data-testid":a,children:[r.jsxs("div",{className:"flex items-baseline gap-1 align-baseline",children:[r.jsx("span",{className:"parent-disclosure-title",children:e}),e==="Experimental"&&r.jsx("div",{className:"h-fit rounded-full bg-beta-background px-2 py-1 text-xs/3 font-semibold text-beta-foreground-soft",children:"BETA"})]}),r.jsxs("div",{className:"components-disclosure-div",children:[t.map((u,f)=>r.jsx("button",{onClick:u.onClick,children:u.Icon},f)),r.jsx("div",{children:r.jsx(C,{name:"ChevronsUpDownIcon",className:" h-4 w-4 text-foreground"})})]})]})}),r.jsx(M.Panel,{as:"div",children:s})]})},e)}const vn=d.forwardRef(({sectionName:e,display_name:n,itemName:t,error:s,color:l,onDragStart:a,apiClass:p,official:u},f)=>{const[m,g]=d.useState(!1),y=wt(),o=H(h=>h.flows),c=Se(h=>h.version),[i,v]=d.useState({x:0,y:0}),w=d.useRef(null),x=h=>{var E;if(!m){const T=((E=w.current)==null?void 0:E.getBoundingClientRect())??{left:0,top:0};v({x:h.clientX-T.left,y:h.clientY-T.top})}};function b(h){switch(h){case"share":break;case"download":const E=ee(t);et(tt({id:nt(E),type:E,node:p},c));break;case"delete":const T=o==null?void 0:o.find(_=>_.name===n);T&&y({id:T.id});break}}return r.jsx(vt,{onValueChange:b,onOpenChange:h=>g(h),open:m,children:r.jsx("div",{onPointerDown:x,onContextMenuCapture:h=>{h.preventDefault(),g(!0)},"data-tooltip-id":t,children:r.jsx("div",{draggable:!s,className:"side-bar-components-border bg-background"+(s?" cursor-not-allowed select-none":""),style:{borderLeftColor:l},onDragStart:a,onDragEnd:()=>{document.body.removeChild(document.getElementsByClassName("cursor-grabbing")[0])},children:r.jsxs("div",{"data-testid":e+n,id:e+n,className:"side-bar-components-div-form",children:[r.jsx("span",{className:"side-bar-components-text",children:n}),r.jsxs("div",{ref:w,children:[r.jsx(C,{name:"Menu",className:"side-bar-components-icon"}),r.jsx(ht,{}),r.jsxs(mt,{position:"popper",side:"bottom",sideOffset:-25,style:{position:"absolute",left:i.x,top:i.y},children:[r.jsxs(je,{value:"download",children:[r.jsxs("div",{className:"flex",children:[r.jsx(C,{name:"Download",className:"relative top-0.5 mr-2 h-4 w-4"})," ","Download"," "]})," "]}),!u&&r.jsxs(je,{value:"delete",children:[r.jsxs("div",{className:"flex",children:[r.jsx(C,{name:"Trash2",className:"relative top-0.5 mr-2 h-4 w-4"})," ","Delete"," "]})," "]})]})]})]})})},t)},t)}),De=vn;function Le(e,n){const t=A.indexOf(e.toLowerCase()),s=A.indexOf(n.toLowerCase());return t!==-1&&s!==-1?t-s:t!==-1?-1:s!==-1?1:e.localeCompare(n)}function Ie(e,n){const t=/(.+) \((\w+)\)/,s=e.match(t),l=n.match(t);if(s&&l){const a=s[1],p=l[1];if(a!==p)return a.localeCompare(p);const u=parseInt(s[2]),f=parseInt(l[2]);return u-f}else return e.localeCompare(n)}function hn(){const e=xe(o=>o.data),n=xe(o=>o.templates),t=F(o=>o.getFilterEdge),s=F(o=>o.setFilterEdge),l=rt(o=>o.setErrorData),[a,p]=d.useState(e),[u,f]=d.useState("");function m(o,c){var i=o.currentTarget.cloneNode(!0);i.style.position="absolute",i.style.top="-500px",i.style.right="-500px",i.classList.add("cursor-grabbing"),document.body.appendChild(i),o.dataTransfer.setDragImage(i,0,0),o.dataTransfer.setData("nodedata",JSON.stringify(c))}function g(o){if(o===""){p(e);return}p(c=>{let i={};return Object.keys(e).forEach((v,w)=>{i[v]={},Object.keys(e[v]).filter(b=>{var h;return b.toLowerCase().includes(o.toLowerCase())||((h=e[v][b].display_name)==null?void 0:h.toLowerCase().includes(o.toLowerCase()))}).forEach(b=>{i[v][b]=e[v][b]})}),i})}d.useEffect(()=>{let o=[];Object.keys(n).forEach(c=>{n[c].error&&o.push(c)}),o.length>0&&l({title:" Components with errors: ",list:o})},[]);function y(){(!u&&u===""||u==="search")&&(p(e),s([]),f(""))}return d.useEffect(()=>{t.length!==0&&f(""),t.length===0&&u===""&&(f(""),p(e))},[t,e]),d.useEffect(()=>{g(u)},[e]),d.useEffect(()=>{(t==null?void 0:t.length)>0&&p(o=>{let c=we.cloneDeep(e),i={};return Object.keys(c).forEach((v,w)=>{if(i[v]={},t.some(x=>x.family===v)){i[v]=c[v];const x=t.filter(b=>b.family===v).pop().type.split(",");for(let b=0;b<x.length;b++)x[b]=x[b].trimStart();if(x.some(b=>b!=="")){let b=Object.keys(c[v]).filter(h=>x.includes(h));Object.keys(c[v]).forEach(h=>{b.includes(h)||delete i[v][h]})}}}),f(""),i})},[t]),d.useEffect(()=>{(t==null?void 0:t.length)>0&&p(o=>{let c=we.cloneDeep(e),i={};return Object.keys(c).forEach((v,w)=>{if(i[v]={},t.some(x=>x.family===v)){i[v]=c[v];const x=t.filter(b=>b.family===v).pop().type.split(",");for(let b=0;b<x.length;b++)x[b]=x[b].trimStart();if(x.some(b=>b!=="")){let b=Object.keys(c[v]).filter(h=>x.includes(h));Object.keys(c[v]).forEach(h=>{b.includes(h)||delete i[v][h]})}}}),f(""),i})},[t,e]),r.jsxs("div",{className:"side-bar-arrangement",children:[r.jsxs("div",{className:"side-bar-search-div-placement",children:[r.jsx(xt,{onFocusCapture:()=>y(),value:u,type:"text",name:"search",id:"search",placeholder:"Search",className:"nopan nodelete nodrag noflow input-search",onChange:o=>{g(o.target.value),f(o.target.value)},autocomplete:"off",readonly:"readonly",onClick:()=>document.getElementById("search").removeAttribute("readonly")}),r.jsx("div",{className:"search-icon",onClick:()=>{u&&(p(e),f(""))},children:r.jsx(C,{name:u?"X":"Search",className:`h-5 w-5 stroke-[1.5] text-primary ${u?"cursor-pointer":"cursor-default"}`,"aria-hidden":"true"})})]}),r.jsx(te,{}),r.jsxs("div",{className:"side-bar-components-div-arrangement",children:[r.jsx("div",{className:"parent-disclosure-arrangement",children:r.jsx("div",{className:"flex items-center gap-4 align-middle",children:r.jsx("span",{className:"parent-disclosure-title",children:"Components"})})}),Object.keys(a).sort(Le).filter(o=>A.includes(o)).map((o,c)=>Object.keys(a[o]).length>0?r.jsx(Fe,{defaultOpen:t.length!==0||u.length!==0,isChild:!1,button:{title:V[o]??V.unknown,Icon:O[o]??O.unknown},children:r.jsx("div",{className:"side-bar-components-gap",children:Object.keys(a[o]).sort((i,v)=>Ie(a[o][i].display_name,a[o][v].display_name)).map((i,v)=>r.jsx(Ce,{content:a[o][i].display_name,side:"right",children:r.jsx(De,{sectionName:o,apiClass:a[o][i],onDragStart:w=>m(w,{type:ee(i),node:a[o][i]}),color:ye[o],itemName:i,error:!!a[o][i].error,display_name:a[o][i].display_name,official:a[o][i].official!==!1},v+i)},v))})},c+u+JSON.stringify(t)):r.jsx("div",{},c))," ",r.jsx(pn,{defaultOpen:u.length!==0||t.length!==0,button:{title:"Experimental",Icon:O.unknown},testId:"extended-disclosure",children:Object.keys(a).sort(Le).filter(o=>!A.includes(o)).map((o,c)=>Object.keys(a[o]).length>0?r.jsxs(d.Fragment,{children:[r.jsx(Fe,{isChild:!1,defaultOpen:t.length!==0||u.length!==0,button:{title:V[o]??V.unknown,Icon:O[o]??O.unknown},children:r.jsx("div",{className:"side-bar-components-gap",children:Object.keys(a[o]).sort((i,v)=>Ie(a[o][i].display_name,a[o][v].display_name)).map((i,v)=>r.jsx(Ce,{content:a[o][i].display_name,side:"right",children:r.jsx(De,{sectionName:o,apiClass:a[o][i],onDragStart:w=>m(w,{type:ee(i),node:a[o][i]}),color:ye[o],itemName:i,error:!!a[o][i].error,display_name:a[o][i].display_name,official:a[o][i].official!==!1},v)},v))})}),c===Object.keys(a).length-A.length+1&&r.jsx(r.Fragment,{children:r.jsxs("a",{target:"_blank",href:"https://langflow.store",className:"components-disclosure-arrangement",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx(st,{strokeWidth:1.5,className:"w-[22px] text-primary"}),r.jsx("span",{className:"components-disclosure-title",children:"Discover More"})]}),r.jsx("div",{className:"components-disclosure-div",children:r.jsx("div",{children:r.jsx(ot,{className:"h-4 w-4 text-foreground"})})})]})})]},`DisclosureComponent${c+u+JSON.stringify(t)}`):r.jsx("div",{},c))},`${u.length!==0}-${t.length!==0}-Advanced`)]})]})}function Nn({view:e}){const n=H(i=>i.setCurrentFlow),t=F(i=>i.currentFlow),s=H(i=>i.currentFlow),l=Ee(t)!==Ee(s),a=at(l),p=Se(i=>i.version),u=F(i=>i.setOnFlowPage),{id:f}=it(),m=lt();ut();const g=ct(),y=H(i=>i.flows),o=H(i=>i.currentFlowId),c=()=>{g().then(()=>a.proceed?a.proceed():null)};return d.useEffect(()=>{const i=v=>{l&&(v.preventDefault(),v.returnValue="")};return window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i)}},[l,m]),d.useEffect(()=>{if(y&&o===""){const i=y.find(v=>v.id===f);if(!i){m("/all");return}n(i)}},[f,y]),d.useEffect(()=>(u(!0),()=>{u(!1),n()}),[f]),r.jsxs(r.Fragment,{children:[r.jsx(gt,{}),r.jsxs("div",{className:"flow-page-positioning",children:[t&&r.jsxs("div",{className:"flex h-full overflow-hidden",children:[!e&&r.jsx(hn,{}),r.jsxs("main",{className:"flex flex-1",children:[r.jsx("div",{className:"h-full w-full",children:r.jsx(bt,{})}),!e&&r.jsx(fn,{})]})]}),r.jsxs("a",{target:"_blank",href:"https://medium.com/logspace/langflow-datastax-better-together-1b7462cebc4d",className:"langflow-page-icon",children:[p&&r.jsx("div",{className:"mt-1",children:"Langflow ðŸ¤ DataStax"}),r.jsxs("div",{className:p?"mt-2":"mt-1",children:["â›“ï¸ v",p]})]})]}),a.state==="blocked"&&r.jsx(cn,{onSave:c,onCancel:()=>a.reset?a.reset():null,onProceed:()=>a.proceed?a.proceed():null})]})}export{Nn as default};
