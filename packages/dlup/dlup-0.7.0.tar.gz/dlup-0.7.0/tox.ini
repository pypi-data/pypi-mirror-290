[tox]
envlist = py310, py311
isolated_build = True

[testenv]
deps =
    meson
    meson-python>=0.15.0
    numpy==1.26.4
    Cython>=0.29
    spin
    pybind11
    build
extras = dev,darwin
commands =
    sh -c 'meson setup builddir'
    sh -c 'meson compile -C builddir'
    sh -c 'cp builddir/*.so dlup'
    pytest
allowlist_externals =
    sh
    pytest
    pip
