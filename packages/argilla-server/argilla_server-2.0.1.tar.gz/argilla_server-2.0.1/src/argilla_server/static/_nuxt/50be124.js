(window.webpackJsonp=window.webpackJsonp||[]).push([[10,146],{1e3:function(t,i,o){"use strict";o(836)},1001:function(t,i,o){var r=o(62),a=o(72),c=o(73),l=o(74),u=r((function(t){return t[1]})),h=a(c),d=a(l);u.push([t.i,'/*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */@font-face{font-family:"raptor_v2_premiumbold";font-style:normal;font-weight:400;src:url('+h+') format("woff2"),url('+d+') format("woff")}/*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *//*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *//*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *//*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *//*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *//*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */.custom-cursor[data-v-5339a33e]{cursor:pointer;position:fixed;transform:translate(-50%,-50%)}.custom-cursor__message[data-v-5339a33e]{background:#fff;border-radius:5px;box-shadow:1px 1px 3px 0 rgba(0,0,0,.15);color:rgba(0,0,0,.87);font-size:12px;font-size:.75rem;line-height:1;padding:4px;position:fixed;transform:translate(-50%,calc(-50% - 30px));z-index:1}.textual[data-v-5339a33e]{background:var(--1d91476f);border:1px solid #fff;cursor:none;height:22px;pointer-events:none;width:4px}.textual.entity[data-v-5339a33e]{z-index:200}.textual.entity[data-v-5339a33e]:before{background:var(--1d91476f);border-radius:5px;bottom:16px;box-shadow:1px 1px 3px 0 rgba(0,0,0,.15);color:rgba(0,0,0,.87);content:attr(data-entity-name);font-size:10px;font-size:.625rem;height:auto;left:50%;line-height:1em;margin:0;padding:4px;position:absolute;text-transform:uppercase;transform:translate(-50%,-50%);white-space:nowrap}',""]),u.locals={},t.exports=u},1025:function(t,i,o){"use strict";o.r(i);o(15),o(75),o(5),o(79),o(36),o(23),o(28);var r=o(0),a=o(84),c=o(823),l=o(253),u=o(13),h=o(52),d=o(2),p=o(3),g=(o(25),o(39),o(45),o(40),o(1076),o(46),o(1077),o(116),o(42),o(29),o(24),o(37),o(136),o(20),o(56),o(57),function(){function SpanSelection(){Object(d.a)(this,SpanSelection),this.selections=[]}return Object(p.a)(SpanSelection,[{key:"spans",get:function get(){return Object(h.a)(this.selections)}},{key:"crateSpan",value:function crateSpan(t,i){if(t&&!this.isOutOfRange(t)){var o=Object.assign({},t);if(!(null==i?void 0:i.allowCharacter)){if(this.isEmpty(o.text))return;this.completeLeftSide(o),this.completeRightSide(o)}var r=o.from,a=o.to,c=o.entity,l=o.text,u=o.node;return{from:r,to:a,entity:c,text:l,node:{element:u.element,id:u.id}}}}},{key:"addSpan",value:function addSpan(t,i){var o=this.crateSpan(t,i);if(o){var r=this.selections.filter((function(t){return t.node.id===o.node.id})),a=this.selections.filter((function(t){return o.from<=t.from&&o.to>=t.to||o.from>=t.from&&o.to<=t.to||o.from<t.from&&o.to>t.from||o.from<t.to&&o.to>t.to}));(null==i?void 0:i.allowOverlap)||(this.selections=[].concat(Object(h.a)(this.selections.filter((function(t){return t.node.id!==o.node.id}))),Object(h.a)(r.filter((function(t){return!a.includes(t)}))))),this.select(o)}}},{key:"select",value:function select(t){if(!this.exists(t)){this.completeOutOfBoundaries(t);var i=this.selections.filter((function(i){return i.node.id===t.node.id})).filter((function(i){return t.from<=i.from&&t.to>=i.to||t.from>=i.from&&t.to<=i.to||t.from<i.from&&t.to>i.from||t.from<i.to&&t.to>i.to})).reduce((function(t,i){return Math.max(t,i.overlap.level)}),0)+1,o=Object.assign(Object.assign({},t),{overlap:{level:i,index:i-1}});this.selections.push(o)}}},{key:"loadSpans",value:function loadSpans(t){var i=this;t.forEach((function(t){return i.select(t)}))}},{key:"replaceEntity",value:function replaceEntity(t,i){var o=this,r=this.selections.find((function(i){return o.createId(i)===o.createId(t)}));r&&(r.entity=i)}},{key:"clear",value:function clear(){this.selections=[]}},{key:"removeSpan",value:function removeSpan(t){var i=this;this.remove(t);var o=this.spans.filter((function(i){return i.node.id===t.node.id}));o.forEach((function(t){i.remove(t)})),this.loadSpans(o)}},{key:"remove",value:function remove(t){var i=this;this.selections=this.selections.filter((function(o){return i.createId(o)!==i.createId(t)}))}},{key:"completeOutOfBoundaries",value:function completeOutOfBoundaries(t){t.from=Math.max(0,t.from),t.to=Math.min(t.node.element.textContent.length,t.to)}},{key:"isOutOfRange",value:function isOutOfRange(t){return t.from<0||t.to<0}},{key:"exists",value:function exists(t){var i=this;return this.selections.some((function(o){return i.createId(o)===i.createId(t)}))}},{key:"completeLeftSide",value:function completeLeftSide(t){for(;;){var i=t.node.text.charAt(t.from-1);if(this.isEmpty(i)||this.isSymbol(i)||0===t.to)break;var o=t.text.charAt(0);if(this.isEmpty(o)){t.from++,t.text=t.text.slice(1);break}t.from--,t.text="".concat(i).concat(t.text)}}},{key:"completeRightSide",value:function completeRightSide(t){for(;;){var i=t.node.text.charAt(t.to);if(this.isEmpty(i)||this.isSymbol(i)||t.to===t.node.text.length)break;var o=t.text.charAt(t.text.length-1);if(this.isEmpty(o)){t.to--,t.text=t.text.slice(0,-1);break}t.to++,t.text="".concat(t.text).concat(i)}}},{key:"isEmpty",value:function isEmpty(t){return" "===t||"\n"===t}},{key:"isSymbol",value:function isSymbol(t){return!["0","1","2","3","4","5","6","7","8","9"].includes(t)&&t.toLowerCase()===t.toUpperCase()}},{key:"createId",value:function createId(t){return"".concat(t.from,"-").concat(t.to,"-").concat(t.entity.id,"-").concat(t.node.id)}}],[{key:"getInstance",value:function getInstance(){return this.instance||(this.instance=new SpanSelection),this.instance}}])}());function _createForOfIteratorHelper(t,i){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function _unsupportedIterableToArray(t,i){if(t){if("string"==typeof t)return _arrayLikeToArray(t,i);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){o&&(t=o);var r=0,a=function F(){};return{s:a,n:function n(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,u=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return l=t.done,t},e:function e(t){u=!0,c=t},f:function f(){try{l||null==o.return||o.return()}finally{if(u)throw c}}}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var o=0,r=Array(i);o<i;o++)r[o]=t[o];return r}var y=function(){return Object(p.a)((function Highlighting(t,i,o,r){var a=this;Object(d.a)(this,Highlighting),this.nodeId=t,this.EntityComponentConstructor=i,this.spanSelection=g.getInstance(),this.entity=null,this.scroll=function(){a.applyEntityStyle()},this.styles=Object.assign({entitiesGap:16,lineHeight:o.allowOverlap?48:32,spanContainerId:"entity-span-container-".concat(t),entityCssKey:"hl"},r),this.config=Object.assign({allowOverlap:!1,allowCharacter:!1,lineHeight:this.styles.lineHeight},o)}),[{key:"spans",get:function get(){return Object(h.a)(this.spanSelection.spans)}},{key:"nodeSpans",get:function get(){var t=this;return this.spans.filter((function(i){return i.node.id===t.nodeId}))}},{key:"entitySpanContainer",get:function get(){var t=this.styles.spanContainerId,i=document.getElementById(t);return i||((i=document.createElement("div")).id=t),i}},{key:"mount",value:function mount(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!CSS.highlights)throw new Error("The CSS Custom Highlight API is not supported in this browser!");var i=document.getElementById(this.nodeId);if(!i)throw new Error("Node with id ".concat(this.nodeId," not found"));this.attachNode(i),this.loadHighlights(t)}},{key:"unmount",value:function unmount(){this.removeAllHighlights()}},{key:"changeSelectedEntity",value:function changeSelectedEntity(t){this.entity=t}},{key:"allowCharacterAnnotation",value:function allowCharacterAnnotation(t){this.config.allowCharacter=t,this.showPreSelection()}},{key:"replaceEntity",value:function replaceEntity(t,i){this.spanSelection.replaceEntity(t,i),this.applyStyles()}},{key:"removeAllHighlights",value:function removeAllHighlights(){this.spanSelection.clear(),this.applyStyles()}},{key:"loadHighlights",value:function loadHighlights(t){var i=this;if(!this.node)throw new Error("Node not attached, use `attachNode` method with HTMLElement that contains the text to select");var o=t.map((function(t){return Object.assign(Object.assign({},t),{text:"",node:{element:i.node.firstChild,id:i.nodeId}})}));this.spanSelection.loadSpans(o),this.applyStyles()}},{key:"updateLineHeight",value:function updateLineHeight(){var t=this.nodeSpans.reduce((function(t,i){return Math.max(t,i.overlap.level)}),0),i=t>2?this.styles.lineHeight+this.styles.entitiesGap*Math.max(0,t-2):this.styles.lineHeight;this.config.lineHeight=i}},{key:"attachNode",value:function attachNode(t){var i=this;this.node=t,t.parentNode.appendChild(this.entitySpanContainer.cloneNode(!0)),this.node.addEventListener("click",(function(){i.highlightUserSelection(),i.applyStyles()})),document.addEventListener("selectionchange",(function(){i.showSelection(),i.showPreSelection()})),new ResizeObserver((function(){return i.applyStyles()})).observe(t),this.applyStylesOnScroll()}},{key:"showSelection",value:function showSelection(){if(this.entity){var t="".concat(this.styles.entityCssKey,"-").concat(this.entity.id,"-selection"),i=this.createTextSelection();if(!i)return CSS.highlights.delete(t);if((null==i?void 0:i.node.id)===this.nodeId){var o=this.createRange(i);o&&CSS.highlights.set(t,new Highlight(o))}}}},{key:"showPreSelection",value:function showPreSelection(){if(this.entity){var t="".concat(this.styles.entityCssKey,"-").concat(this.entity.id,"-pre-selection"),i=this.createTextSelection();if(!i)return CSS.highlights.delete(t);if(i.node.id===this.nodeId){var o=this.spanSelection.crateSpan(i,this.config);if(o){var r=this.createRange(Object.assign(Object.assign({},o),{from:o.from,to:i.from})),a=this.createRange(Object.assign(Object.assign({},o),{from:i.to,to:o.to}));r&&a&&CSS.highlights.set(t,new Highlight(r,a))}}}}},{key:"applyStylesOnScroll",value:function applyStylesOnScroll(){var t;this.scrollingElement&&this.scrollingElement.removeEventListener("scroll",this.scroll),this.scrollingElement=this.getScrollParent(this.entitySpanContainer),this.scrollingElement&&(this.scrollingElement.removeEventListener("scroll",this.scroll),null===(t=this.scrollingElement)||void 0===t||t.addEventListener("scroll",this.scroll))}},{key:"highlightUserSelection",value:function highlightUserSelection(){var t=this.createTextSelection(!0);this.spanSelection.addSpan(t,this.config)}},{key:"getSelectedText",value:function getSelectedText(){if(window.getSelection)return window.getSelection()}},{key:"applyStyles",value:function applyStyles(){CSS.highlights&&(this.applyHighlightStyle(),this.applyEntityStyle())}},{key:"applyHighlightStyle",value:function applyHighlightStyle(){var t,i=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return"".concat(i.styles.entityCssKey,"-").concat(t.entity.id)},r={},a=_createForOfIteratorHelper(this.spans);try{for(a.s();!(t=a.n()).done;){var c=t.value,d=o(c);r[d]||(r[d]=[]);var p=this.createRange(c);r[d].push(p)}}catch(t){a.e(t)}finally{a.f()}var g,y=this.styles.entityCssKey,m=_createForOfIteratorHelper(CSS.highlights.entries());try{for(m.s();!(g=m.n()).done;){var v=Object(u.a)(g.value,1)[0];v.startsWith(y)&&CSS.highlights.delete(v)}}catch(t){m.e(t)}finally{m.f()}for(var S=0,w=Object.entries(r);S<w.length;S++){var b=Object(u.a)(w[S],2),O=b[0],L=b[1];CSS.highlights.set(O,Object(l.a)(Highlight,Object(h.a)(L.flat())))}}},{key:"hoverSpan",value:function hoverSpan(t,i){var o=this;this.applyHighlightStyle((function(r){return t===r&&i?"".concat(o.styles.entityCssKey,"-").concat(r.entity.id,"-hover"):"".concat(o.styles.entityCssKey,"-").concat(r.entity.id)}))}},{key:"applyEntityStyle",value:function applyEntityStyle(){for(var t=this;this.entitySpanContainer.firstChild;)this.entitySpanContainer.removeChild(this.entitySpanContainer.firstChild);this.updateLineHeight();var i,o=_createForOfIteratorHelper(this.nodeSpans);try{var r=function _loop(){var o=i.value,r=t.createPosition(o),a=t.EntityComponentConstructor(o,r,(function(i){return t.hoverSpan(o,i)}),(function(i){return t.removeSpan(i)}),(function(i){return t.replaceEntity(o,i)}),(function(i,o){return t.addSpanBaseOn(i,o)}));t.entitySpanContainer.appendChild(a)};for(o.s();!(i=o.n()).done;)r()}catch(t){o.e(t)}finally{o.f()}}},{key:"addSpanBaseOn",value:function addSpanBaseOn(t,i){if(t.entity.id!==i.id){var o=Object.assign(Object.assign({},t),{entity:i});this.spanSelection.select(o),this.applyStyles()}}},{key:"createPosition",value:function createPosition(t){var i=this.createRange(Object.assign(Object.assign({},t),{to:t.from+1})).getBoundingClientRect(),o=this.createRange(Object.assign(Object.assign({},t),{from:t.to-1})).getBoundingClientRect(),r=this.createRange(t).getBoundingClientRect(),a=this.entitySpanContainer.getBoundingClientRect(),c=this.entitySpanContainer.scrollTop,l=i.left,u=i.top,h=o.right,d=o.top,p=r.width,g={left:l,top:u+window.scrollY+this.styles.entitiesGap/10,width:p,right:h+window.scrollX,topEnd:d+window.scrollY};return t.overlap.level>0&&(g.top+=this.styles.entitiesGap*t.overlap.index,g.topEnd+=this.styles.entitiesGap*t.overlap.index),{top:g.top-a.top+c,left:g.left-a.left,width:g.width,topEnd:g.topEnd-a.top+c,right:g.right-a.left,lineHeight:this.config.lineHeight,baseEntityGap:this.styles.entitiesGap}}},{key:"removeSpan",value:function removeSpan(t){this.spanSelection.removeSpan(t),this.applyStyles()}},{key:"createRange",value:function createRange(t){var i=t.from,o=t.to,r=t.node;try{var a=new Range;return a.setStart(r.element,i),a.setEnd(r.element,o),a}catch(t){}}},{key:"createTextSelection",value:function createTextSelection(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.getSelectedText();if("Range"===(null==i?void 0:i.type)&&this.entity){var o=i.toString(),r=i.anchorOffset,a=i.focusOffset,c={from:Math.min(r,a),to:Math.max(r,a),text:o,entity:this.entity,node:{id:this.nodeId,element:i.focusNode,text:i.focusNode.textContent}};return t&&i.empty(),c}}},{key:"getScrollParent",value:function getScrollParent(t){return null==t?null:t.scrollHeight>t.clientHeight?t:this.getScrollParent(t.parentNode)}}])}(),m=o(1103),v=function useSpanAnnotationTextFieldViewModel(t){var i=t.name,o=t.spanQuestion,l=t.id,u=t.searchText,h=Object(c.a)(i),d=Object(a.f)(!0),p=o.answer,g={allowOverlap:o.settings.allow_overlapping},v=function selectEntity(t){p.options.forEach((function(i){i.isSelected=i.id===(null==t?void 0:t.id)})),S.value.changeSelectedEntity(t)},S=Object(a.f)(new y(l,(function entityComponentFactory(t,i,a,c,l,u){var h,d=r.default.extend(m.default),g=p.options.find((function(i){return i.id===t.entity.id})),y=null===(h=o.suggestion)||void 0===h?void 0:h.getSuggestion({start:t.from,end:t.to,label:null==g?void 0:g.value}),w=S.value.spans.filter((function(i){return i.from===t.from&&i.to===t.to})),b=new d({propsData:{span:t,spanInRange:w,entity:g,spanQuestion:o,entityPosition:i,suggestion:y}});return b.$on("on-remove-span",c),b.$on("on-hover-span",a),b.$on("on-add-span-base-on",u),b.$on("on-replace-entity",(function(t){v(t),l(t)})),b.$mount(),b.$el}),g));return Object(a.g)((function(){return p.options}),(function(){!function updateSelectedEntity(){var t=p.options.find((function(t){return t.isSelected}));v(t)}()}),{deep:!0}),Object(a.g)((function(){return S.value.spans}),(function(t){var i=function convertSpansToResponse(t){return t.map((function(t){var i=p.options.find((function(i){return i.id===t.entity.id}));if(i)return{start:t.from,end:t.to,label:i.value}})).filter(Boolean)}(t.filter((function(t){return t.node.id===l})));o.answer.response({value:i})}),{deep:!0}),Object(a.g)((function(){return u}),(function(t){h.highlightText(t)})),Object(a.d)((function(){var t=function convertResponseToSpans(t){return t.map((function(t){var i=p.options.find((function(i){return i.value===t.label}));if(i)return{entity:{id:i.id},from:t.start,to:t.end}})).filter(Boolean)}(o.answer.valuesAnswered);try{S.value.mount(t)}catch(t){d.value=!1}h.highlightText(u)})),Object(a.e)((function(){S.value.unmount()})),{spanAnnotationSupported:d,highlighting:S}},S={name:"SpanAnnotationTextField",props:{id:{type:String,required:!0},name:{type:String,required:!0},title:{type:String,required:!0},fieldText:{type:String,required:!0},spanQuestion:{type:Object,required:!0},searchText:{type:String,default:""}},data:function data(){return{visibleShortcutsHelper:!1,alreadyUsedTheCharacterAnnotation:!1,mouseDown:!1,mouseTimeout:null,mouseEnter:!1,showCursorWithEntity:!1,timeOutShowEntity:null}},computed:{lineHeight:function lineHeight(){return"".concat(this.highlighting.config.lineHeight,"px")},selectedEntity:function selectedEntity(){return this.spanQuestion.answer.options.find((function(t){return t.isSelected}))},selectedEntityColor:function selectedEntityColor(){var t;return null===(t=this.selectedEntity)||void 0===t?void 0:t.color},hasSelectedEntity:function hasSelectedEntity(){return!!this.selectedEntity},allowOverlapping:function allowOverlapping(){return this.highlighting.config.allowOverlap}},watch:{mouseEnter:function mouseEnter(t,i){var o=this;t!==i&&(clearTimeout(this.timeOutShowEntity),this.showCursorWithEntity=!0,this.timeOutShowEntity=setTimeout((function(){o.showCursorWithEntity=!1}),3e3))}},methods:{allowCharacterAnnotation:function allowCharacterAnnotation(t){this.highlighting.allowCharacterAnnotation(t)},keyPressing:function keyPressing(t,i){"Shift"===t.key&&(t.preventDefault(),t.stopPropagation(),this.allowCharacterAnnotation(i),this.alreadyUsedTheCharacterAnnotation=!0,this.visibleShortcutsHelper=!1)},showShortcutsHelper:function showShortcutsHelper(t){this.spanQuestion.settings.allow_character_annotation&&(this.alreadyUsedTheCharacterAnnotation||(this.visibleShortcutsHelper=t))},onMouseDown:function onMouseDown(){this.mouseDown=!0},onMouseUp:function onMouseUp(){this.mouseDown=!1,this.mouseTimeout&&clearTimeout(this.mouseTimeout),this.showShortcutsHelper(!1)},onMouseMove:function onMouseMove(){var t=this,i=this.mouseDown;this.mouseTimeout=setTimeout((function(){t.mouseDown&&t.showShortcutsHelper(i)}),500)},onKeyDown:function onKeyDown(t){this.keyPressing(t,!0)},onKeyUp:function onKeyUp(t){this.keyPressing(t,!1)}},mounted:function mounted(){this.spanQuestion.settings.allow_character_annotation&&(document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp))},beforeDestroy:function beforeDestroy(){this.spanQuestion.settings.allow_character_annotation&&(document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp))},setup:function setup(t){return v(t)}},w=function __injectCSSVars__(){Object(r.useCssVars)((function(t,i){return{f28063d6:t.lineHeight}}))},b=S.setup;S.setup=b?function(t,i){return w(),b(t,i)}:w;var O=S,L=(o(1080),o(27)),x=Object(L.a)(O,(function render(){var t=this,i=t._self._c;return i("div",{key:t.name,staticClass:"text_field_component",on:{mouseenter:function mouseenter(i){i.stopPropagation(),t.mouseEnter=!0},mouseleave:function mouseleave(i){i.stopPropagation(),t.mouseEnter=!1}}},[i("div",{staticClass:"title-area --body2"},[i("span",{staticClass:"text_field_component__title-content",domProps:{textContent:t._s(t.title)}}),t._v(" "),i("BaseActionTooltip",{staticClass:"text_field_component__tooltip",attrs:{tooltip:t.$t("copied"),"tooltip-position":"left"}},[i("BaseButton",{staticClass:"text_field_component__copy-button",attrs:{title:"Copy to clipboard"},on:{click:function click(i){return i.preventDefault(),t.$copyToClipboard(t.fieldText)}}},[i("svgicon",{attrs:{color:"#acacac",name:"copy",width:"18",height:"18"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"text_field_component__area --body1",attrs:{id:"fields-content"}},[i("p",{ref:"spanAnnotationField",class:[t.allowOverlapping?"span-annotation__field--overlapped":"span-annotation__field",t.hasSelectedEntity?"span-annotation__field--active":null],attrs:{id:t.id,tabindex:"0"},domProps:{innerHTML:t._s(t.fieldText)},on:{mousedown:t.onMouseDown,mouseup:t.onMouseUp,mousemove:t.onMouseMove}}),t._v(" "),t.hasSelectedEntity?i("SpanAnnotationCursor",{attrs:{"cursor-area-ref":"spanAnnotationField","cursor-color":t.selectedEntityColor,"show-message":t.visibleShortcutsHelper,"show-entity":t.showCursorWithEntity,"entity-name":t.selectedEntity.text,message:t.$t("spanAnnotation.shortcutHelper")}}):t._e(),t._v(" "),[t._l(t.spanQuestion.answer.options,(function(o){var r=o.id,a=o.color;return[i("style",{key:r,attrs:{scoped:""}},[t._v("\n          .span-annotation__field::highlight(hl-"+t._s(r)+") {\n            background-color: "+t._s(a)+";\n          }\n          .span-annotation__field::highlight(hl-"+t._s(r)+"-selection) {\n            background-color: "+t._s(a)+";\n          }\n          .span-annotation__field::highlight(hl-"+t._s(r)+"-pre-selection) {\n            background: "+t._s(a.palette.light)+";\n          }\n          .span-annotation__field--overlapped::highlight(hl-"+t._s(r)+"-selection) {\n            background: "+t._s(a)+";\n          }\n          .span-annotation__field--overlapped::highlight(hl-"+t._s(r)+"-pre-selection) {\n            background: "+t._s(a.palette.light)+";\n          }\n          .span-annotation__field--overlapped::highlight(hl-"+t._s(r)+"-hover) {\n            background: "+t._s(a)+";\n          }\n          ::highlight(search-text-highlight-"+t._s(t.name)+") {\n            color: #ff675f;\n          }\n        ")])]}))]],2)])}),[],!1,null,"458e0d68",null);i.default=x.exports;installComponents(x,{BaseButton:o(392).default,BaseActionTooltip:o(394).default,SpanAnnotationCursor:o(1048).default})},1048:function(t,i,o){"use strict";o.r(i);o(25),o(36),o(64),o(65),o(43),o(5),o(28);var r=o(32),a=o(0);function ownKeys(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),o.push.apply(o,r)}return o}var c={props:{cursorAreaRef:{type:String,required:!0},cursorColor:{type:String,default:"black"},showMessage:{type:Boolean,default:!1},showEntity:{type:Boolean,default:!1},entityName:{type:String,required:!0},message:{type:String,required:!0}},data:function data(){return{cursorPosition:{left:0,top:0},messagePosition:{left:0,top:0},cursorClass:void 0}},created:function created(){this.area=this.$parent.$refs[this.cursorAreaRef]},watch:{showMessage:function showMessage(){this.showMessage&&(this.messagePosition=function _objectSpread(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(o),!0).forEach((function(i){Object(r.a)(t,i,o[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))}))}return t}({},this.cursorPosition))}},methods:{addCursorClass:function addCursorClass(){this.cursorClass="textual"},removeCursorClass:function removeCursorClass(){this.cursorClass=""},updateCursorPosition:function updateCursorPosition(t){this.cursorPosition.left=t.clientX+"px",this.cursorPosition.top=t.clientY+"px"}},mounted:function mounted(){this.area&&(this.area.addEventListener("mouseover",this.addCursorClass),this.area.addEventListener("mouseleave",this.removeCursorClass),document.addEventListener("mousemove",this.updateCursorPosition))},destroyed:function destroyed(){this.area&&(this.area.removeEventListener("mouseover",this.addCursorClass),this.area.removeEventListener("mouseleave",this.removeCursorClass),document.removeEventListener("mousemove",this.updateCursorPosition))}},l=function __injectCSSVars__(){Object(a.useCssVars)((function(t,i){return{"1d91476f":t.cursorColor}}))},u=c.setup;c.setup=u?function(t,i){return l(),u(t,i)}:l;var h=c,d=(o(1e3),o(27)),p=Object(d.a)(h,(function render(){var t=this,i=t._self._c;return i("span",[t.showMessage?i("span",{staticClass:"custom-cursor__message",style:{left:t.messagePosition.left,top:t.messagePosition.top},domProps:{textContent:t._s(t.message)}}):t._e(),t._v(" "),i("span",{ref:"cursor",staticClass:"custom-cursor",class:[t.cursorClass,{entity:t.showEntity}],style:{left:t.cursorPosition.left,top:t.cursorPosition.top},attrs:{"data-message":t.message,"data-entity-name":t.entityName}})])}),[],!1,null,"5339a33e",null);i.default=p.exports},1076:function(t,i,o){"use strict";var r=o(4),a=o(857),c=o(59),l=o(86),u=o(92),h=o(204);r({target:"Array",proto:!0},{flat:function flat(){var t=arguments.length?arguments[0]:void 0,i=c(this),o=l(i),r=h(i,0);return r.length=a(r,i,i,o,0,void 0===t?1:u(t)),r}})},1077:function(t,i,o){"use strict";o(137)("flat")},1080:function(t,i,o){"use strict";o(904)},1081:function(t,i,o){var r=o(62),a=o(72),c=o(73),l=o(74),u=r((function(t){return t[1]})),h=a(c),d=a(l);u.push([t.i,'/*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */@font-face{font-family:"raptor_v2_premiumbold";font-style:normal;font-weight:400;src:url('+h+') format("woff2"),url('+d+') format("woff")}/*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *//*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *//*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *//*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *//*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *//*!\n * coding=utf-8\n * Copyright 2021-present, the Recognai S.L. team.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */.text_field_component[data-v-458e0d68]{background:#fafafa;border-radius:10px;display:flex;flex-direction:column;gap:8px;padding:16px}.text_field_component:hover .text_field_component__copy-button[data-v-458e0d68]{opacity:1}.text_field_component .title-area[data-v-458e0d68]{align-items:center;color:rgba(0,0,0,.87);display:flex;gap:8px;justify-content:space-between}.text_field_component__area[data-v-458e0d68]{position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:pre-wrap;word-break:break-word}.text_field_component__title-content[data-v-458e0d68]{width:calc(100% - 30px);word-break:break-word}.text_field_component__tooltip[data-v-458e0d68]{align-self:flex-start;display:flex}.text_field_component__copy-button[data-v-458e0d68]{flex-shrink:0;opacity:0;padding:0}.span-annotation__field[data-v-458e0d68],.span-annotation__field--overlapped[data-v-458e0d68]{font-size:16px;font-size:1rem;line-height:var(--f28063d6);margin:0;position:relative;-webkit-user-select:text;-moz-user-select:text;user-select:text}.span-annotation__field--active[data-v-458e0d68]{cursor:none}.span-annotation__field--active[data-v-458e0d68]::-moz-selection{background-color:transparent}.span-annotation__field--active[data-v-458e0d68]::selection{background-color:transparent}.span-annotation__field--overlapped[data-v-458e0d68]:focus,.span-annotation__field[data-v-458e0d68]:focus{outline:none}.fade-enter-active[data-v-458e0d68],.fade-leave-active[data-v-458e0d68]{transition:all .25s}.fade-enter-from[data-v-458e0d68],.fade-leave-to[data-v-458e0d68]{opacity:0}[data-v-458e0d68] [id^=entity-span-container]{left:0;position:absolute;top:0}[data-v-458e0d68]::highlight(search-text-highlight){color:#ff675f}',""]),u.locals={},t.exports=u},823:function(t,i,o){"use strict";o.d(i,"a",(function(){return c}));var r=o(253),a=o(52);o(25),o(39),o(45),o(36),o(46),o(42),o(15),o(5),o(256),o(29),o(37),o(24),o(103),o(20);function _createForOfIteratorHelper(t,i){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function _unsupportedIterableToArray(t,i){if(t){if("string"==typeof t)return _arrayLikeToArray(t,i);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){o&&(t=o);var r=0,a=function F(){};return{s:a,n:function n(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,u=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return l=t.done,t},e:function e(t){u=!0,c=t},f:function f(){try{l||null==o.return||o.return()}finally{if(u)throw c}}}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var o=0,r=Array(i);o<i;o++)r[o]=t[o];return r}var c=function useSearchTextHighlight(t){var i="fields-content-".concat(t),o="search-text-highlight-".concat(t);return{highlightText:function highlightText(t){var c=document.getElementById(i);if(t&&c){var l=function createRangesToHighlight(t,i){CSS.highlights.delete(o);var r,c=[],l=function getAllCoincidences(t,i,o){var r=[];if("PARTIAL"===o)for(var a,c=0;(a=t.nodeValue.toLowerCase().indexOf(i.toLowerCase(),c))>-1;){var l={start:a,end:a+i.length};r.push(l),c=l.end}if("WORD"===o)for(var u,h=new RegExp("\\b".concat(i,"\\b"),"gi");u=h.exec(t.nodeValue.toLowerCase());)r.push({start:u.index,end:u.index+u[0].length});return r},u=function createRanges(t,i){var o,r=[],a=_createForOfIteratorHelper(i);try{for(a.s();!(o=a.n()).done;){var c=o.value,l=new Range;l.setStart(t,c.start),l.setEnd(t,c.end),r.push(l)}}catch(t){a.e(t)}finally{a.f()}return r},h=function getTextNodesUnder(t){for(var i=[],o=document.createTreeWalker(t,NodeFilter.SHOW_TEXT);o.nextNode();)i.push(o.currentNode);return i.filter((function(t){return t.nodeValue.trim().length>0}))}(t),d=i.split(" "),p=_createForOfIteratorHelper(h);try{for(p.s();!(r=p.n()).done;){var g,y=r.value,m=_createForOfIteratorHelper(d);try{for(m.s();!(g=m.n()).done;){var v=u(y,l(y,g.value,"WORD"));c.push.apply(c,Object(a.a)(v))}}catch(t){m.e(t)}finally{m.f()}}}catch(t){p.e(t)}finally{p.f()}return c}(c,t);CSS.highlights.set(o,Object(r.a)(Highlight,Object(a.a)(l)))}}}}},836:function(t,i,o){var r=o(1001);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,o(63).default)("2a494161",r,!0,{sourceMap:!1})},857:function(t,i,o){"use strict";var r=o(138),a=o(86),c=o(255),l=o(41),flattenIntoArray=function(t,i,o,u,h,d,p,g){for(var y,m,v=h,S=0,w=!!p&&l(p,g);S<u;)S in o&&(y=w?w(o[S],S,i):o[S],d>0&&r(y)?(m=a(y),v=flattenIntoArray(t,i,y,m,v,d-1)-1):(c(v+1),t[v]=y),v++),S++;return v};t.exports=flattenIntoArray},904:function(t,i,o){var r=o(1081);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,o(63).default)("36ff56b3",r,!0,{sourceMap:!1})}}]);