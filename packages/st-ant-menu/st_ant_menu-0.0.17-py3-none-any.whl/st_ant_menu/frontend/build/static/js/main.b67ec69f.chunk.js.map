{"version":3,"sources":["AntMenu.tsx","index.tsx"],"names":["Icons","parseMenuItems","data","iconSize","iconMinWidth","map","item","menuItem","key","label","icon","undefined","children","type","disabled","startsWith","React","createElement","style","minWidth","display","alignItems","className","concat","fontSize","Icon","error","console","warn","match","dangerouslySetInnerHTML","__html","Object","keys","AllIcons","forEach","withStreamlitConnection","props","_props$args","args","menu_data","defaultSelectedKeys","defaultOpenKeys","additionalHeight","close_auto","multiple","css_styling","theme","menu_click","modus","generall_css_styling","inlineIndent","custom_font_awesome_url","_useState","useState","_useState2","_slicedToArray","openKeys","setOpenKeys","_useState3","_useState4","selectedKeys","setSelectedKeys","_useState5","_useState6","clickOccurred","setClickOccurred","rootSubmenuKeys","useEffect","menuElement","document","querySelector","resizeObserver","ResizeObserver","entries","_step","_iterator","_createForOfIteratorHelper","s","n","done","height","value","target","clientHeight","Streamlit","setFrameHeight","err","e","f","observe","unobserve","setComponentValue","Fragment","Helmet","src","crossOrigin","id","Menu","mode","onOpenChange","latestOpenKey","find","indexOf","_objectSpread","width","borderRight","overflow","borderRadius","items","onClick","_ref","includes","filter","k","_toConsumableArray","ReactDOM","render","StrictMode","MenuComponent","getElementById"],"mappings":"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","file":"static/js/main.b67ec69f.chunk.js","sourcesContent":["import { Menu } from \"antd\";\r\nimport { MenuProps } from \"antd/lib/menu\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport {\r\n  ComponentProps,\r\n  Streamlit,\r\n  withStreamlitConnection,\r\n} from \"streamlit-component-lib\";\r\nimport * as AllIcons from \"@ant-design/icons\";\r\nimport { ComponentType } from \"react\";\r\nimport { Helmet } from 'react-helmet';\r\n\r\n\r\n// Create a mapping of all available Ant Design icons\r\nconst Icons: Record<string, ComponentType<any>> = {};\r\nObject.keys(AllIcons).forEach((key) => {\r\n  Icons[key as keyof typeof AllIcons] = AllIcons[key as keyof typeof AllIcons] as ComponentType<any>;\r\n});\r\n\r\n\r\ninterface MenuItem {\r\n  key: string;\r\n  label: string | null;\r\n  icon?: React.ReactNode;\r\n  children?: MenuItem[];\r\n  type?: \"group\" | \"divider\" | \"text\" | null;  // added \"text\" type\r\n  disabled?: boolean;\r\n}\r\n\r\n\r\nfunction parseMenuItems(data: any[], iconSize: string, iconMinWidth: string): MenuItem[] {\r\n  return data.map((item: any) => {\r\n    const menuItem: MenuItem = {\r\n      key: item.key,\r\n      label: item.label === null ? null : \"\",\r\n      icon: undefined,\r\n      children: item.children ? parseMenuItems(item.children, iconSize, iconMinWidth) : undefined,\r\n      type: item.type || undefined,\r\n      disabled: item.disabled ? true : false,\r\n    };\r\n\r\n    if (item.icon) {\r\n      try {\r\n        if (item.icon.startsWith('fa-')) {\r\n          // If the icon is a FontAwesome icon, create an <i> tag\r\n          menuItem.icon = (\r\n            <div style={{ minWidth: iconMinWidth, display: 'flex', alignItems: 'center' }}>\r\n              <i className={`fa ${item.icon}`} style={{ fontSize: iconSize }} />\r\n            </div>\r\n          );\r\n        } else {\r\n          const Icon = Icons[item.icon];\r\n          if (Icon) {\r\n            menuItem.icon = (\r\n              <div style={{ minWidth: iconMinWidth, display: 'flex', alignItems: 'center' }}>\r\n                {React.createElement(Icon, {\r\n                  style: { fontSize: iconSize }\r\n                })}\r\n              </div>\r\n            );\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.warn(`Failed to create icon for \"${item.icon}\":`, error);\r\n      }\r\n    }\r\n\r\n    if (item.label && item.label !== null) {\r\n      if (item.label.match(/<(.*?)>/)) {\r\n        menuItem.label = (\r\n          <span\r\n            dangerouslySetInnerHTML={{ __html: item.label }}\r\n          ></span>\r\n        ) as unknown as string;\r\n      } else {\r\n        menuItem.label = item.label as string;\r\n      }\r\n    }\r\n\r\n    return menuItem;\r\n  });\r\n}\r\n\r\n\r\n\r\n/**\r\n * A React component that renders an Ant Design menu based on the provided menu data.\r\n */\r\nconst MenuComponent = (props: ComponentProps) => {\r\n  const { menu_data, key, defaultSelectedKeys, defaultOpenKeys, additionalHeight, close_auto, multiple, css_styling, theme,menu_click, iconSize,modus,generall_css_styling, inlineIndent, custom_font_awesome_url,\r\n    iconMinWidth} = props.args;\r\n    const [openKeys, setOpenKeys] = useState<string[]>(defaultOpenKeys || []);\r\n    const [selectedKeys, setSelectedKeys] = useState<string[]>(defaultSelectedKeys || []);\r\n    const [clickOccurred, setClickOccurred] = useState<boolean>(false);  // Track if a click occurred\r\n    const rootSubmenuKeys = menu_data.map((item: any) => item.key);\r\n  \r\n\r\n  useEffect(() => {\r\n    // Select the menu element\r\n    const menuElement = document.querySelector('.ant-menu');\r\n  \r\n    // If the menu exists, observe changes in its size\r\n    if (menuElement) {\r\n      const resizeObserver = new ResizeObserver(entries => {\r\n        for (let entry of entries) {\r\n          // Set the height when the size of the menu changes\r\n          const height = entry.target.clientHeight;\r\n          Streamlit.setFrameHeight(height + additionalHeight);\r\n        }\r\n      });\r\n  \r\n      // Start observing\r\n      resizeObserver.observe(menuElement);\r\n  \r\n      // Cleanup\r\n      return () => {\r\n        resizeObserver.unobserve(menuElement);\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  const onOpenChange: MenuProps['onOpenChange'] = (keys) => {\r\n    const latestOpenKey = keys.find((key) => openKeys.indexOf(key) === -1);\r\n    if (rootSubmenuKeys.indexOf(latestOpenKey!) === -1) {\r\n      setOpenKeys(keys);\r\n    \r\n    } else {\r\n      if (menu_click == true && clickOccurred) {\r\n        Streamlit.setComponentValue(keys);\r\n      }\r\n\r\n      if (close_auto == true) {\r\n      setOpenKeys(latestOpenKey ? [latestOpenKey] : []);\r\n      \r\n    } else {\r\n      setOpenKeys(keys);  // Keep all keys\r\n    }\r\n\r\n  };\r\n  };\r\n\r\n\r\n  const onClick = ({ key }: { key: string }) => {\r\n    setClickOccurred(true);  // Update the state to indicate a click occurred\r\n    if (multiple) {\r\n      if (selectedKeys.includes(key)) {\r\n        setSelectedKeys(selectedKeys.filter(k => k !== key));\r\n      } else {\r\n        setSelectedKeys([...selectedKeys, key]);\r\n      }\r\n    } else {\r\n      setSelectedKeys([key]);\r\n    }\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    if (clickOccurred) {\r\n      // console.log(\"Sending selected keys to Streamlit:\", selectedKeys);\r\n      Streamlit.setComponentValue(selectedKeys);\r\n    }  }, [selectedKeys]);\r\n\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <script\r\n          src={custom_font_awesome_url}\r\n          crossOrigin=\"anonymous\"\r\n          id=\"font-awesome-icons\"\r\n        />\r\n      </Helmet>\r\n     \r\n        <style dangerouslySetInnerHTML={{ __html: generall_css_styling }} />\r\n      <Menu\r\n        id={key}\r\n        mode={modus}\r\n        openKeys={openKeys}\r\n        onOpenChange={onOpenChange}\r\n        inlineIndent={inlineIndent}\r\n        style={{\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          borderRight: 0,\r\n          overflow: \"auto\",\r\n          borderRadius: \"10px\",\r\n          ...css_styling\r\n        }}\r\n        theme={theme}\r\n        items={parseMenuItems(menu_data, iconSize, iconMinWidth)}\r\n        multiple={multiple}\r\n        defaultSelectedKeys={defaultSelectedKeys}\r\n        defaultOpenKeys={defaultOpenKeys}\r\n        onClick={onClick}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\n\r\n\r\nexport default withStreamlitConnection(MenuComponent);","\r\nimport React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport MenuComponent from \"./AntMenu\"\r\n\r\n// Lots of import to define a Styletron engine and load the light theme of baseui\r\n\r\n\r\n// Wrap your CustomSlider with the baseui them\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <MenuComponent />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n)"],"sourceRoot":""}